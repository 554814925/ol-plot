webpackJsonp([1],{"/tl0":function(t,e){},"7YgM":function(t,e){t.exports={name:"ol-plot-vue",version:"0.0.1",description:"a vue project for ol-plot",author:"FDD <smileFDD@gmail.com>",private:!0,scripts:{dev:"webpack-dev-server --inline --progress --config build/webpack.dev.conf.js",start:"npm run dev",lint:"eslint --ext .js,.vue src",build:"node build/build.js"},dependencies:{autosize:"^4.0.0","node-sass":"^4.7.2","normalize.css":"^7.0.0","observable-emit":"^1.1.1",openlayers:"^4.6.4","popper.js":"^1.12.9","sass-loader":"^6.0.6",vue:"^2.5.2","vue-color":"^2.4.3"},devDependencies:{autoprefixer:"^7.1.2","babel-core":"^6.22.1","babel-eslint":"^8.2.1","babel-helper-vue-jsx-merge-props":"^2.0.3","babel-loader":"^7.1.1","babel-plugin-syntax-jsx":"^6.18.0","babel-plugin-transform-runtime":"^6.22.0","babel-plugin-transform-vue-jsx":"^3.5.0","babel-preset-env":"^1.3.2","babel-preset-stage-2":"^6.22.0",chalk:"^2.0.1","copy-webpack-plugin":"^4.0.1","css-loader":"^0.28.0",eslint:"^4.15.0","eslint-config-standard":"^10.2.1","eslint-friendly-formatter":"^3.0.0","eslint-loader":"^1.7.1","eslint-plugin-import":"^2.7.0","eslint-plugin-node":"^5.2.0","eslint-plugin-promise":"^3.4.0","eslint-plugin-standard":"^3.0.1","eslint-plugin-vue":"^4.0.0","extract-text-webpack-plugin":"^3.0.0","file-loader":"^1.1.4","friendly-errors-webpack-plugin":"^1.6.1","html-webpack-plugin":"^2.30.1","node-notifier":"^5.1.2","optimize-css-assets-webpack-plugin":"^3.2.0",ora:"^1.2.0",portfinder:"^1.0.13","postcss-import":"^11.0.0","postcss-loader":"^2.0.8","postcss-url":"^7.2.1",rimraf:"^2.6.0",semver:"^5.3.0",shelljs:"^0.7.6","uglifyjs-webpack-plugin":"^1.1.1","url-loader":"^0.5.8","vue-loader":"^13.3.0","vue-style-loader":"^3.0.1","vue-template-compiler":"^2.5.2",webpack:"^3.6.0","webpack-bundle-analyzer":"^2.9.0","webpack-dev-server":"^2.9.1","webpack-merge":"^4.1.0"},engines:{node:">= 6.0.0",npm:">= 3.0.0"},browserslist:["> 1%","last 2 versions","not ie <= 8"]}},"9Pv4":function(t,e){t.exports=[{id:"Point",name:"目标",alias:"Point",src:"Point"},{id:"AttackArrow",name:"进攻方向",alias:"AttackArrow",src:"AttackArrow"},{id:"AssaultDirection",name:"直箭头",alias:"AssaultDirection",src:"AssaultDirection"},{id:"FineArrow",name:"斜箭头",alias:"FineArrow",src:"FineArrow"},{id:"DoubleArrow",name:"双箭头",alias:"DoubleArrow",src:"DoubleArrow"},{id:"StraightArrow",name:"细直箭头",alias:"StraightArrow",src:"StraightArrow"},{id:"TailedAttackArrow",name:"燕尾曲箭头",alias:"TailedAttackArrow",src:"TailedAttackArrow"},{id:"SquadCombat",name:"曲箭头",alias:"SquadCombat",src:"SquadCombat"},{id:"RectAngle",name:"矩形",alias:"RectAngle",src:"RectAngle"},{id:"Circle",name:"圆形",alias:"Circle",src:"Circle"},{id:"Ellipse",name:"椭圆形",alias:"Ellipse",src:"Ellipse"},{id:"Polygon",name:"多边形",alias:"Polygon",src:"Polygon"},{id:"GatheringPlace",name:"集结地",alias:"GatheringPlace",src:"GatheringPlace"},{id:"Sector",name:"扇形",alias:"Sector",src:"Sector"},{id:"Arc",name:"弓形",alias:"Arc",src:"Arc"},{id:"FreePolygon",name:"自由面",alias:"FreePolygon",src:"FreePolygon"},{id:"FreeHandLine",name:"自由线",alias:"FreeHandLine",src:"FreeHandLine"},{id:"Polyline",name:"线",alias:"Polyline",src:"Polyline"},{id:"Curve",name:"曲线",alias:"Curve",src:"Curve"},{id:"RectFlag",name:"矩形标志旗",alias:"RectFlag",src:"RectFlag"},{id:"TriangleFlag",name:"三角标志旗",alias:"TriangleFlag",src:"TriangleFlag"},{id:"CurveFlag",name:"曲线标志旗",alias:"CurveFlag",src:"CurveFlag"},{id:"TextArea",name:"气泡",alias:"TextArea",src:"TextArea"}]},A4pt:function(t,e){},Fy3E:function(t,e){},P4zV:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){var e,i,o=n("K6ED"),r=n.n(o),a=n("fZjL"),s=n.n(a),l=n("woOf"),u=n.n(l),c=n("pFYg"),h=n.n(c);e=this,i=function(){var t=window,e={placement:"bottom",gpuAcceleration:!0,offset:0,boundariesElement:"viewport",boundariesPadding:5,preventOverflowOrder:["left","right","top","bottom"],flipBehavior:"flip",arrowElement:"[x-arrow]",modifiers:["shift","offset","preventOverflow","keepTogether","arrow","flip","applyStyle"],modifiersIgnored:[],forceAbsolute:!1};function n(t,n,i){this._reference=t.jquery?t[0]:t,this.state={};var o=void 0===n||null===n,r=n&&"[object Object]"===Object.prototype.toString.call(n);return this._popper=o||r?this.parse(r?n:{}):n.jquery?n[0]:n,this._options=u()({},e,i),this._options.modifiers=this._options.modifiers.map(function(t){if(-1===this._options.modifiersIgnored.indexOf(t))return"applyStyle"===t&&this._popper.setAttribute("x-placement",this._options.placement),this.modifiers[t]||t}.bind(this)),this.state.position=this._getPosition(this._popper,this._reference),f(this._popper,{position:this.state.position,top:0}),this.update(),this._setupEventListeners(),this}function i(e){var n=e.style.display,i=e.style.visibility;e.style.display="block",e.style.visibility="hidden";e.offsetWidth;var o=t.getComputedStyle(e),r=parseFloat(o.marginTop)+parseFloat(o.marginBottom),a=parseFloat(o.marginLeft)+parseFloat(o.marginRight),s={width:e.offsetWidth+a,height:e.offsetHeight+r};return e.style.display=n,e.style.visibility=i,s}function o(t){var e={left:"right",right:"left",bottom:"top",top:"bottom"};return t.replace(/left|right|bottom|top/g,function(t){return e[t]})}function a(t){var e=u()({},t);return e.right=e.left+e.width,e.bottom=e.top+e.height,e}function l(t,e){var n,i=0;for(n in t){if(t[n]===e)return i;i++}return null}function c(e,n){return t.getComputedStyle(e,null)[n]}function h(e){var n=e.offsetParent;return n!==t.document.body&&n?n:t.document.documentElement}function p(e){var n=e.parentNode;return n?n===t.document?t.document.body.scrollTop?t.document.body:t.document.documentElement:-1!==["scroll","auto"].indexOf(c(n,"overflow"))||-1!==["scroll","auto"].indexOf(c(n,"overflow-x"))||-1!==["scroll","auto"].indexOf(c(n,"overflow-y"))?n:p(e.parentNode):e}function f(t,e){s()(e).forEach(function(n){var i,o="";-1!==["width","height","top","right","bottom","left"].indexOf(n)&&(""!==(i=e[n])&&!isNaN(parseFloat(i))&&isFinite(i))&&(o="px"),t.style[n]=e[n]+o})}function d(t){var e={width:t.offsetWidth,height:t.offsetHeight,left:t.offsetLeft,top:t.offsetTop};return e.right=e.left+e.width,e.bottom=e.top+e.height,e}function g(t){var e=t.getBoundingClientRect(),n=-1!=navigator.userAgent.indexOf("MSIE")&&"HTML"===t.tagName?-t.scrollTop:e.top;return{left:e.left,top:n,right:e.right,bottom:e.bottom,width:e.right-e.left,height:e.bottom-n}}function v(e){for(var n=["","ms","webkit","moz","o"],i=0;i<n.length;i++){var o=n[i]?n[i]+e.charAt(0).toUpperCase()+e.slice(1):e;if(void 0!==t.document.body.style[o])return o}return null}return n.prototype.destroy=function(){return this._popper.removeAttribute("x-placement"),this._popper.style.left="",this._popper.style.position="",this._popper.style.top="",this._popper.style[v("transform")]="",this._removeEventListeners(),this._options.removeOnDestroy&&this._popper.remove(),this},n.prototype.update=function(){var t={instance:this,styles:{}};t.placement=this._options.placement,t._originalPlacement=this._options.placement,t.offsets=this._getOffsets(this._popper,this._reference,t.placement),t.boundaries=this._getBoundaries(t,this._options.boundariesPadding,this._options.boundariesElement),t=this.runModifiers(t,this._options.modifiers),"function"==typeof this.state.updateCallback&&this.state.updateCallback(t)},n.prototype.onCreate=function(t){return t(this),this},n.prototype.onUpdate=function(t){return this.state.updateCallback=t,this},n.prototype.parse=function(e){var n={tagName:"div",classNames:["popper"],attributes:[],parent:t.document.body,content:"",contentType:"text",arrowTagName:"div",arrowClassNames:["popper__arrow"],arrowAttributes:["x-arrow"]};e=u()({},n,e);var i=t.document,o=i.createElement(e.tagName);if(s(o,e.classNames),l(o,e.attributes),"node"===e.contentType?o.appendChild(e.content.jquery?e.content[0]:e.content):"html"===e.contentType?o.innerHTML=e.content:o.textContent=e.content,e.arrowTagName){var r=i.createElement(e.arrowTagName);s(r,e.arrowClassNames),l(r,e.arrowAttributes),o.appendChild(r)}var a=e.parent.jquery?e.parent[0]:e.parent;if("string"==typeof a){if((a=i.querySelectorAll(e.parent)).length>1&&console.warn("WARNING: the given `parent` query("+e.parent+") matched more than one element, the first one will be used"),0===a.length)throw"ERROR: the given `parent` doesn't exists!";a=a[0]}return a.length>1&&a instanceof Element==!1&&(console.warn("WARNING: you have passed as parent a list of elements, the first one will be used"),a=a[0]),a.appendChild(o),o;function s(t,e){e.forEach(function(e){t.classList.add(e)})}function l(t,e){e.forEach(function(e){t.setAttribute(e.split(":")[0],e.split(":")[1]||"")})}},n.prototype._getPosition=function(e,n){h(n);return this._options.forceAbsolute?"absolute":function e(n){if(n===t.document.body)return!1;if("fixed"===c(n,"position"))return!0;return n.parentNode?e(n.parentNode):n}(n)?"fixed":"absolute"},n.prototype._getOffsets=function(t,e,n){n=n.split("-")[0];var o={};o.position=this.state.position;var r="fixed"===o.position,a=function(t,e,n){var i=g(t),o=g(e);if(n){var r=p(e);o.top+=r.scrollTop,o.bottom+=r.scrollTop,o.left+=r.scrollLeft,o.right+=r.scrollLeft}return{top:i.top-o.top,left:i.left-o.left,bottom:i.top-o.top+i.height,right:i.left-o.left+i.width,width:i.width,height:i.height}}(e,h(t),r),s=i(t);return-1!==["right","left"].indexOf(n)?(o.top=a.top+a.height/2-s.height/2,o.left="left"===n?a.left-s.width:a.right):(o.left=a.left+a.width/2-s.width/2,o.top="top"===n?a.top-s.height:a.bottom),o.width=s.width,o.height=s.height,{popper:o,reference:a}},n.prototype._setupEventListeners=function(){if(this.state.updateBound=this.update.bind(this),t.addEventListener("resize",this.state.updateBound),"window"!==this._options.boundariesElement){var e=p(this._reference);e!==t.document.body&&e!==t.document.documentElement||(e=t),e.addEventListener("scroll",this.state.updateBound)}},n.prototype._removeEventListeners=function(){if(t.removeEventListener("resize",this.state.updateBound),"window"!==this._options.boundariesElement){var e=p(this._reference);e!==t.document.body&&e!==t.document.documentElement||(e=t),e.removeEventListener("scroll",this.state.updateBound)}this.state.updateBound=null},n.prototype._getBoundaries=function(e,n,i){var o,r,a,s={};if("window"===i){var l=t.document.body,u=t.document.documentElement;o=Math.max(l.scrollHeight,l.offsetHeight,u.clientHeight,u.scrollHeight,u.offsetHeight),s={top:0,right:Math.max(l.scrollWidth,l.offsetWidth,u.clientWidth,u.scrollWidth,u.offsetWidth),bottom:o,left:0}}else if("viewport"===i){var c=h(this._popper),f=p(this._popper),g=d(c),v="fixed"===e.offsets.popper.position?0:(a=f)==document.body?Math.max(document.documentElement.scrollTop,document.body.scrollTop):a.scrollTop,m="fixed"===e.offsets.popper.position?0:(r=f)==document.body?Math.max(document.documentElement.scrollLeft,document.body.scrollLeft):r.scrollLeft;s={top:0-(g.top-v),right:t.document.documentElement.clientWidth-(g.left-m),bottom:t.document.documentElement.clientHeight-(g.top-v),left:0-(g.left-m)}}else s=h(this._popper)===i?{top:0,left:0,right:i.clientWidth,bottom:i.clientHeight}:d(i);return s.left+=n,s.right-=n,s.top=s.top+n,s.bottom=s.bottom-n,s},n.prototype.runModifiers=function(t,e,n){var i=e.slice();return void 0!==n&&(i=this._options.modifiers.slice(0,l(this._options.modifiers,n))),i.forEach(function(e){var n;(n=e)&&"[object Function]"==={}.toString.call(n)&&(t=e.call(this,t))}.bind(this)),t},n.prototype.isModifierRequired=function(t,e){var n=l(this._options.modifiers,t);return!!this._options.modifiers.slice(0,n).filter(function(t){return t===e}).length},n.prototype.modifiers={},n.prototype.modifiers.applyStyle=function(t){var e,n={position:t.offsets.popper.position},i=Math.round(t.offsets.popper.left),o=Math.round(t.offsets.popper.top);return this._options.gpuAcceleration&&(e=v("transform"))?(n[e]="translate3d("+i+"px, "+o+"px, 0)",n.top=0,n.left=0):(n.left=i,n.top=o),u()(n,t.styles),f(this._popper,n),this._popper.setAttribute("x-placement",t.placement),this.isModifierRequired(this.modifiers.applyStyle,this.modifiers.arrow)&&t.offsets.arrow&&f(t.arrowElement,t.offsets.arrow),t},n.prototype.modifiers.shift=function(t){var e=t.placement,n=e.split("-")[0],i=e.split("-")[1];if(i){var o=t.offsets.reference,r=a(t.offsets.popper),s={y:{start:{top:o.top},end:{top:o.top+o.height-r.height}},x:{start:{left:o.left},end:{left:o.left+o.width-r.width}}},l=-1!==["bottom","top"].indexOf(n)?"x":"y";t.offsets.popper=u()(r,s[l][i])}return t},n.prototype.modifiers.preventOverflow=function(t){var e=this._options.preventOverflowOrder,n=a(t.offsets.popper),i={left:function(){var e=n.left;return n.left<t.boundaries.left&&(e=Math.max(n.left,t.boundaries.left)),{left:e}},right:function(){var e=n.left;return n.right>t.boundaries.right&&(e=Math.min(n.left,t.boundaries.right-n.width)),{left:e}},top:function(){var e=n.top;return n.top<t.boundaries.top&&(e=Math.max(n.top,t.boundaries.top)),{top:e}},bottom:function(){var e=n.top;return n.bottom>t.boundaries.bottom&&(e=Math.min(n.top,t.boundaries.bottom-n.height)),{top:e}}};return e.forEach(function(e){t.offsets.popper=u()(n,i[e]())}),t},n.prototype.modifiers.keepTogether=function(t){var e=a(t.offsets.popper),n=t.offsets.reference,i=Math.floor;return e.right<i(n.left)&&(t.offsets.popper.left=i(n.left)-e.width),e.left>i(n.right)&&(t.offsets.popper.left=i(n.right)),e.bottom<i(n.top)&&(t.offsets.popper.top=i(n.top)-e.height),e.top>i(n.bottom)&&(t.offsets.popper.top=i(n.bottom)),t},n.prototype.modifiers.flip=function(t){if(!this.isModifierRequired(this.modifiers.flip,this.modifiers.preventOverflow))return console.warn("WARNING: preventOverflow modifier is required by flip modifier in order to work, be sure to include it before flip!"),t;if(t.flipped&&t.placement===t._originalPlacement)return t;var e=t.placement.split("-")[0],n=o(e),i=t.placement.split("-")[1]||"",r=[];return(r="flip"===this._options.flipBehavior?[e,n]:this._options.flipBehavior).forEach(function(s,l){if(e===s&&r.length!==l+1){e=t.placement.split("-")[0],n=o(e);var u=a(t.offsets.popper),c=-1!==["right","bottom"].indexOf(e);(c&&Math.floor(t.offsets.reference[e])>Math.floor(u[n])||!c&&Math.floor(t.offsets.reference[e])<Math.floor(u[n]))&&(t.flipped=!0,t.placement=r[l+1],i&&(t.placement+="-"+i),t.offsets.popper=this._getOffsets(this._popper,this._reference,t.placement).popper,t=this.runModifiers(t,this._options.modifiers,this._flip))}}.bind(this)),t},n.prototype.modifiers.offset=function(t){var e=this._options.offset,n=t.offsets.popper;return-1!==t.placement.indexOf("left")?n.top-=e:-1!==t.placement.indexOf("right")?n.top+=e:-1!==t.placement.indexOf("top")?n.left-=e:-1!==t.placement.indexOf("bottom")&&(n.left+=e),t},n.prototype.modifiers.arrow=function(t){var e=this._options.arrowElement;if("string"==typeof e&&(e=this._popper.querySelector(e)),!e)return t;if(!this._popper.contains(e))return console.warn("WARNING: `arrowElement` must be child of its popper element!"),t;if(!this.isModifierRequired(this.modifiers.arrow,this.modifiers.keepTogether))return console.warn("WARNING: keepTogether modifier is required by arrow modifier in order to work, be sure to include it before arrow!"),t;var n={},o=t.placement.split("-")[0],r=a(t.offsets.popper),s=t.offsets.reference,l=-1!==["left","right"].indexOf(o),u=l?"height":"width",c=l?"top":"left",h=l?"left":"top",p=l?"bottom":"right",f=i(e)[u];s[p]-f<r[c]&&(t.offsets.popper[c]-=r[c]-(s[p]-f)),s[c]+f>r[p]&&(t.offsets.popper[c]+=s[c]+f-r[p]);var d=s[c]+s[u]/2-f/2-r[c];return d=Math.max(Math.min(r[u]-f-3,d),3),n[c]=d,n[h]="",t.offsets.arrow=n,t.arrowElement=e,t},u.a||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert first argument to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(void 0!==i&&null!==i){i=Object(i);for(var o=s()(i),a=0,l=o.length;a<l;a++){var u=o[a],c=r()(i,u);void 0!==c&&c.enumerable&&(e[u]=i[u])}}}return e}}),n},"function"==typeof define&&n("nErl")?define(i):"object"===h()(t)&&t.exports?t.exports=i():e.Popper=i()}.call(e,n("f1Eh")(t))},SrUm:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={};n.d(i,"TEXTAREA",function(){return Ut}),n.d(i,"ARC",function(){return jt}),n.d(i,"CURVE",function(){return Vt}),n.d(i,"GATHERING_PLACE",function(){return Zt}),n.d(i,"POLYLINE",function(){return Yt}),n.d(i,"FREEHANDLINE",function(){return qt}),n.d(i,"POINT",function(){return Jt}),n.d(i,"PENNANT",function(){return Xt}),n.d(i,"RECTANGLE",function(){return $t}),n.d(i,"CIRCLE",function(){return Qt}),n.d(i,"ELLIPSE",function(){return Kt}),n.d(i,"LUNE",function(){return te}),n.d(i,"SECTOR",function(){return ee}),n.d(i,"CLOSED_CURVE",function(){return ne}),n.d(i,"POLYGON",function(){return ie}),n.d(i,"FREE_POLYGON",function(){return oe}),n.d(i,"ATTACK_ARROW",function(){return re}),n.d(i,"DOUBLE_ARROW",function(){return ae}),n.d(i,"STRAIGHT_ARROW",function(){return se}),n.d(i,"FINE_ARROW",function(){return le}),n.d(i,"ASSAULT_DIRECTION",function(){return ue}),n.d(i,"TAILED_SQUAD_COMBAT",function(){return pe}),n.d(i,"TAILED_ATTACK_ARROW",function(){return ce}),n.d(i,"SQUAD_COMBAT",function(){return he}),n.d(i,"RECTFLAG",function(){return fe}),n.d(i,"TRIANGLEFLAG",function(){return de}),n.d(i,"CURVEFLAG",function(){return ge});var o={};n.d(o,"Point",function(){return ve}),n.d(o,"Pennant",function(){return me}),n.d(o,"Polyline",function(){return ye}),n.d(o,"Arc",function(){return Pe}),n.d(o,"Circle",function(){return ke}),n.d(o,"Curve",function(){return we}),n.d(o,"FreeHandLine",function(){return be}),n.d(o,"RectAngle",function(){return Ce}),n.d(o,"Ellipse",function(){return xe}),n.d(o,"Lune",function(){return Ae}),n.d(o,"Sector",function(){return _e}),n.d(o,"ClosedCurve",function(){return Me}),n.d(o,"Polygon",function(){return Te}),n.d(o,"FreePolygon",function(){return Ee}),n.d(o,"AttackArrow",function(){return Fe}),n.d(o,"DoubleArrow",function(){return Se}),n.d(o,"StraightArrow",function(){return Ie}),n.d(o,"FineArrow",function(){return Oe}),n.d(o,"AssaultDirection",function(){return Le}),n.d(o,"TailedAttackArrow",function(){return De}),n.d(o,"SquadCombat",function(){return Ne}),n.d(o,"TailedSquadCombat",function(){return He}),n.d(o,"GatheringPlace",function(){return We}),n.d(o,"RectFlag",function(){return Be}),n.d(o,"TriangleFlag",function(){return Re}),n.d(o,"CurveFlag",function(){return ze}),n.d(o,"PlotTextBox",function(){return Gt});var r=n("7+uW"),a=n("GRLA"),s=n.n(a),l=n("Zx67"),u=n.n(l),c=n("Zrlr"),h=n.n(c),p=n("zwoO"),f=n.n(p),d=n("Pf15"),g=n.n(d),v=s.a.source.XYZ,m=s.a.Attribution,y=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h()(this,e);var n="";n=void 0!==t.attributions?t.attributions:[e.ATTRIBUTION];var i=void 0!==t.crossOrigin?t.crossOrigin:"anonymous",o=void 0!==t.url?t.url:"http://www.google.cn/maps/vt?lyrs=m@189&gl=cn&x={x}&y={y}&z={z}";return f()(this,(e.__proto__||u()(e)).call(this,{attributions:n,cacheSize:t.cacheSize,crossOrigin:i,opaque:void 0===t.opaque||t.opaque,maxZoom:void 0!==t.maxZoom?t.maxZoom:19,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,url:o,wrapX:t.wrapX}))}return g()(e,t),e}(v);y.ATTRIBUTION=new m({html:'&copy; <a href="http://www.google.cn/maps">谷歌地图</a> contributors.'});var P=y,k=n("wxAW"),w=n.n(k),b=s.a.Attribution,C=s.a.source.TileImage,x=s.a.tilegrid.TileGrid,A=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h()(this,e);var n="";n=void 0!==t.attributions?t.attributions:[e.ATTRIBUTION],t.projection=t.projection?t.projection:"EPSG:3857";var i=void 0!==t.crossOrigin?t.crossOrigin:"anonymous",o=void 0!==t.url?t.url:"http://online{0-3}.map.bdimg.com/onlinelabel/?qt=tile&x={x}&y={y}&z={z}&styles=pl&udt=20170607&scaler=1&p=1",r=t.tileUrlFunction?t.tileUrlFunction:void 0;r||(r=function(t){var n=t[0],i=t[1],r=t[2];return i<0&&(i="M"+-i),r<0&&(r="M"+-r),o.replace("{0-3}",e.getRandom(0,3)).replace("{x}",i.toString()).replace("{y}",r.toString()).replace("{z}",n.toString())});for(var a=t.levels?t.levels:19,s=[],l=0;l<a;l++)s[l]=Math.pow(2,a-1-l);var c=new x({tileSize:t.tileSize?t.tileSize:256,origin:t.origin?t.origin:[0,0],extent:t.extent?t.extent:void 0,resolutions:s,minZoom:t.minZoom&&"number"==typeof t.minZoom?t.minZoom:0});return f()(this,(e.__proto__||u()(e)).call(this,{tileGrid:c,attributions:n,cacheSize:t.cacheSize,projection:t.projection,crossOrigin:i,opaque:void 0===t.opaque||t.opaque,maxZoom:void 0!==t.maxZoom?t.maxZoom:19,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileUrlFunction:r,url:o,wrapX:t.wrapX}))}return g()(e,t),w()(e,null,[{key:"getRandom",value:function(t,e){var n=Math.random()*(e-t),i=Math.round(n+t);return i=Math.max(Math.min(i,e),t)}}]),e}(C);A.ATTRIBUTION=new b({html:'&copy; <a href="http://map.baidu.com/">百度地图</a> contributors.'});var _=A,M=s.a.layer.Group,T=(s.a.layer.Vector,s.a.source.Vector,function(t,e,n){try{var i=[];if(t)i=function t(e,n,i){var o=[];return e.length>0&&e.forEach(function(e){if(e instanceof M){var r=e.getLayers().getArray(),a=t(r,n,i);a&&(o=o.concat(a))}else e.get(n)===i&&o.push(e)}),o}(t.getLayers().getArray(),e,n);return i}catch(t){console.log(t)}}),E={data:function(){return{layers:[{layerName:"OSM",name:"OSM",icon:"./static/images/maptype_pano.png"},{layerName:"Google",name:"谷歌",icon:"./static/images/maptype_yunran.png"},{layerName:"Baidu",name:"百度",icon:"./static/images/maptype_vector.png"}],baseLayers:"",selectLayerName:"Baidu",isOver:!1}},computed:{},mounted:function(){var t=this;this.$el.addEventListener("mouseenter",function(e){t.isOver=!0},!1),this.$el.addEventListener("mouseleave",function(e){t.isOver=!1},!1)},methods:{fixStyle:function(t,e){return{background:"url("+t.icon+") 0px 0px no-repeat",zIndex:e+1}},switchLayer:function(t){if(t.layerName){this.selectLayerName=t.layerName;var e=this.getBaseLayers();e&&e.forEach(function(e){e.get("layerName")===t.layerName?e.setVisible(!0):e.setVisible(!1)})}},getBaseLayers:function(){return this.baseLayers||(this.baseLayers=T(this.$Map,"isBaseLayer",!0)),this.baseLayers}}},F={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"layer-switcher"},[n("ul",{staticClass:"layer-switcher-ul"},t._l(t.layers,function(e,i){return n("li",{key:e.layerName,staticClass:"layer-switcher-li",class:t.selectLayerName===e.layerName?"selected-item":"",style:t.fixStyle(e,i),on:{click:function(n){t.switchLayer(e)}}},[n("span",{staticClass:"layer-name"},[t._v(t._s(e.layerName))])])}))])},staticRenderFns:[]};var S=n("VU/8")(E,F,!1,function(t){n("A4pt")},"data-v-22eb29fb",null).exports,I=n("9Pv4"),O=n.n(I),L={data:function(){return{contextMenu:{itemWidth:130,itemHeight:30,items:[{name:"测面",alias:"measureArea",iconType:"iconfont",icon:"icon-cemian",iconColor:"#1AD3EF",showLine:!0},{name:"清空地图",alias:"clearMap",iconType:"iconfont",icon:"icon-shanchu",iconColor:"#F05849"},{name:"搜周边",alias:"circleSearch",iconType:"iconfont",icon:"icon-map",iconColor:"#2994EF"}]},plots:O.a,map:null}},mounted:function(){this.initMap()},methods:{initMap:function(){r.a.prototype.$Map=new s.a.Map({target:"main-map",layers:[new s.a.layer.Tile({isBaseLayer:!0,layerName:"OSM",visible:!1,source:new s.a.source.OSM}),new s.a.layer.Tile({isBaseLayer:!0,layerName:"Google",visible:!1,source:new P}),new s.a.layer.Tile({isBaseLayer:!0,layerName:"Baidu",visible:!0,source:new _({projection:"EPSG:3857",origin:[43.88955327932,12.590178885765],url:"http://online{0-3}.map.bdimg.com/onlinelabel/?qt=tile&x={x}&y={y}&z={z}&styles=pl&udt=20170607&scaler=1&p=1"})})],controls:[],view:new s.a.View({center:s.a.proj.fromLonLat([113.534501,34.441045]),zoom:4})}),r.a.prototype.$View=this.$Map.getView(),this.map=this.$Map,this.addContextMenu()},addContextMenu:function(){}},components:{layerSwitcher:S}},D={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"map-box",attrs:{id:"main-map"}},[n("layer-switcher"),t._v(" "),n("ol-plot-vue",{attrs:{map:t.map,plots:t.plots}})],1)},staticRenderFns:[]};var N=n("VU/8")(L,D,!1,function(t){n("Fy3E")},null,null).exports,H=n("7YgM"),W=n.n(H),B=n("mvHQ"),R=n.n(B),z=(n("kM+t"),n("fZjL")),G=n.n(z),U=n("vO5q"),j=n("pFYg"),V=n.n(j),Z=100,Y=Math.PI/2,q=(Math.PI,"ol-plot-vector-layer"),J="plot-helper-control-point-div",X="plot-helper-hidden-div",$={borderRadius:"2px",fontSize:"12px",outline:0,overflow:"hidden",boxSizing:"border-box",border:"1px solid #eeeeee",fontFamily:"Helvetica Neue,Helvetica,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Noto Sans CJK SC,WenQuanYi Micro Hei,Arial,sans-serif",color:"#010500",fontWeight:400,padding:"3px",fontStretch:"normal",lineHeight:"normal",textAlign:"left",marginLeft:"auto",marginRight:"auto",width:"auto",height:"auto",background:"rgb(255, 255, 255)",fontStyle:"",fontVariant:""},Q=function(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))},K=function(t){var e=0;return t&&Array.isArray(t)&&t.length>0&&t.forEach(function(n,i){i<t.length-1&&(e+=Q(n,t[i+1]))}),e},tt=function(t){return Math.pow(K(t),.99)},et=function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]},nt=function(t,e,n){var i=[(t[0]+e[0])/2,(t[1]+e[1])/2],o=[i[0]-t[1]+e[1],i[1]+t[0]-e[0]],r=[(t[0]+n[0])/2,(t[1]+n[1])/2],a=[r[0]-t[1]+n[1],r[1]+t[0]-n[0]];return it(i,o,r,a)},it=function(t,e,n,i){if(t[1]===e[1])return[(i[0]-n[0])/(i[1]-n[1])*(t[1]-n[1])+n[0],t[1]];if(n[1]===i[1])return[(e[0]-t[0])/(e[1]-t[1])*(n[1]-t[1])+t[0],n[1]];var o=(e[0]-t[0])/(e[1]-t[1]),r=(i[0]-n[0])/(i[1]-n[1]),a=(o*t[1]-t[0]-r*n[1]+n[0])/(o-r);return[o*a-o*t[1]+t[0],a]},ot=function(t,e){var n=void 0,i=Math.asin(Math.abs(e[1]-t[1])/Q(t,e));return e[1]>=t[1]&&e[0]>=t[0]?n=i+Math.PI:e[1]>=t[1]&&e[0]<t[0]?n=2*Math.PI-i:e[1]<t[1]&&e[0]<t[0]?n=i:e[1]<t[1]&&e[0]>=t[0]&&(n=Math.PI-i),n},rt=function(t,e,n){var i=ot(e,t)-ot(e,n);return i<0?i+2*Math.PI:i},at=function(t,e,n){return(n[1]-t[1])*(e[0]-t[0])>(e[1]-t[1])*(n[0]-t[0])},st=function(t,e,n,i,o){var r=1-(t=Math.max(Math.min(t,1),0)),a=t*t,s=a*t,l=r*r,u=l*r;return[u*e[0]+3*l*t*n[0]+3*r*a*i[0]+s*o[0],u*e[1]+3*l*t*n[1]+3*r*a*i[1]+s*o[1]]},lt=function(t,e,n,i,o){var r=ot(t,e),a=o?r+n:r-n,s=i*Math.cos(a),l=i*Math.sin(a);return[e[0]+s,e[1]+l]},ut=function(t,e,n,i){var o=null,r=null,a=[],s=i-n;s=s<0?s+2*Math.PI:s;for(var l=0;l<=100;l++){var u=n+s*l/100;o=t[0]+e*Math.cos(u),r=t[1]+e*Math.sin(u),a.push([o,r])}return a},ct=function(t,e,n,i){var o=ht(e,n,i),r=null,a=null,s=null,l=Math.sqrt(o[0]*o[0]+o[1]*o[1]),u=o[0]/l,c=o[1]/l,h=Q(e,n),p=Q(n,i);return l>1e-4?at(e,n,i)?(s=t*h,r=[n[0]-s*c,n[1]+s*u],s=t*p,a=[n[0]+s*c,n[1]-s*u]):(s=t*h,r=[n[0]+s*c,n[1]-s*u],s=t*p,a=[n[0]-s*c,n[1]+s*u]):(r=[n[0]+t*(e[0]-n[0]),n[1]+t*(e[1]-n[1])],a=[n[0]+t*(i[0]-n[0]),n[1]+t*(i[1]-n[1])]),[r,a]},ht=function(t,e,n){var i=t[0]-e[0],o=t[1]-e[1],r=Math.sqrt(i*i+o*o);i/=r,o/=r;var a=n[0]-e[0],s=n[1]-e[1],l=Math.sqrt(a*a+s*s);return[i+(a/=l),o+(s/=l)]},pt=function(t,e){for(var n=null,i=null,o=[function(t,e){var n=[t[0],t[1],t[2],null,null],i=n[0],o=n[1],r=n[2],a=n[3],s=n[4],l=ct(0,i,o,r)[0],u=ht(i,o,r);if(Math.sqrt(u[0]*u[0]+u[1]*u[1])>1e-4){var c=et(i,o),h=i[0]-c[0],p=i[1]-c[1],f=2/Q(i,o),d=-f*p,g=f*h,v=d*d-g*g,m=2*d*g,y=g*g-d*d,P=l[0]-c[0],k=l[1]-c[1];a=c[0]+v*P+m*k,s=c[1]+m*P+y*k}else a=i[0]+e*(o[0]-i[0]),s=i[1]+e*(o[1]-i[1]);return[a,s]}(e,t)],r=[],a=0;a<e.length-2;a++){var s=[e[a],e[a+1],e[a+2]],l=ct(t,n=s[0],i=s[1],s[2]);o=o.concat(l)}var u=function(t,e){var n=t.length,i=t[n-3],o=t[n-2],r=t[n-1],a=ct(0,i,o,r)[1],s=ht(i,o,r),l=null,u=null;if(Math.sqrt(s[0]*s[0]+s[1]*s[1])>1e-4){var c=et(o,r),h=r[0]-c[0],p=r[1]-c[1],f=2/Q(o,r),d=-f*p,g=f*h,v=d*d-g*g,m=2*d*g,y=g*g-d*d,P=a[0]-c[0],k=a[1]-c[1];l=c[0]+v*P+m*k,u=c[1]+m*P+y*k}else l=r[0]+e*(o[0]-r[0]),u=r[1]+e*(o[1]-r[1]);return[l,u]}(e,t);u&&o.push(u);for(var c=0;c<e.length-1;c++){n=e[c],i=e[c+1],r.push(n);for(var h=0;h<Z;h++){var p=st(h/Z,n,o[2*c],o[2*c+1],i);r.push(p)}r.push(i)}return r},ft=function(t){if(t.length<=2)return t;for(var e=[],n=t.length-1,i=0;i<=1;i+=.01){for(var o=0,r=0,a=0;a<=n;a++){var s=gt(n,a),l=Math.pow(i,a),u=Math.pow(1-i,n-a);o+=s*l*u*t[a][0],r+=s*l*u*t[a][1]}e.push([o,r])}return e.push(t[n]),e},dt=function(t){var e=1;switch(t){case t<=1:e=1;break;case 2===t:e=2;break;case 3===t:e=6;break;case 24===t:e=24;break;case 5===t:e=120;break;default:for(var n=1;n<=t;n++)e*=n}return e},gt=function(t,e){return dt(t)/(dt(e)*dt(t-e))},vt=function(t){if(t.length<=2)return t;var e=[],n=t.length-2-1;e.push(t[0]);for(var i=0;i<=n;i++)for(var o=0;o<=1;o+=.05){for(var r=0,a=0,s=0;s<=2;s++){var l=mt(s,o);r+=l*t[i+s][0],a+=l*t[i+s][1]}e.push([r,a])}return e.push(t[t.length-1]),e},mt=function(t,e){var n=0;return 0===t?n=Math.pow(e-1,2)/2:1===t?n=(-2*Math.pow(e,2)+2*e+1)/2:2===t&&(n=Math.pow(e,2)/2),n},yt=function(){for(var t=[],e="0123456789abcdef",n=0;n<36;n++)t[n]=e.substr(Math.floor(16*Math.random()),1);return t[14]="4",t[19]=e.substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-",t.join("")},Pt=function(t){var e=void 0===t?"undefined":V()(t);return null!==t&&("object"===e||"function"===e)};var kt=s.a.layer.Group,wt=s.a.layer.Vector,bt=s.a.source.Vector,Ct=s.a.style.Style,xt=s.a.style.Stroke,At=s.a.style.Circle,_t=s.a.style.Fill,Mt=function(t,e){try{var n=null;if(t){var i=t.getLayers().getArray();n=Tt(i,"layerName",e)}return n}catch(t){console.log(t)}},Tt=function t(e,n,i){var o=null;return e.length>0&&e.every(function(e){if(e instanceof kt){var r=e.getLayers().getArray();return!(o=t(r,n,i))}return e.get(n)!==i||(o=e,!1)}),o},Et=function(t,e,n){try{if(t){var i=Mt(t,e);if(i instanceof wt||(i=null),i||n&&n.create&&(i=new wt({layerName:e,params:n,layerType:"vector",source:new bt({wrapX:!1}),style:new Ct({fill:new _t({color:"rgba(67, 110, 238, 0.4)"}),stroke:new xt({color:"#4781d9",width:2}),image:new At({radius:7,fill:new _t({color:"#ffcc33"})})})})),t&&i){n&&n.hasOwnProperty("selectable")&&i.set("selectable",n.selectable);var o=Mt(t,e);o&&o instanceof wt||t.addLayer(i)}return i}}catch(t){console.log(t)}},Ft=n("JnrT"),St=n.n(Ft),It=/([\:\-\_]+(.))/g,Ot=/^moz([A-Z])/,Lt=function(t){return"string"==typeof t?document.getElementById(t):t},Dt=function(t){return t.replace(It,function(t,e,n,i){return i?n.toUpperCase():n}).replace(Ot,"Moz$1")},Nt=function(){if(document.addEventListener)return function(t,e,n){t&&e&&n&&t.addEventListener(e,n,!1)}}(),Ht=function(){if(document.removeEventListener)return function(t,e,n){t&&e&&t.removeEventListener(e,n,!1)}}();function Wt(t,e){if(!t||!e)return!1;if(-1!==e.indexOf(" "))throw new Error("className should not contain space.");return t.classList?t.classList.contains(e):(" "+t.className+" ").indexOf(" "+e+" ")>-1}function Bt(t,e){if(!t||!e)return null;"float"===(e=Dt(e))&&(e="cssFloat");try{var n=document.defaultView.getComputedStyle(t,"");return t.style[e]||n?n[e]:null}catch(n){return t.style[e]}}function Rt(t,e,n){if(t&&e)if("object"===(void 0===e?"undefined":V()(e)))for(var i in e)e.hasOwnProperty(i)&&Rt(t,i,e[i]);else"opacity"===(e=Dt(e))?t.style.filter=isNaN(n)?"":"alpha(opacity="+100*n+")":t.style[e]=n}var zt=s.a.interaction.DragPan,Gt=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h()(this,e);var n=[t.id,t.element,t.offset,t.stopEvent,t.positioning,t.insertFirst,t.autoPan,t.autoPanAnimation,t.autoPanMargin,t.className?t.className:"ol-plot-text-editor"],i=n[0],o=n[1],r=n[2],a=n[3],s=n[4],l=n[5],c=n[6],p=n[7],d=n[8],g=n[9],v=f()(this,(e.__proto__||u()(e)).call(this,{id:i,element:o,stopEvent:a,insertFirst:l,autoPan:c,autoPanAnimation:p,autoPanMargin:d,className:g}));return v.setOffset(void 0!==r?r:[0,0]),v.setPositioning(void 0!==s?s:"center-center"),v.mapDragPan=void 0,v.isClick_=!1,v.dragging_=!1,v.isFocus_=!1,v.options_=t,v._position=t.position&&t.position.length>0?t.position:[],v.handleTimer_=null,v.currentPixel_=[],v.createTextContent(t),v}return g()(e,t),w()(e,[{key:"createTextContent",value:function(t){var e=t.className||"ol-plot-text-editor",n=document.createElement("textarea");n.className=e,n.style.width=t.width+"px",n.style.height=t.height+"px",n.style.minHeight=t.minHeight+"px",n.setAttribute("id",t.id),n.setAttribute("autofocus",!0),St()(n),Nt(n,"focus",this.handleFocus_.bind(this)),Nt(n,"blur",this.handleBlur_.bind(this)),Nt(n,"click",this.handleClick_.bind(this)),Nt(n,"mousedown",this.handleDragStart_.bind(this)),Nt(window,"mouseup",this.handleDragEnd_.bind(this)),this.set("isPlotText",!0),this.setElement(n),this.createCloseButton(t),this.createResizeButton(t),this.setPosition(this._position),this.dispatchEvent("textBoxDrawEnd",{overlay:this,element:n,uuid:t.id})}},{key:"getTextAreaFromContent_",value:function(){var t="",e=Array.prototype.slice.call(this.element&&this.element.children,0);return e.length>0&&e.every(function(e){return 1!==e.nodeType||"textarea"!==e.nodeName.toLowerCase()||(t=e,!1)}),t}},{key:"createCloseButton",value:function(t){var e=document.createElement("span");e.className="ol-plot-text-editor-close",e.setAttribute("data-id",t.id),Ht(e,"click",this.closeCurrentPlotText.bind(this)),Nt(e,"click",this.closeCurrentPlotText.bind(this)),this.element.appendChild(e)}},{key:"createResizeButton",value:function(t){var e=document.createElement("span");e.className="ol-plot-text-editor-resize",e.setAttribute("data-id",t.id),Ht(e,"mousedown",this.handleResizeMouseDown_.bind(this)),Ht(e,"mousemove",this.handleResizeMouseMove_.bind(this)),Nt(e,"mousedown",this.handleResizeMouseDown_.bind(this)),Nt(e,"mousemove",this.handleResizeMouseMove_.bind(this)),this.element.appendChild(e)}},{key:"resizeButtonMoveHandler_",value:function(t){var e=t.pixel,n=this.getTextAreaFromContent_();if(!(e.length<1||this.currentPixel_.length<1)&&n){var i=[e[0]-this.currentPixel_[0],e[1]-this.currentPixel_[1]],o=[n.offsetWidth,n.offsetHeight],r=o[1]+2*i[1];Rt(n,"width",o[0]+2*i[0]+"px"),Rt(n,"height",r+"px"),this.currentPixel_=e,this.getMap().render()}}},{key:"handleResizeMouseMove_",value:function(t){t.stopImmediatePropagation()}},{key:"handleResizeMouseDown_",value:function(t){this.getMap()&&(this.currentPixel_=[t.x,t.y],this.getMap().on("pointermove",this.resizeButtonMoveHandler_,this),Nt(this.getMap().getViewport(),"mouseup",this.handleResizeMouseUp_.bind(this)))}},{key:"handleResizeMouseUp_",value:function(t){this.getMap()&&(this.getMap().un("pointermove",this.resizeButtonMoveHandler_,this),Ht(this.getMap().getViewport(),"mouseup",this.handleResizeMouseUp_.bind(this)),this.currentPixel_=[])}},{key:"closeCurrentPlotText",value:function(t){if(this.getMap()&&t&&Wt(t.target,"ol-plot-text-editor-close")){var e=t.target.getAttribute("data-id");if(e){var n=this.getMap().getOverlayById(e);n&&this.getMap().removeOverlay(n)}}}},{key:"handleFocus_",value:function(){this.isFocus_=!0,this.getMap()&&(this.getMap().set("activeTextArea",this),this.getMap().dispatchEvent("activeTextArea"))}},{key:"handleBlur_",value:function(){this.isFocus_=!1,this.getMap()&&(this.getMap().set("activeTextArea",null),this.getMap().set("disActiveTextArea",this),this.getMap().dispatchEvent("disActiveTextArea"))}},{key:"handleDragStart_",value:function(t){var e=this;this.getMap()&&!this.dragging_&&this.isMoveModel()&&this.isFocus_&&(this.handleTimer_=window.setTimeout(function(){window.clearTimeout(e.handleTimer_),e.handleTimer_=null,e.isClick_||(e.dragging_=!0,e.disableMapDragPan(),e.preCursor_=e.element.style.cursor,Nt(e.getMap().getViewport(),"mousemove",e.handleDragDrag_.bind(e)),Nt(e.element,"mouseup",e.handleDragEnd_.bind(e)))},300))}},{key:"handleDragDrag_",value:function(t){this.dragging_&&(this.element.style.cursor="move",this._position=this.getMap().getCoordinateFromPixel([t.clientX,t.clientY]),this.setPosition(this._position))}},{key:"handleDragEnd_",value:function(t){this.isClick_=!1,window.clearTimeout(this.handleTimer_),this.handleTimer_=null,this.dragging_&&this.isFocus_&&(this.dragging_=!1,this.enableMapDragPan(),this.element.style.cursor=this.preCursor_,Ht(this.getMap().getViewport(),"mousemove",this.handleDragDrag_.bind(this)),Ht(this.element,"mouseup",this.handleDragEnd_.bind(this)))}},{key:"handleClick_",value:function(t){t.target===this.element?this.isClick_=!0:this.isClick_=!1}},{key:"isMoveModel",value:function(){return window.getSelection().getRangeAt(0).collapsed}},{key:"setStyle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.getTextAreaFromContent_();if(e)for(var n in t)t[n]&&Rt(e,n,t[n])}},{key:"getStyle",value:function(){var t={},e=this.getTextAreaFromContent_();if(e)for(var n in $)t[n]=Bt(e,n);return t}},{key:"setValue",value:function(t){var e=this.getTextAreaFromContent_();e&&(e.value=t,t&&St.a.update(e),this.getMap().render())}},{key:"getValue",value:function(){var t=this.getTextAreaFromContent_();return t?t.value:""}},{key:"getWidth",value:function(){var t=this.getTextAreaFromContent_();return t&&t.offsetWidth?t.offsetWidth:0}},{key:"getHeight",value:function(){var t=this.getTextAreaFromContent_();return t&&t.offsetHeight?t.offsetHeight:0}},{key:"enableMapDragPan",value:function(){var t=this.getMap();t&&this.mapDragPan&&this.mapDragPan instanceof zt&&(t.addInteraction(this.mapDragPan),delete this.mapDragPan)}},{key:"disableMapDragPan",value:function(){var t=this,e=this.getMap();e&&e.getInteractions().getArray().every(function(n){return!(n instanceof zt)||(t.mapDragPan=n,e.removeInteraction(n),!1)})}},{key:"setMap",value:function(t){s.a.Overlay.prototype.setMap.call(this,t),t&&t instanceof s.a.Map&&(this.setStyle(function t(e,n){for(var i in n)Pt(n[i])&&Pt(e[i])?t(e[i],n[i]):e[i]=n[i];return e}($,this.options_.style)),this.setValue(this.options_.value))}}]),e}(s.a.Overlay),Ut="TextArea",jt="Arc",Vt="Curve",Zt="GatheringPlace",Yt="Polyline",qt="FreeHandLine",Jt="Point",Xt="Pennant",$t="RectAngle",Qt="Circle",Kt="Ellipse",te="Lune",ee="Sector",ne="ClosedCurve",ie="Polygon",oe="FreePolygon",re="AttackArrow",ae="DoubleArrow",se="StraightArrow",le="FineArrow",ue="AssaultDirection",ce="TailedAttackArrow",he="SquadCombat",pe="TailedSquadCombat",fe="RectFlag",de="TriangleFlag",ge="CurveFlag",ve=function(t){function e(t,n,i){h()(this,e);var o=f()(this,(e.__proto__||u()(e)).call(this,[]));return o.type=Jt,o.options=i||{},o.set("params",o.options),o.fixPointCount=1,n&&n.length>0?o.setPoints(n):t&&t.length>0&&o.setCoordinates(t),o}return g()(e,t),w()(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){var t=this.points[0];this.setCoordinates(t)}},{key:"setMap",value:function(t){if(!(t&&t instanceof s.a.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(s.a.geom.Point),me=function(t){function e(t,n,i){h()(this,e);var o=f()(this,(e.__proto__||u()(e)).call(this,[]));return o.type=Xt,o.options=i||{},o.set("params",o.options),n&&n.length>0?o.setPoints(n):t&&t.length>0&&o.setCoordinates(t),o}return g()(e,t),w()(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){this.setCoordinates(this.points)}},{key:"setMap",value:function(t){if(!(t&&t instanceof s.a.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(s.a.geom.Point),ye=function(t){function e(t,n,i){h()(this,e);var o=f()(this,(e.__proto__||u()(e)).call(this,[]));return o.type=Yt,o.freehand=!1,o.set("params",i),n&&n.length>0?o.setPoints(n):t&&t.length>0&&o.setCoordinates(t),o}return g()(e,t),w()(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){this.setCoordinates(this.points)}},{key:"setMap",value:function(t){if(!(t&&t instanceof s.a.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(s.a.geom.LineString),Pe=function(t){function e(t,n,i){h()(this,e);var o=f()(this,(e.__proto__||u()(e)).call(this,[]));return o.type=jt,o.fixPointCount=3,o.set("params",i),n&&n.length>0?o.setPoints(n):t&&t.length>0&&o.setCoordinates(t),o}return g()(e,t),w()(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){var t=this.getPointCount();if(!(t<2))if(2===t)this.setCoordinates(this.points);else{var e=[this.points[0],this.points[1],this.points[2],null,null],n=e[0],i=e[1],o=e[2],r=e[3],a=e[4],s=nt(n,i,o),l=Q(n,s),u=ot(n,s),c=ot(i,s);at(n,i,o)?(r=c,a=u):(r=u,a=c),this.setCoordinates(ut(s,l,r,a))}}},{key:"setMap",value:function(t){if(!(t&&t instanceof s.a.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(s.a.geom.LineString),ke=function(t){function e(t,n,i){h()(this,e);var o=f()(this,(e.__proto__||u()(e)).call(this,[]));return o.type=Qt,o.fixPointCount=2,o.set("params",i),n&&n.length>0?o.setPoints(n):t&&t.length>0&&o.setCoordinates(t),o}return g()(e,t),w()(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){if(this.getPointCount()<2)return!1;var t=this.points[0],e=Q(t,this.points[1]);this.setCoordinates([this.generatePoints(t,e)])}},{key:"generatePoints",value:function(t,e){for(var n=null,i=null,o=null,r=[],a=0;a<=100;a++)o=2*Math.PI*a/100,n=t[0]+e*Math.cos(o),i=t[1]+e*Math.sin(o),r.push([n,i]);return r}},{key:"setMap",value:function(t){if(!(t&&t instanceof s.a.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(s.a.geom.Polygon),we=function(t){function e(t,n,i){h()(this,e);var o=f()(this,(e.__proto__||u()(e)).call(this,[]));return o.type=Vt,o.t=.3,o.set("params",i),n&&n.length>0?o.setPoints(n):t&&t.length>0&&o.setCoordinates(t),o}return g()(e,t),w()(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){var t=this.getPointCount();if(t<2)return!1;if(2===t)this.setCoordinates(this.points);else{var e=pt(this.t,this.points);this.setCoordinates(e)}}},{key:"setMap",value:function(t){if(!(t&&t instanceof s.a.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(s.a.geom.LineString),be=function(t){function e(t,n,i){h()(this,e);var o=f()(this,(e.__proto__||u()(e)).call(this,[]));return o.type=qt,o.freehand=!0,o.set("params",i),n&&n.length>0?o.setPoints(n):t&&t.length>0&&o.setCoordinates(t),o}return g()(e,t),w()(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){this.setCoordinates(this.points)}},{key:"setMap",value:function(t){if(!(t&&t instanceof s.a.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(s.a.geom.LineString),Ce=function(t){function e(t,n,i){h()(this,e);var o=f()(this,(e.__proto__||u()(e)).call(this,[]));return o.type=$t,o.fixPointCount=2,o.set("params",i),o.isFill=!1!==i.isFill||i.isFill,n&&n.length>0?o.setPoints(n):t&&t.length>0&&o.setCoordinates(t),o}return g()(e,t),w()(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){if(2===this.points.length){var t=[];if(this.isFill){var e=s.a.extent.boundingExtent(this.points);t=s.a.geom.Polygon.fromExtent(e).getCoordinates()}else{var n=this.points[0],i=this.points[1];t=[n,[n[0],i[1]],i,[i[0],n[1]],n]}this.setCoordinates(t)}}},{key:"setMap",value:function(t){if(!(t&&t instanceof s.a.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(s.a.geom.Polygon),xe=function(t){function e(t,n,i){h()(this,e);var o=f()(this,(e.__proto__||u()(e)).call(this,[]));return o.type=Kt,o.fixPointCount=2,o.set("params",i),n&&n.length>0?o.setPoints(n):t&&t.length>0&&o.setCoordinates(t),o}return g()(e,t),w()(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){if(this.getPointCount()<2)return!1;var t=[this.points[0],this.points[1]],e=t[0],n=t[1],i=et(e,n),o=Math.abs((e[0]-n[0])/2),r=Math.abs((e[1]-n[1])/2),a=this.generatePoints(i,o,r);this.setCoordinates([a])}},{key:"generatePoints",value:function(t,e,n){for(var i=null,o=null,r=null,a=[],s=0;s<=Z;s++)r=2*Math.PI*s/Z,i=t[0]+e*Math.cos(r),o=t[1]+n*Math.sin(r),a.push([i,o]);return a}},{key:"setMap",value:function(t){if(!(t&&t instanceof s.a.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(s.a.geom.Polygon),Ae=function(t){function e(t,n,i){h()(this,e);var o=f()(this,(e.__proto__||u()(e)).call(this,[]));return o.type=te,o.fixPointCount=3,o.set("params",i),n&&n.length>0?o.setPoints(n):t&&t.length>0&&o.setCoordinates(t),o}return g()(e,t),w()(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){if(this.getPointCount()<2)return!1;var t=this.getPoints();if(2===this.getPointCount()){var e=et(t[0],t[1]),n=Q(t[0],e),i=lt(t[0],e,Y,n);t.push(i)}var o=[t[0],t[1],t[2],void 0,void 0],r=o[0],a=o[1],s=o[2],l=o[3],u=o[4],c=nt(r,a,s),h=Q(r,c),p=ot(r,c),f=ot(a,c);at(r,a,s)?(l=f,u=p):(l=p,u=f),(t=ut(c,h,l,u)).push(t[0]),this.setCoordinates([t])}},{key:"setMap",value:function(t){if(!(t&&t instanceof s.a.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(s.a.geom.Polygon),_e=function(t){function e(t,n,i){h()(this,e);var o=f()(this,(e.__proto__||u()(e)).call(this,[]));return o.type=ee,o.fixPointCount=3,o.set("params",i),n&&n.length>0?o.setPoints(n):t&&t.length>0&&o.setCoordinates(t),o}return g()(e,t),w()(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){var t=this.getPointCount();if(t<2)return!1;if(2===t)this.setCoordinates([this.points]);else{var e=this.getPoints(),n=[e[0],e[1],e[2]],i=n[0],o=n[1],r=n[2],a=Q(o,i),s=ot(o,i),l=ot(r,i),u=ut(i,a,s,l);u.push(i,u[0]),this.setCoordinates([u])}}},{key:"setMap",value:function(t){if(!(t&&t instanceof s.a.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(s.a.geom.Polygon),Me=function(t){function e(t,n,i){h()(this,e);var o=f()(this,(e.__proto__||u()(e)).call(this,[]));return o.type=ne,o.t=.3,o.set("params",i),n&&n.length>0?o.setPoints(n):t&&t.length>0&&o.setCoordinates(t),o}return g()(e,t),w()(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){var t=this.getPointCount();if(t<2)return!1;if(2===t)this.setCoordinates([this.points]);else{var e=this.getPoints();e.push(e[0],e[1]);for(var n=[],i=[],o=0;o<e.length-2;o++){var r=ct(this.t,e[o],e[o+1],e[o+2]);n=n.concat(r)}var a=n.length;n=[n[a-1]].concat(n.slice(0,a-1));for(var s=0;s<e.length-2;s++){var l=e[s],u=e[s+1];i.push(l);for(var c=0;c<=Z;c++){var h=st(c/Z,l,n[2*s],n[2*s+1],u);i.push(h)}i.push(u)}this.setCoordinates([i])}}},{key:"setMap",value:function(t){if(!(t&&t instanceof s.a.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(s.a.geom.Polygon),Te=function(t){function e(t,n,i){h()(this,e);var o=f()(this,(e.__proto__||u()(e)).call(this,[]));return o.type=ie,o.set("params",i),n&&n.length>0?o.setPoints(n):t&&t.length>0&&o.setCoordinates(t),o}return g()(e,t),w()(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){if(this.getPointCount()<2)return!1;this.setCoordinates([this.points])}},{key:"setMap",value:function(t){if(!(t&&t instanceof s.a.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(s.a.geom.Polygon),Ee=function(t){function e(t,n,i){h()(this,e);var o=f()(this,(e.__proto__||u()(e)).call(this,[]));return o.type=oe,o.freehand=!0,o.set("params",i),n&&n.length>0?o.setPoints(n):t&&t.length>0&&o.setCoordinates(t),o}return g()(e,t),w()(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){this.setCoordinates([this.points])}},{key:"setMap",value:function(t){if(!(t&&t instanceof s.a.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(s.a.geom.Polygon),Fe=function(t){function e(t,n,i){h()(this,e);var o=f()(this,(e.__proto__||u()(e)).call(this,[]));return o.type=re,o.headHeightFactor=.18,o.headWidthFactor=.3,o.neckHeightFactor=.85,o.neckWidthFactor=.15,o.headTailFactor=.8,o.set("params",i),n&&n.length>0?o.setPoints(n):t&&t.length>0&&o.setCoordinates(t),o}return g()(e,t),w()(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){try{var t=this.getPointCount();if(t<2)return!1;if(2===t)this.setCoordinates([this.points]);else{var e=this.getPoints(),n=[e[0],e[1]],i=n[0],o=n[1];at(e[0],e[1],e[2])&&(i=e[1],o=e[0]);var r=[et(i,o)].concat(e.slice(2)),a=this.getArrowHeadPoints(r,i,o),s=[a[0],a[4]],l=s[0],u=s[1],c=Q(i,o)/tt(r),h=this.getArrowBodyPoints(r,l,u,c),p=h.length,f=[i].concat(h.slice(0,p/2));f.push(l);var d=[o].concat(h.slice(p/2,p));d.push(u),f=vt(f),d=vt(d),this.setCoordinates([f.concat(a,d.reverse())])}}catch(t){console.log(t)}}},{key:"getArrowPoints",value:function(t,e,n,i){var o=et(t,e),r=Q(o,n),a=lt(n,o,0,.3*r,!0),s=lt(n,o,0,.5*r,!0),l=[o,a=lt(o,a,Y,r/5,i),s=lt(o,s,Y,r/4,i),n],u=this.getArrowHeadPoints(l);if(!(u&&Array.isArray(u)&&u.length>0))throw new Error("插值出错");var c=[u[0],u[4]],h=c[0],p=c[1],f=Q(t,e)/tt(l)/2,d=this.getArrowBodyPoints(l,h,p,f);if(d){var g=d.length,v=d.slice(0,g/2),m=d.slice(g/2,g);return v.push(h),m.push(p),(v=v.reverse()).push(e),(m=m.reverse()).push(t),v.reverse().concat(u,m)}}},{key:"getArrowHeadPoints",value:function(t,e,n){try{var i=tt(t),o=i*this.headHeightFactor,r=t[t.length-1];i=Q(r,t[t.length-2]);var a=Q(e,n);o>a*this.headTailFactor&&(o=a*this.headTailFactor);var s=o*this.headWidthFactor,l=o*this.neckWidthFactor,u=(o=o>i?i:o)*this.neckHeightFactor,c=lt(t[t.length-2],r,0,o,!0),h=lt(t[t.length-2],r,0,u,!0),p=lt(r,c,Y,s,!1),f=lt(r,c,Y,s,!0);return[lt(r,h,Y,l,!1),p,r,f,lt(r,h,Y,l,!0)]}catch(t){console.log(t)}}},{key:"getArrowBodyPoints",value:function(t,e,n,i){for(var o=K(t),r=tt(t)*i,a=(r-Q(e,n))/2,s=0,l=[],u=[],c=1;c<t.length-1;c++){var h=rt(t[c-1],t[c],t[c+1])/2,p=(r/2-(s+=Q(t[c-1],t[c]))/o*a)/Math.sin(h),f=lt(t[c-1],t[c],Math.PI-h,p,!0),d=lt(t[c-1],t[c],h,p,!1);l.push(f),u.push(d)}return l.concat(u)}},{key:"getTempPoint4",value:function(t,e,n){try{var i=et(t,e),o=Q(i,n),r=rt(t,i,n),a=void 0,s=void 0,l=void 0,u=void 0;return r<Y?(s=o*Math.sin(r),l=o*Math.cos(r),u=lt(t,i,Y,s,!1),a=lt(i,u,Y,l,!0)):r>=Y&&r<Math.PI?(s=o*Math.sin(Math.PI-r),l=o*Math.cos(Math.PI-r),u=lt(t,i,Y,s,!1),a=lt(i,u,Y,l,!1)):r>=Math.PI&&r<1.5*Math.PI?(s=o*Math.sin(r-Math.PI),l=o*Math.cos(r-Math.PI),u=lt(t,i,Y,s,!0),a=lt(i,u,Y,l,!0)):(s=o*Math.sin(2*Math.PI-r),l=o*Math.cos(2*Math.PI-r),u=lt(t,i,Y,s,!0),a=lt(i,u,Y,l,!1)),a}catch(t){console.log(t)}}},{key:"setMap",value:function(t){if(!(t&&t instanceof s.a.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(s.a.geom.Polygon),Se=function(t){function e(t,n,i){h()(this,e);var o=f()(this,(e.__proto__||u()(e)).call(this,[]));return o.type=ae,o.headHeightFactor=.25,o.headWidthFactor=.3,o.neckHeightFactor=.85,o.neckWidthFactor=.15,o.connPoint=null,o.tempPoint4=null,o.fixPointCount=4,o.set("params",i),n&&n.length>0?o.setPoints(n):t&&t.length>0&&o.setCoordinates(t),o}return g()(e,t),w()(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){try{var t=this.getPointCount();if(t<2)return!1;if(2===t)return this.setCoordinates([this.points]),!1;if(t>2){var e=[this.points[0],this.points[1],this.points[2]],n=e[0],i=e[1],o=e[2];3===t?(this.tempPoint4=this.getTempPoint4(n,i,o),this.connPoint=et(n,i)):4===t?(this.tempPoint4=this.points[3],this.connPoint=et(n,i)):(this.tempPoint4=this.points[3],this.connPoint=this.points[4]);var r=void 0,a=void 0;at(n,i,o)?(r=this.getArrowPoints(n,this.connPoint,this.tempPoint4,!1),a=this.getArrowPoints(this.connPoint,i,o,!0)):(r=this.getArrowPoints(i,this.connPoint,o,!1),a=this.getArrowPoints(this.connPoint,n,this.tempPoint4,!0));var s=r.length,l=(s-5)/2,u=r.slice(0,l),c=r.slice(l,l+5),h=r.slice(l+5,s),p=a.slice(0,l),f=a.slice(l,l+5),d=a.slice(l+5,s);p=ft(p);var g=ft(d.concat(u.slice(1)));h=ft(h);var v=p.concat(f,g,c,h);this.setCoordinates([v])}}catch(t){console.log(t)}}},{key:"getArrowPoints",value:function(t,e,n,i){var o=et(t,e),r=Q(o,n),a=lt(n,o,0,.3*r,!0),s=lt(n,o,0,.5*r,!0),l=[o,a=lt(o,a,Y,r/5,i),s=lt(o,s,Y,r/4,i),n],u=this.getArrowHeadPoints(l);if(!(u&&Array.isArray(u)&&u.length>0))throw new Error("插值出错");var c=[u[0],u[4]],h=c[0],p=c[1],f=Q(t,e)/tt(l)/2,d=this.getArrowBodyPoints(l,h,p,f);if(d){var g=d.length,v=d.slice(0,g/2),m=d.slice(g/2,g);return v.push(h),m.push(p),(v=v.reverse()).push(e),(m=m.reverse()).push(t),v.reverse().concat(u,m)}}},{key:"getArrowHeadPoints",value:function(t){try{var e=tt(t)*this.headHeightFactor,n=t[t.length-1],i=e*this.headWidthFactor,o=e*this.neckWidthFactor,r=e*this.neckHeightFactor,a=lt(t[t.length-2],n,0,e,!0),s=lt(t[t.length-2],n,0,r,!0),l=lt(n,a,Y,i,!1),u=lt(n,a,Y,i,!0);return[lt(n,s,Y,o,!1),l,n,u,lt(n,s,Y,o,!0)]}catch(t){console.log(t)}}},{key:"getArrowBodyPoints",value:function(t,e,n,i){for(var o=K(t),r=tt(t)*i,a=(r-Q(e,n))/2,s=0,l=[],u=[],c=1;c<t.length-1;c++){var h=rt(t[c-1],t[c],t[c+1])/2,p=(r/2-(s+=Q(t[c-1],t[c]))/o*a)/Math.sin(h),f=lt(t[c-1],t[c],Math.PI-h,p,!0),d=lt(t[c-1],t[c],h,p,!1);l.push(f),u.push(d)}return l.concat(u)}},{key:"getTempPoint4",value:function(t,e,n){try{var i=et(t,e),o=Q(i,n),r=rt(t,i,n),a=void 0,s=void 0,l=void 0,u=void 0;return r<Y?(s=o*Math.sin(r),l=o*Math.cos(r),u=lt(t,i,Y,s,!1),a=lt(i,u,Y,l,!0)):r>=Y&&r<Math.PI?(s=o*Math.sin(Math.PI-r),l=o*Math.cos(Math.PI-r),u=lt(t,i,Y,s,!1),a=lt(i,u,Y,l,!1)):r>=Math.PI&&r<1.5*Math.PI?(s=o*Math.sin(r-Math.PI),l=o*Math.cos(r-Math.PI),u=lt(t,i,Y,s,!0),a=lt(i,u,Y,l,!0)):(s=o*Math.sin(2*Math.PI-r),l=o*Math.cos(2*Math.PI-r),u=lt(t,i,Y,s,!0),a=lt(i,u,Y,l,!1)),a}catch(t){console.log(t)}}},{key:"setMap",value:function(t){if(!(t&&t instanceof s.a.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){3===this.getPointCount()&&null!==this.tempPoint4&&this.points.push(this.tempPoint4),null!==this.connPoint&&this.points.push(this.connPoint)}}]),e}(s.a.geom.Polygon),Ie=function(t){function e(t,n,i){h()(this,e);var o=f()(this,(e.__proto__||u()(e)).call(this,[]));return o.type=se,o.fixPointCount=2,o.maxArrowLength=3e6,o.arrowLengthScale=5,o.set("params",i),n&&n.length>0?o.setPoints(n):t&&t.length>0&&o.setCoordinates(t),o}return g()(e,t),w()(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){try{if(this.getPointCount()<2)return!1;var t=this.getPoints(),e=[t[0],t[1]],n=e[0],i=e[1],o=Q(n,i)/this.arrowLengthScale;o=o>this.maxArrowLength?this.maxArrowLength:o;var r=lt(n,i,Math.PI/6,o,!1),a=lt(n,i,Math.PI/6,o,!0);this.setCoordinates([n,i,r,i,a])}catch(t){console.log(t)}}},{key:"setMap",value:function(t){if(!(t&&t instanceof s.a.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(s.a.geom.LineString),Oe=function(t){function e(t,n,i){h()(this,e);var o=f()(this,(e.__proto__||u()(e)).call(this,[]));return o.type=le,o.tailWidthFactor=.1,o.neckWidthFactor=.2,o.headWidthFactor=.25,o.headAngle=Math.PI/8.5,o.neckAngle=Math.PI/13,o.fixPointCount=2,o.set("params",i),n&&n.length>0?o.setPoints(n):t&&t.length>0&&o.setCoordinates(t),o}return g()(e,t),w()(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){try{if(this.getPointCount()<2)return!1;var t=this.getPoints(),e=[t[0],t[1]],n=e[0],i=e[1],o=tt(t),r=o*this.tailWidthFactor,a=o*this.neckWidthFactor,s=o*this.headWidthFactor,l=lt(i,n,Y,r,!0),u=lt(i,n,Y,r,!1),c=lt(n,i,this.headAngle,s,!1),h=lt(n,i,this.headAngle,s,!0),p=[l,lt(n,i,this.neckAngle,a,!1),c,i,h,lt(n,i,this.neckAngle,a,!0),u];this.setCoordinates([p])}catch(t){console.log(t)}}},{key:"setMap",value:function(t){if(!(t&&t instanceof s.a.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(s.a.geom.Polygon),Le=function(t){function e(t,n,i){h()(this,e);var o=f()(this,(e.__proto__||u()(e)).call(this,t,n,i));return o.tailWidthFactor=.05,o.neckWidthFactor=.1,o.headWidthFactor=.15,o.type=ue,o.headAngle=Math.PI/4,o.neckAngle=.17741*Math.PI,n&&n.length>0?o.setPoints(n):t&&t.length>0&&o.setCoordinates(t),o.set("params",i),o}return g()(e,t),e}(Oe),De=function(t){function e(t,n,i){h()(this,e);var o=f()(this,(e.__proto__||u()(e)).call(this,t,n,i));return o.type=ce,o.headHeightFactor=.18,o.headWidthFactor=.3,o.neckHeightFactor=.85,o.neckWidthFactor=.15,o.tailWidthFactor=.1,o.headTailFactor=.8,o.swallowTailFactor=1,o.swallowTailPnt=null,o.set("params",i),n&&n.length>0?o.setPoints(n):t&&t.length>0&&o.setCoordinates(t),o}return g()(e,t),w()(e,[{key:"generate",value:function(){try{var t=this.getPointCount();if(t<2)return!1;if(2===t)return this.setCoordinates([this.points]),!1;var e=this.getPoints(),n=[e[0],e[1]],i=n[0],o=n[1];at(e[0],e[1],e[2])&&(i=e[1],o=e[0]);var r=[et(i,o)].concat(e.slice(2)),a=this.getArrowHeadPoints(r,i,o),s=[a[0],a[4]],l=s[0],u=s[1],c=Q(i,o),h=tt(r),p=h*this.tailWidthFactor*this.swallowTailFactor;this.swallowTailPnt=lt(r[1],r[0],0,p,!0);var f=c/h,d=this.getArrowBodyPoints(r,l,u,f),g=d.length,v=[i].concat(d.slice(0,g/2));v.push(l);var m=[o].concat(d.slice(g/2,g));m.push(u),v=vt(v),m=vt(m),this.setCoordinates([v.concat(a,m.reverse(),[this.swallowTailPnt,v[0]])])}catch(t){console.log(t)}}}]),e}(Fe),Ne=function(t){function e(t,n,i){h()(this,e);var o=f()(this,(e.__proto__||u()(e)).call(this,t,n,i));return o.type=he,o.headHeightFactor=.18,o.headWidthFactor=.3,o.neckHeightFactor=.85,o.neckWidthFactor=.15,o.tailWidthFactor=.1,o.set("params",i),n&&n.length>0?o.setPoints(n):t&&t.length>0&&o.setCoordinates(t),o}return g()(e,t),w()(e,[{key:"generate",value:function(){try{if(this.getPointCount()<2)return!1;var t=this.getPoints(),e=this.getTailPoints(t),n=this.getArrowHeadPoints(t,e[0],e[1]),i=n[0],o=n[4],r=this.getArrowBodyPoints(t,i,o,this.tailWidthFactor),a=r.length,s=[e[0]].concat(r.slice(0,a/2));s.push(i);var l=[e[1]].concat(r.slice(a/2,a));l.push(o),s=vt(s),l=vt(l),this.setCoordinates([s.concat(n,l.reverse())])}catch(t){console.log(t)}}},{key:"getTailPoints",value:function(t){var e=tt(t)*this.tailWidthFactor;return[lt(t[1],t[0],Y,e,!1),lt(t[1],t[0],Y,e,!0)]}}]),e}(Fe),He=function(t){function e(t,n,i){h()(this,e);var o=f()(this,(e.__proto__||u()(e)).call(this,t,n,i));return o.type=pe,o.headHeightFactor=.18,o.headWidthFactor=.3,o.neckHeightFactor=.85,o.neckWidthFactor=.15,o.tailWidthFactor=.1,o.swallowTailFactor=1,o.swallowTailPnt=null,o.fixPointCount=2,o.set("params",i),n&&n.length>0?o.setPoints(n):t&&t.length>0&&o.setCoordinates(t),o}return g()(e,t),w()(e,[{key:"generate",value:function(){try{if(this.getPointCount()<2)return!1;var t=this.getPoints(),e=this.getTailPoints(t),n=this.getArrowHeadPoints(t,e[0],e[2]),i=n[0],o=n[4],r=this.getArrowBodyPoints(t,i,o,this.tailWidthFactor),a=r.length,s=[e[0]].concat(r.slice(0,a/2));s.push(i);var l=[e[2]].concat(r.slice(a/2,a));l.push(o),s=vt(s),l=vt(l),this.setCoordinates([s.concat(n,l.reverse(),[e[1],s[0]])])}catch(t){console.log(t)}}},{key:"getTailPoints",value:function(t){var e=tt(t)*this.tailWidthFactor,n=lt(t[1],t[0],Y,e,!1),i=lt(t[1],t[0],Y,e,!0),o=e*this.swallowTailFactor;return[n,lt(t[1],t[0],0,o,!0),i]}}]),e}(Fe),We=function(t){function e(t,n,i){h()(this,e);var o=f()(this,(e.__proto__||u()(e)).call(this,[]));return o.type=Zt,o.t=.4,o.fixPointCount=3,o.set("params",i),n&&n.length>0?o.setPoints(n):t&&t.length>0&&o.setCoordinates(t),o}return g()(e,t),w()(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){var t=this.getPoints(),e=this.getPointCount();if(t.length<2)return!1;if(2===e){var n=et(t[0],t[1]),i=Q(t[0],n)/.9,o=lt(t[0],n,Y,i,!0);t=[t[0],o,t[1]]}var r=et(t[0],t[2]);t.push(r,t[0],t[1]);for(var a=[],s=void 0,l=void 0,u=void 0,c=[],h=0;h<t.length-2;h++){s=t[h],l=t[h+1],u=t[h+2];var p=ct(this.t,s,l,u);a=a.concat(p)}var f=a.length;a=[a[f-1]].concat(a.slice(0,f-1));for(var d=0;d<t.length-2;d++){s=t[d],l=t[d+1],c.push(s);for(var g=0;g<=Z;g++){var v=st(g/Z,s,a[2*d],a[2*d+1],l);c.push(v)}c.push(l)}this.setCoordinates([c])}},{key:"setMap",value:function(t){if(!(t&&t instanceof s.a.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(s.a.geom.Polygon),Be=function(t){function e(t,n,i){h()(this,e);var o=f()(this,(e.__proto__||u()(e)).call(this,[]));return o.type=fe,o.fixPointCount=2,o.set("params",i),n&&n.length>0?o.setPoints(n):t&&t.length>0&&o.setCoordinates(t),o}return g()(e,t),w()(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){if(this.getPointCount()<2)return!1;this.setCoordinates([this.calculatePonits(this.points)])}},{key:"calculatePonits",value:function(t){var e=[];if(t.length>1){var n=t[0],i=t[t.length-1];e=[n,[i[0],n[1]],[i[0],(n[1]+i[1])/2],[n[0],(n[1]+i[1])/2],[n[0],i[1]]]}return e}},{key:"setMap",value:function(t){if(!(t&&t instanceof s.a.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(s.a.geom.Polygon),Re=function(t){function e(t,n,i){h()(this,e);var o=f()(this,(e.__proto__||u()(e)).call(this,[]));return o.type=de,o.fixPointCount=2,o.set("params",i),n&&n.length>0?o.setPoints(n):t&&t.length>0&&o.setCoordinates(t),o}return g()(e,t),w()(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){if(this.getPointCount()<2)return!1;this.setCoordinates([this.calculatePonits(this.points)])}},{key:"calculatePonits",value:function(t){var e=[];if(t.length>1){var n=t[0],i=t[t.length-1];e=[n,[i[0],(n[1]+i[1])/2],[n[0],(n[1]+i[1])/2],[n[0],i[1]]]}return e}},{key:"setMap",value:function(t){if(!(t&&t instanceof s.a.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(s.a.geom.Polygon),ze=function(t){function e(t,n,i){h()(this,e);var o=f()(this,(e.__proto__||u()(e)).call(this,[]));return o.type=ge,o.fixPointCount=2,o.set("params",i),n&&n.length>0?o.setPoints(n):t&&t.length>0&&o.setCoordinates(t),o}return g()(e,t),w()(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){if(this.getPointCount()<2)return!1;this.setCoordinates([this.calculatePonits(this.points)])}},{key:"calculatePonits",value:function(t){var e=[];if(t.length>1){var n=t[0],i=t[t.length-1],o=n,r=[(i[0]-n[0])/4+n[0],(i[1]-n[1])/8+n[1]],a=[(n[0]+i[0])/2,n[1]],s=[3*(i[0]-n[0])/4+n[0],-(i[1]-n[1])/8+n[1]],l=[i[0],n[1]],u=[i[0],(n[1]+i[1])/2],c=[3*(i[0]-n[0])/4+n[0],3*(i[1]-n[1])/8+n[1]],h=[(n[0]+i[0])/2,(n[1]+i[1])/2],p=[(i[0]-n[0])/4+n[0],5*(i[1]-n[1])/8+n[1]],f=[n[0],(n[1]+i[1])/2],d=[n[0],i[1]],g=ft([o,r,a,s,l]),v=ft([u,c,h,p,f]);(e=g.concat(v)).push(d)}return e}},{key:"setMap",value:function(t){if(!(t&&t instanceof s.a.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(s.a.geom.Polygon),Ge=s.a.interaction.Draw,Ue=s.a.style.Style,je=s.a.style.Icon,Ve=s.a.style.Stroke,Ze=s.a.style.Fill,Ye=function(t){function e(t,n){h()(this,e);var i=f()(this,(e.__proto__||u()(e)).call(this));if(!(t&&t instanceof s.a.Map))throw new Error("传入的不是地图对象！");return i.map=t,i.options=n||{},i.points=null,i.plot=null,i.feature=null,i.plotType=null,i.plotParams=null,i.mapViewport=i.map.getViewport(),i.dblClickZoomInteraction=null,i.drawInteraction_=null,i.layerName=i.options&&i.options.layerName?i.options.layerName:q,i.drawLayer=Et(i.map,i.layerName,{create:!0}),i.drawLayer.setZIndex(i.options.zIndex||99),i}return g()(e,t),w()(e,[{key:"createPlot",value:function(t,e,n){var i=n||{};switch(t){case Ut:return"TextArea";case Jt:return new ve([],e,i);case Xt:return new me([],e,i);case Yt:return new ye([],e,i);case jt:return new Pe([],e,i);case Qt:return new ke([],e,i);case Vt:return new we([],e,i);case qt:return new be([],e,i);case $t:return new Ce([],e,i);case Kt:return new xe([],e,i);case te:return new Ae([],e,i);case ee:return new _e([],e,i);case ne:return new Me([],e,i);case ie:return new Te([],e,i);case re:return new Fe([],e,i);case oe:return new Ee([],e,i);case ae:return new Se([],e,i);case se:return new Ie([],e,i);case le:return new Oe([],e,i);case ue:return new Le([],e,i);case ce:return new De([],e,i);case he:return new Ne([],e,i);case pe:return new He([],e,i);case Zt:return new We([],e,i);case fe:return new Be([],e,i);case de:return new Re([],e,i);case ge:return new ze([],e,i)}return null}},{key:"active",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.disActive(),this.deactiveMapTools(),this.plotType=t,this.plotParams=e,t===Ut?this.activeInteraction():G()(i).some(function(e){return i[e]===t})?this.map.on("click",this.mapFirstClickHandler,this):console.warn("不存在的标绘类型！")}},{key:"activeInteraction",value:function(){this.drawInteraction_=new Ge({style:new Ue({fill:new Ze({color:"rgba(255, 255, 255, 0.7)"}),stroke:new Ve({color:"rgba(0, 0, 0, 0.15)",width:2}),image:new je({anchor:[1,1],anchorXUnits:"fraction",anchorYUnits:"fraction",opacity:.75,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABgklEQVQ4T41T0W3CQAy1lfwRqR0h/CE5UhkBJmiZADpB0wlKJwA2aDegE5QR+Igl/noj9OPuLydXPuXQEYUKS5FyPvvd87ONRDRFxEdr7c4Y8ws3WFmW90VRvIjIF1ZVtQaANxH59N6v8zwvRaQEgCMATDu88I+Ipm1bk2XZHhEfAOAdFW00Gh2YOQafOeidHoaYEdGHc65GDZhMJuXpdDJ99hqkPmZe9e9iTgCoqmrWNM0hDerq/FGftXbcZxFzAgARrZg5vBaNiGpE3OhZRF6Zedu7DzkRYMrMKlQKYBBRQVVgw8zj3n3IGWSg9ESkds6tiqJQbe4AYJ6WGVkPAqh4+romdP9LbXMqZh/gXIKqm+d5EK9vbduOY7d0AAdL6AYLmqbRAQtGRMc4ONF/wSC2RF/PsuwbABapqLEjKqb3fq4sLtoYh6Lbiydr7TbtuwYDgH5qB9XmPEjdKG+Y+Xmo7ms+Lcs5N0uX6ei9X9y4TGtEXIZlukb7PzbdmNcisv8DtQILak2vZsYAAAAASUVORK5CYII="})}),type:"Circle",geometryFunction:Ge.createBox()}),this.map.addInteraction(this.drawInteraction_),this.drawInteraction_.on("drawend",this.textAreaDrawEnd,this)}},{key:"textAreaDrawEnd",value:function(t){if(t&&t.feature){this.map.removeInteraction(this.drawInteraction_);var e=t.feature.getGeometry().getExtent(),n=[(e[0]+e[2])/2,(e[1]+e[3])/2],i=this.map.getPixelFromCoordinate([e[0],e[1]]),o=this.map.getPixelFromCoordinate([e[2],e[3]]),r=[Math.abs(i[0]-o[0]),Math.abs(i[1]-o[1])],a=r[0],l=r[1],u=new Gt({id:yt(),position:n,value:"",width:a,height:l,style:{width:a+"px",height:l+"px"}});this.map&&this.map instanceof s.a.Map&&u?this.map.addOverlay(u):console.warn("未传入地图对象或者plotText创建失败！")}else console.info("未获取到要素！")}},{key:"disActive",value:function(){this.removeEventHandlers(),this.drawInteraction_&&(this.map.removeInteraction(this.drawInteraction_),this.drawInteraction_=null),this.points=[],this.plot=null,this.feature=null,this.plotType=null,this.plotParams=null,this.activateMapTools()}},{key:"isDrawing",value:function(){return!!this.plotType}},{key:"mapFirstClickHandler",value:function(t){this.map.un("click",this.mapFirstClickHandler,this),this.points.push(t.coordinate),this.plot=this.createPlot(this.plotType,this.points,this.plotParams),this.feature=new s.a.Feature(this.plot),this.feature.set("isPlot",!0),this.drawLayer.getSource().addFeature(this.feature),this.plotType===Jt||this.plotType===Xt?(this.plot.finishDrawing(),this.drawEnd(t)):(this.map.on("click",this.mapNextClickHandler,this),this.plot.freehand||this.map.on("dblclick",this.mapDoubleClickHandler,this),this.map.un("pointermove",this.mapMouseMoveHandler,this),this.map.on("pointermove",this.mapMouseMoveHandler,this)),this.plotType&&this.feature&&(this.plotParams.plotType=this.plotType,this.feature.setProperties(this.plotParams))}},{key:"mapNextClickHandler",value:function(t){if(!this.plot.freehand&&Q(t.coordinate,this.points[this.points.length-1])<1e-4)return!1;this.points.push(t.coordinate),this.plot.setPoints(this.points),this.plot.fixPointCount===this.plot.getPointCount()&&this.mapDoubleClickHandler(t),this.plot&&this.plot.freehand&&this.mapDoubleClickHandler(t)}},{key:"mapDoubleClickHandler",value:function(t){t.preventDefault(),this.plot.finishDrawing(),this.drawEnd(t)}},{key:"mapMouseMoveHandler",value:function(t){var e=t.coordinate;if(Q(e,this.points[this.points.length-1])<1e-4)return!1;if(this.plot.freehand)this.points.push(e),this.plot.setPoints(this.points);else{var n=this.points.concat([e]);this.plot.setPoints(n)}}},{key:"removeEventHandlers",value:function(){this.map.un("click",this.mapFirstClickHandler,this),this.map.un("click",this.mapNextClickHandler,this),this.map.un("pointermove",this.mapMouseMoveHandler,this),this.map.un("dblclick",this.mapDoubleClickHandler,this)}},{key:"drawEnd",value:function(t){this.dispatchSync("drawEnd",{type:"drawEnd",originalEvent:t,feature:this.feature}),this.feature&&this.options.isClear&&this.drawLayer.getSource().removeFeature(this.feature),this.disActive()}},{key:"addFeature",value:function(){this.feature=new s.a.Feature(this.plot),this.feature&&this.drawLayer&&this.drawLayer.getSource().addFeature(this.feature)}},{key:"deactiveMapTools",value:function(){var t=this;this.map.getInteractions().getArray().every(function(e){return!(e instanceof s.a.interaction.DoubleClickZoom)||(t.dblClickZoomInteraction=e,t.map.removeInteraction(e),!1)})}},{key:"activateMapTools",value:function(){this.dblClickZoomInteraction&&this.dblClickZoomInteraction instanceof s.a.interaction.DoubleClickZoom&&(this.map.addInteraction(this.dblClickZoomInteraction),this.dblClickZoomInteraction=null)}}]),e}(U.a),qe=function(t){function e(t){h()(this,e);var n=f()(this,(e.__proto__||u()(e)).call(this));if(!(t&&t instanceof s.a.Map))throw new Error("传入的不是地图对象！");return n.map=t,n.mapViewport=n.map.getViewport(),n.activePlot=null,n.startPoint=null,n.ghostControlPoints=null,n.controlPoints=null,n.mouseOver=!1,n.elementTable={},n.activeControlPointId=null,n.mapDragPan=null,n.previousCursor_=null,n}return g()(e,t),w()(e,[{key:"initHelperDom",value:function(){var t=this;if(!this.map||!this.activePlot)return!1;var e=this.getMapParentElement();if(!e)return!1;var n,i,o,r,a=(n="div",i=e,o=X,(r=document.createElement(n)).style.display="none",o&&(r.id=o),i&&i.appendChild(r),r),s=this.getControlPoints();s&&Array.isArray(s)&&s.length>0&&s.forEach(function(e,n){var i,o,r,s,l,u=J+"-"+n;i="div",o=J,r=a,s=u,(l=document.createElement(i)).className=o||"",s&&(l.id=s),r&&r.appendChild(l),t.elementTable[u]=n})}},{key:"getMapParentElement",value:function(){var t=this.map.getTargetElement();return!!t&&t.parentNode}},{key:"destroyHelperDom",value:function(){var t=this;this.controlPoints&&Array.isArray(this.controlPoints)&&this.controlPoints.length>0&&(this.controlPoints.forEach(function(e,n){e&&e instanceof s.a.Overlay&&t.map.removeOverlay(e);var i=Lt(J+"-"+n);i&&(Ht(i,"mousedown",t.controlPointMouseDownHandler.bind(t)),Ht(i,"mousemove",t.controlPointMouseMoveHandler2.bind(t)))}),this.controlPoints=[]);var e,n,i=this.getMapParentElement(),o=Lt(X);o&&i&&(n=(e=o).parentNode)&&n.removeChild(e)}},{key:"initControlPoints",value:function(){var t=this;this.controlPoints=[];var e=this.getControlPoints();e&&Array.isArray(e)&&e.length>0&&e.forEach(function(n,i){var o=J+"-"+i;t.elementTable[o]=i;var r=Lt(o),a=new s.a.Overlay({id:o,position:e[i],positioning:"center-center",element:r});t.controlPoints.push(a),t.map.addOverlay(a),t.map.render(),Nt(r,"mousedown",t.controlPointMouseDownHandler.bind(t)),Nt(r,"mousemove",t.controlPointMouseMoveHandler2.bind(t))})}},{key:"controlPointMouseMoveHandler2",value:function(t){t.stopImmediatePropagation()}},{key:"controlPointMouseDownHandler",value:function(t){this.activeControlPointId=t.target.id,this.map.on("pointermove",this.controlPointMouseMoveHandler,this),Nt(this.mapViewport,"mouseup",this.controlPointMouseUpHandler.bind(this))}},{key:"controlPointMouseMoveHandler",value:function(t){var e=t.coordinate;if(this.activeControlPointId){var n=this.activePlot.getGeometry(),i=this.elementTable[this.activeControlPointId];n.updatePoint(e,i);var o=this.map.getOverlayById(this.activeControlPointId);o&&o.setPosition(e)}}},{key:"controlPointMouseUpHandler",value:function(t){this.map.un("pointermove",this.controlPointMouseMoveHandler,this),Ht(this.mapViewport,"mouseup",this.controlPointMouseUpHandler.bind(this))}},{key:"activate",value:function(t){var e=this;t&&t instanceof s.a.Feature&&t.get("isPlot")&&t.getGeometry().isPlot&&t!==this.activePlot&&(this.deactivate(),this.activePlot=t,this.previousCursor_=this.map.getTargetElement().style.cursor,window.setTimeout(function(){e.dispatch("active_plot_change",e.activePlot)},500),this.map.on("pointermove",this.plotMouseOverOutHandler,this),this.initHelperDom(),this.initControlPoints())}},{key:"getControlPoints",value:function(){var t=[];if(this.activePlot){var e=this.activePlot.getGeometry();e&&(t=e.getPoints())}return t}},{key:"plotMouseOverOutHandler",value:function(t){var e=this.map.forEachFeatureAtPixel(t.pixel,function(t){return t});return e&&e===this.activePlot?this.mouseOver||(this.mouseOver=!0,this.map.getTargetElement().style.cursor="move",this.map.on("pointerdown",this.plotMouseDownHandler,this)):this.mouseOver&&(this.mouseOver=!1,this.map.getTargetElement().style.cursor="default",this.map.un("pointerdown",this.plotMouseDownHandler,this)),e}},{key:"plotMouseDownHandler",value:function(t){this.ghostControlPoints=this.getControlPoints(),this.startPoint=t.coordinate,this.disableMapDragPan(),this.map.on("pointerup",this.plotMouseUpHandler,this),this.map.on("pointerdrag",this.plotMouseMoveHandler,this)}},{key:"plotMouseMoveHandler",value:function(t){var e=t.coordinate[0]-this.startPoint[0],n=t.coordinate[1]-this.startPoint[1],i=[];if(this.ghostControlPoints&&Array.isArray(this.ghostControlPoints)&&this.ghostControlPoints.length>0)for(var o=0;o<this.ghostControlPoints.length;o++){var r=[this.ghostControlPoints[o][0]+e,this.ghostControlPoints[o][1]+n];i.push(r);var a=J+"-"+o,s=this.map.getOverlayById(a);s&&(s.setPosition(r),s.setPositioning("center-center"))}this.activePlot.getGeometry().setPoints(i)}},{key:"plotMouseUpHandler",value:function(t){this.enableMapDragPan(),this.map.un("pointerup",this.plotMouseUpHandler,this),this.map.un("pointerdrag",this.plotMouseMoveHandler,this)}},{key:"disconnectEventHandlers",value:function(){this.map.un("pointermove",this.plotMouseOverOutHandler,this),this.map.un("pointermove",this.controlPointMouseMoveHandler,this),Ht(this.mapViewport,"mouseup",this.controlPointMouseUpHandler.bind(this)),this.map.un("pointerdown",this.plotMouseDownHandler,this),this.map.un("pointerup",this.plotMouseUpHandler,this),this.map.un("pointerdrag",this.plotMouseMoveHandler,this)}},{key:"deactivate",value:function(){this.activePlot=null,this.mouseOver=!1,this.map.getTargetElement().style.cursor=this.previousCursor_,this.previousCursor_=null,this.destroyHelperDom(),this.disconnectEventHandlers(),this.enableMapDragPan(),this.elementTable={},this.activeControlPointId=null,this.startPoint=null}},{key:"disableMapDragPan",value:function(){var t=this;this.map.getInteractions().getArray().every(function(e){return!(e instanceof s.a.interaction.DragPan)||(t.mapDragPan=e,t.map.removeInteraction(e),!1)})}},{key:"enableMapDragPan",value:function(){this.mapDragPan&&this.mapDragPan instanceof s.a.interaction.DragPan&&(this.map.addInteraction(this.mapDragPan),this.mapDragPan=null)}}]),e}(U.a),Je=function(t){var e=t&&"object"===(void 0===t?"undefined":V()(t))?t:{},n=new s.a.style.Style({});return e.geometry&&e.geometry instanceof s.a.geom.Geometry&&n.setGeometry(e.geometry),e.zIndex&&"number"==typeof e.zIndex&&n.setZIndex(e.zIndex),e.fill&&"object"===V()(e.fill)&&n.setFill(this._getFill(e.fill)),e.image&&"object"===V()(e.image)&&n.setImage(this._getImage(e.image)),e.stroke&&"object"===V()(e.stroke)&&n.setStroke(this._getStroke(e.stroke)),e.text&&"object"===V()(e.text)&&n.setText(this._getText(e.text)),n};Je.prototype._getRegularShape=function(t){try{return new s.a.style.RegularShape({fill:this._getFill(t.fill)||void 0,points:"number"==typeof t.points?t.points:1,radius:"number"==typeof t.radius?t.radius:void 0,radius1:"number"==typeof t.radius1?t.radius1:void 0,radius2:"number"==typeof t.radius2?t.radius2:void 0,angle:"number"==typeof t.angle?t.angle:0,snapToPixel:"boolean"!=typeof t.snapToPixel||t.snapToPixel,stroke:this._getStroke(t.stroke)||void 0,rotation:"number"==typeof t.rotation?t.rotation:0,rotateWithView:"boolean"==typeof t.rotateWithView&&t.rotateWithView,atlasManager:t.atlasManager?t.atlasManager:void 0})}catch(t){console.log(t)}},Je.prototype._getImage=function(t){try{return"icon"===(t=t||{}).type?this._getIcon(t.image):this._getRegularShape(t.image)}catch(t){console.log(t)}},Je.prototype._getIcon=function(t){try{return t=t||{},new s.a.style.Icon({anchor:t.imageAnchor?t.imageAnchor:[.5,.5],anchorXUnits:t.imageAnchorXUnits?t.imageAnchorXUnits:"fraction",anchorYUnits:t.imageAnchorYUnits?t.imageAnchorYUnits:"fraction",anchorOrigin:t.imageAnchorOrigin?t.imageAnchorYUnits:"top-left",color:t.imageColor?t.imageColor:void 0,crossOrigin:t.crossOrigin?t.crossOrigin:void 0,img:t.img?t.img:void 0,offset:t.offset&&Array.isArray(t.offset)&&2===t.offset.length?t.offset:[0,0],offsetOrigin:t.offsetOrigin?t.offsetOrigin:"top-left",scale:"number"==typeof t.scale?t.scale:1,snapToPixel:"boolean"!=typeof t.snapToPixel||t.snapToPixel,rotateWithView:"boolean"==typeof t.rotateWithView&&t.rotateWithView,opacity:"number"==typeof t.imageOpacity?t.imageOpacity:1,rotation:"number"==typeof t.imageRotation?t.imageRotation:0,size:t.size&&Array.isArray(t.size)&&2===t.size.length?t.size:void 0,imgSize:t.imgSize&&Array.isArray(t.imgSize)&&2===t.imgSize.length?t.imgSize:void 0,src:t.imageSrc?t.imageSrc:void 0})}catch(t){console.log(t)}},Je.prototype._getStroke=function(t){try{return t=t||{},new s.a.style.Stroke({color:t.strokeColor?t.strokeColor:void 0,lineCap:t.strokeLineCap&&"string"==typeof t.strokeLineCap?t.strokeLineCap:"round",lineJoin:t.strokeLineJoin&&"string"==typeof t.strokeLineJoin?t.strokeLineJoin:"round",lineDash:t.strokeLineDash?t.strokeLineDash:void 0,lineDashOffset:"number"==typeof t.strokeLineDashOffset?t.strokeLineDashOffset:"0",miterLimit:"number"==typeof t.strokeMiterLimit?t.strokeMiterLimit:10,width:"number"==typeof t.strokeWidth?t.strokeWidth:void 0})}catch(t){console.log(t)}},Je.prototype._getText=function(t){try{return new s.a.style.Text({font:t.textFont&&"string"==typeof t.textFont?t.textFont:"10px sans-serif",offsetX:"number"==typeof t.textOffsetX?t.textOffsetX:0,offsetY:"number"==typeof t.textOffsetY?t.textOffsetY:0,scale:"number"==typeof t.textScale?t.textScale:void 0,rotation:"number"==typeof t.textRotation?t.textRotation:0,text:t.text&&"string"==typeof t.text?t.text:void 0,textAlign:t.textAlign&&"string"==typeof t.textAlign?t.textAlign:"start",textBaseline:t.textBaseline&&"string"==typeof t.textBaseline?t.textBaseline:"alphabetic",rotateWithView:"boolean"==typeof t.rotateWithView&&t.rotateWithView,fill:this._getFill(t.textFill),stroke:this._getStroke(t.textStroke)})}catch(t){console.log(t)}},Je.prototype._getFill=function(t){try{return t=t||{},new s.a.style.Fill({color:t.fillColor?t.fillColor:void 0})}catch(t){console.log(t)}};var Xe=Je,$e=function(){function t(e,n){if(h()(this,t),!(e&&e instanceof s.a.Map))throw new Error("传入的不是地图对象！");this.map=e,this.options=n,this.layerName=this.options&&this.options.layerName?this.options.layerName:q}return w()(t,[{key:"getBaseStyle",value:function(t){var e=t.getStyle();if(!e){var n=Mt(this.map,this.layerName);if(!(n&&n instanceof s.a.layer.Vector))return!1;e=n.getStyle()}return e}},{key:"setIcon",value:function(t,e){try{if(t&&t instanceof s.a.Feature){var n=this.getBaseStyle(t).clone(),i=this._getImage(e);i&&(n.setImage(i),t.setStyle(n))}}catch(t){console.warn(t)}}},{key:"setBackgroundColor",value:function(t,e){try{if(t&&t instanceof s.a.Feature){var n=this.getBaseStyle(t).clone(),i=n.getFill(),o=i.getColor();if(o){var r=s.a.color.asArray(o),a=s.a.color.asArray(e),l=this.handleBackgroundColor(a,r[3]);i.setColor(l),t.setStyle(n)}}}catch(t){console.warn(t)}}},{key:"setOpacity",value:function(t,e){try{if(t&&t instanceof s.a.Feature){var n=this.getBaseStyle(t);if(n){var i=n.clone(),o=i.getFill(),r=o.getColor();if(r){var a=s.a.color.asArray(r);a[3]=e;var l="rgba("+a.join(",")+")";o.setColor(l),t.setStyle(i)}}}}catch(t){console.warn(t)}}},{key:"setBorderColor",value:function(t,e){try{if(t&&t instanceof s.a.Feature){var n=this.getBaseStyle(t).clone();n.getStroke().setColor(e),t.setStyle(n)}}catch(t){console.warn(t)}}},{key:"setBorderWidth",value:function(t,e){try{if(t&&t instanceof s.a.Feature){var n=this.getBaseStyle(t).clone();n.getStroke().setWidth(e),t.setStyle(n)}}catch(t){console.warn(t)}}},{key:"handleBackgroundColor",value:function(t,e){try{e||(e=1);var n=s.a.color.asArray(t);return n[3]=e,"rgba("+n.join(",")+")"}catch(t){console.warn(t)}}},{key:"getColor",value:function(t){try{var e=s.a.color.asArray(t);return s.a.color.asString(e)}catch(t){console.warn(t)}}},{key:"fixObject",value:function(t){if(t&&"object"===(void 0===t?"undefined":V()(t)))for(var e in t)e&&void 0===t[e]&&delete t[e];return t}},{key:"getStroke_",value:function(t){var e=null;if(t){var n=t.getStroke();n&&((e={}).strokeColor=this.getColor(n.getColor()),e.strokeWidth=n.getWidth(),e.strokeLineDash=n.getLineDash(),e.lineDashOffset=n.getLineDashOffset(),e.strokeLineCap=n.getLineCap(),e.strokeLineJoin=n.getLineJoin(),e.strokeMiterLimit=n.getMiterLimit())}return this.fixObject(e)}},{key:"getFill_",value:function(t){var e=null;if(t){var n=t.getFill();if(n){e={};var i=n.getColor();e.fillColor=this.getColor(i)}}return this.fixObject(e)}},{key:"getText_",value:function(t){var e=null;if(t){var n=t.getText();n&&((e={}).textFont=n.getFont(),e.textOffsetX=n.getOffsetX(),e.textOffsetY=n.getOffsetY(),e.textScale=n.getScale(),e.textRotation=n.getRotation(),e.text=n.getText(),e.textAlign=n.getTextAlign(),e.textBaseline=n.getTextBaseline(),e.rotateWithView=n.getRotateWithView(),e.textFill=this.getFill_(n),e.textStroke=this.getStroke_(n))}return this.fixObject(e)}},{key:"getImage_",value:function(t){var e=null;if(t){var n=t.getImage();n&&(e={},n instanceof s.a.style.Icon?(e.type="icon",e.image={},e.image.imageAnchor=n.getAnchor(),e.image.imageColor=n.getColor(),e.image.imageSrc=n.getSrc(),e.image.imgSize=n.getSize(),e.image.scale=n.getScale(),e.image.imageRotation=n.getRotation(),e.image.rotateWithView=n.getRotateWithView(),e.image.imageOpacity=n.getOpacity(),e.image.snapToPixel=n.getSnapToPixel(),e.image.offset=n.getOrigin()):n instanceof s.a.style.RegularShape&&(e.type="",e.image={},e.image.fill=this.getFill_(n),e.image.points=n.getPoints(),e.image.radius=n.getRadius(),e.image.radius2=n.getRadius2(),e.image.angle=n.getAngle(),e.image.stroke=this.getStroke_(n),e.image.rotateWithView=n.getRotateWithView(),e.image.snapToPixel=n.getSnapToPixel()))}return this.fixObject(e)}},{key:"getStyleCode",value:function(t){try{if(t&&t instanceof s.a.Feature){var e=this.getBaseStyle(t);if(e&&e instanceof s.a.style.Style){var n=this.getFill_(e),i=[1,null],o=i[0],r=i[1],a=i[2];n&&n.fillColor&&(r=s.a.color.asArray(n.fillColor),o=parseFloat(r[3]),r&&"number"==typeof o&&(a=this.handleBackgroundColor(s.a.color.asString(r),o)));var l=this.getStroke_(e),u=this.getText_(e);return{fill:{fillColor:a,opacity:o},stroke:l,image:this.getImage_(e),text:u}}}}catch(t){console.warn(t)}}},{key:"removeAllFeatures",value:function(){var t=Mt(this.map,this.layerName),e=this.map.getOverlays().getArray();t&&t.getSource().clear();if(e&&e.length>0)for(var n=e.length,i=0;i<n;i++)e[i]&&e[i].get("isPlotText")&&(this.map.removeOverlay(e[i]),i--)}},{key:"getFeatures",value:function(){var t=this,e=[],n=Mt(this.map,this.layerName);if(n){var i=n.getSource();if(i&&i instanceof s.a.source.Vector){var o=i.getFeatures();o&&o.length>0&&o.forEach(function(n,i){if(n&&n.getGeometry){var o=n.getGeometry();if(o&&o.getCoordinates){var r=o.getType(),a=o.getCoordinates();e.push({type:"Feature",geometry:{type:r,coordinates:a},properties:{type:n.getGeometry().getPlotType(),style:t.getStyleCode(n),points:n.getGeometry().getPoints()}})}}})}}return this.map.getOverlays().getArray().forEach(function(t){if(t.get("isPlotText")){var n=t.getStyle();n.width=t.getWidth()+"px",n.height=t.getHeight()+"px",e.push({type:"Feature",geometry:{type:"PlotText",coordinates:t.getPosition()},properties:{id:t.getId(),width:t.getWidth(),height:t.getHeight(),style:n,value:t.getValue()}})}}),e}},{key:"addFeatures",value:function(t){var e=this;if(t&&Array.isArray(t)&&t.length>0){var n=Mt(this.map,this.layerName);if(n||(n=Et(this.map,this.layerName,{create:!0})).setZIndex(this.options.zIndex||99),n){var i=n.getSource();if(i&&i instanceof s.a.source.Vector){var r=[];if(t.forEach(function(t){if(t&&t.geometry&&"PlotText"!==t.geometry.type)if(t.properties.type&&o[t.properties.type]){var n=new s.a.Feature({geometry:new o[t.properties.type]([],t.properties.points,t.properties)});if(n.set("isPlot",!0),r.push(n.getGeometry().getExtent()),t.properties.style){var a=new Xe(t.properties.style);a&&n.setStyle(a)}i.addFeature(n)}else console.warn("不存在的标绘类型！");else if(t&&t.geometry&&"PlotText"===t.geometry.type){r.push(new s.a.geom.Point(t.geometry.coordinates).getExtent());var l=new Gt({id:t.properties.id,position:t.geometry.coordinates,width:t.properties.width,height:t.properties.height,value:t.properties.value,style:t.properties.style});e.map&&e.map instanceof s.a.Map&&l?e.map.addOverlay(l):console.warn("未传入地图对象或者plotText创建失败！")}}),this.options.zoomToExtent&&r&&r.length>0){var a=this._getExtent(r),l=this.map.getSize(),u=this.map.getView();u.fit(a,{size:l,duration:800,maxZoom:u.getMaxZoom()||void 0})}}}}}},{key:"_getExtent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],i=t.reduce(function(t,e){return[Math.min(e[0],t[0]),Math.min(e[1],t[1]),Math.max(e[2],t[2]),Math.max(e[3],t[3])]},n),o=s.a.extent.getSize(i),r="number"==typeof e.adjust?e.adjust:.2,a="number"==typeof e.minWidth?e.minWidth:.05,l="number"==typeof e.minHeight?e.minHeight:.05;if(o[0]<=a||o[1]<=l){var u=s.a.extent.getBottomLeft(i),c=s.a.extent.getTopRight(i),h=u[0]-r,p=u[1]-r,f=c[0]+r,d=c[1]+r;i=s.a.extent.buffer([h,p,f,d],r)}return i}}]),t}(),Qe=function t(e,n){h()(this,t),this.plotDraw=new Ye(e,n),this.plotEdit=new qe(e,n),this.plotUtils=new $e(e,n)};Qe.PlotTypes=i,Qe.Geometry=o;var Ke=Qe,tn={A:10,B:11,C:12,D:13,E:14,F:15},en=function(t){return 2===t.length?16*(tn[t[0].toUpperCase()]||+t[0])+(tn[t[1].toUpperCase()]||+t[1]):tn[t[1].toUpperCase()]||+t[1]},nn=function(t){var e="";if(t&&"object"===(void 0===t?"undefined":V()(t)))e="rgb("+t.r+", "+t.g+", "+t.b+")";else if(-1!==t.indexOf("rgb")){var n=t.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter(function(t){return""!==t}).map(function(t,e){return e>2?parseFloat(t):parseInt(t,10)});4===n.length?e=Math.floor(100*parseFloat(n[3])):n.push(1),e={r:n[0],g:n[1],b:n[2],a:n[3]}}else if(-1!==t.indexOf("#")){var i=t.replace("#","").trim(),o=void 0,r=void 0,a=void 0;3===i.length?(o=en(i[0]+i[0]),r=en(i[1]+i[1]),a=en(i[2]+i[2])):6===i.length&&(o=en(i.substring(0,2)),r=en(i.substring(2,4)),a=en(i.substring(4))),e={r:o,g:r,b:a,a:1}}return{rgba:e}},on=function(t){var e="";if(t&&"object"===(void 0===t?"undefined":V()(t)))e="rgb("+t.r+", "+t.g+", "+t.b+")";else if(-1!==t.indexOf("rgb")){var n=t.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter(function(t){return""!==t}).map(function(t,e){return e>2?parseFloat(t):parseInt(t,10)});e=4===n.length?Math.floor(100*parseFloat(n[3])):"rgb("+n.join(",")+")"}return e},rn=function(t){return(t||"").replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,"")},an=function(){if(document.addEventListener)return function(t,e,n){t&&e&&n&&t.addEventListener(e,n,!1)}}();!function(){if(document.removeEventListener);}();function sn(t,e){if(!t||!e)return!1;if(-1!==e.indexOf(" "))throw new Error("className should not contain space.");return t.classList?t.classList.contains(e):(" "+t.className+" ").indexOf(" "+e+" ")>-1}function ln(t,e){if(t){for(var n=t.className,i=(e||"").split(" "),o=0,r=i.length;o<r;o++){var a=i[o];a&&(t.classList?t.classList.add(a):sn(t,a)||(n+=" "+a))}t.classList||(t.className=n)}}function un(t,e){if(t&&e){for(var n=e.split(" "),i=" "+t.className+" ",o=0,r=n.length;o<r;o++){var a=n[o];a&&(t.classList?t.classList.remove(a):sn(t,a)&&(i=i.replace(" "+a+" "," ")))}t.classList||(t.className=rn(i))}}var cn=!1,hn=function(){if(!r.a.prototype.$isServer){var t=fn.modalDom;return t?cn=!0:(cn=!1,t=document.createElement("div"),fn.modalDom=t,t.addEventListener("touchmove",function(t){t.preventDefault(),t.stopPropagation()}),t.addEventListener("click",function(){fn.doOnModalClick&&fn.doOnModalClick()})),t}},pn={},fn={zIndex:2e3,modalFade:!0,getInstance:function(t){return pn[t]},register:function(t,e){t&&e&&(pn[t]=e)},deregister:function(t){t&&(pn[t]=null,delete pn[t])},nextZIndex:function(){return fn.zIndex++},modalStack:[],doOnModalClick:function(){var t=fn.modalStack[fn.modalStack.length-1];if(t){var e=fn.getInstance(t.id);e&&e.closeOnClickModal&&e.close()}},openModal:function(t,e,n,i,o){if(!r.a.prototype.$isServer&&t&&void 0!==e){this.modalFade=o;for(var a=this.modalStack,s=0,l=a.length;s<l;s++){if(a[s].id===t)return}var u=hn();if(ln(u,"v-modal"),this.modalFade&&!cn&&ln(u,"v-modal-enter"),i)i.trim().split(/\s+/).forEach(function(t){return ln(u,t)});setTimeout(function(){un(u,"v-modal-enter")},200),n&&n.parentNode&&11!==n.parentNode.nodeType?n.parentNode.appendChild(u):document.body.appendChild(u),e&&(u.style.zIndex=e),u.style.display="",this.modalStack.push({id:t,zIndex:e,modalClass:i})}},closeModal:function(t){var e=this.modalStack,n=hn();if(e.length>0){var i=e[e.length-1];if(i.id===t){if(i.modalClass)i.modalClass.trim().split(/\s+/).forEach(function(t){return un(n,t)});e.pop(),e.length>0&&(n.style.zIndex=e[e.length-1].zIndex)}else for(var o=e.length-1;o>=0;o--)if(e[o].id===t){e.splice(o,1);break}}0===e.length&&(this.modalFade&&ln(n,"v-modal-leave"),setTimeout(function(){0===e.length&&(n.parentNode&&n.parentNode.removeChild(n),n.style.display="none",fn.modalDom=void 0),un(n,"v-modal-leave")},200))}};r.a.prototype.$isServer||window.addEventListener("keydown",function(t){if(27===t.keyCode){var e=function(){if(!r.a.prototype.$isServer&&fn.modalStack.length>0){var t=fn.modalStack[fn.modalStack.length-1];if(!t)return;return fn.getInstance(t.id)}}();e&&e.closeOnPressEscape&&(e.handleClose?e.handleClose():e.handleAction?e.handleAction("cancel"):e.close())}});var dn=fn,gn=(Boolean,String,Boolean,Boolean,Boolean,Boolean,Boolean,Boolean,n("P4zV").Popper),vn=function(t){return t.stopPropagation()},mn={props:{placement:{type:String,default:"bottom"},boundariesPadding:{type:Number,default:5},reference:{},popper:{},offset:{default:0},value:Boolean,visibleArrow:Boolean,transition:String,appendToBody:{type:Boolean,default:!0},popperOptions:{type:Object,default:function(){return{gpuAcceleration:!1}}}},data:function(){return{showPopper:!1,currentPlacement:""}},watch:{value:{immediate:!0,handler:function(t){this.showPopper=t,this.$emit("input",t)}},showPopper:function(t){t?this.updatePopper():this.destroyPopper(),this.$emit("input",t)}},methods:{createPopper:function(){var t=this;if(!this.$isServer&&(this.currentPlacement=this.currentPlacement||this.placement,/^(top|bottom|left|right)(-start|-end)?$/g.test(this.currentPlacement))){var e=this.popperOptions,n=this.popperElm=this.popperElm||this.popper||this.$refs.popper,i=this.referenceElm=this.referenceElm||this.reference||this.$refs.reference;!i&&this.$slots.reference&&this.$slots.reference[0]&&(i=this.referenceElm=this.$slots.reference[0].elm),n&&i&&(this.visibleArrow&&this.appendArrow(n),this.appendToBody&&document.body.appendChild(this.popperElm),this.popperJS&&this.popperJS.destroy&&this.popperJS.destroy(),e.placement=this.currentPlacement,e.offset=this.offset,this.popperJS=new gn(i,n,e),this.popperJS.onCreate(function(e){t.$emit("created",t),t.resetTransformOrigin(),t.$nextTick(t.updatePopper)}),"function"==typeof e.onUpdate&&this.popperJS.onUpdate(e.onUpdate),this.popperJS._popper.style.zIndex=dn.nextZIndex(),this.popperElm.addEventListener("click",vn))}},updatePopper:function(){this.popperJS?this.popperJS.update():this.createPopper()},doDestroy:function(){!this.showPopper&&this.popperJS&&(this.popperJS.destroy(),this.popperJS=null)},destroyPopper:function(){this.popperJS&&this.resetTransformOrigin()},resetTransformOrigin:function(){var t=this.popperJS._popper.getAttribute("x-placement").split("-")[0],e={top:"bottom",bottom:"top",left:"right",right:"left"}[t];this.popperJS._popper.style.transformOrigin=["top","bottom"].indexOf(t)>-1?"center "+e:e+" center"},appendArrow:function(t){var e=void 0;if(!this.appended){this.appended=!0;for(var n in t.attributes)if(/^_v-/.test(t.attributes[n].name)){e=t.attributes[n].name;break}var i=document.createElement("div");e&&i.setAttribute(e,""),i.setAttribute("x-arrow",""),i.className="popper__arrow",t.appendChild(i)}}},beforeDestroy:function(){this.doDestroy(),this.popperElm&&this.popperElm.parentNode===document.body&&(this.popperElm.removeEventListener("click",vn),document.body.removeChild(this.popperElm))},deactivated:function(){this.$options.beforeDestroy[0].call(this)}},yn=n("Zzkc"),Pn={name:"sf-color-picker-dropdown",mixins:[mn],props:{color:{required:!0}},data:function(){return{colorInner:""}},mounted:function(){this.$parent.popperElm=this.popperElm=this.$el,this.referenceElm=this.$parent.$el,this.colorInner=this.color},watch:{showPopper:function(t){!0===t&&this.$nextTick(function(){console.log(t)})},colorInner:function(t){this.$emit("update:color",t)}},components:{Sketch:yn.Sketch}},kn={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":t.doDestroy}},[n("sketch",{directives:[{name:"show",rawName:"v-show",value:t.showPopper,expression:"showPopper"}],model:{value:t.colorInner,callback:function(e){t.colorInner=e},expression:"colorInner"}})],1)},staticRenderFns:[]},wn=n("VU/8")(Pn,kn,!1,null,null,null).exports,bn=[],Cn="@@clickoutsideContext",xn=void 0,An=0;!r.a.prototype.$isServer&&an(document,"mousedown",function(t){return xn=t}),!r.a.prototype.$isServer&&an(document,"mouseup",function(t){bn.forEach(function(e){return e[Cn].documentHandler(t,xn)})});var _n={name:"SfColorPicker",props:{value:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:String,popperClass:String},inject:{elFormItem:{default:""}},directives:{Clickoutside:{bind:function(t,e,n){bn.push(t);var i=An++;t[Cn]={id:i,documentHandler:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!(n.context&&i.target&&o.target)||t.contains(i.target)||t.contains(o.target)||t===i.target||n.context.popperElm&&(n.context.popperElm.contains(i.target)||n.context.popperElm.contains(o.target))||(e.expression&&t[Cn].methodName&&n.context[t[Cn].methodName]?n.context[t[Cn].methodName]():t[Cn].bindingFn&&t[Cn].bindingFn())},methodName:e.expression,bindingFn:e.value}},update:function(t,e){t[Cn].methodName=e.expression,t[Cn].bindingFn=e.value},unbind:function(t){for(var e=bn.length,n=0;n<e;n++)if(bn[n][Cn].id===t[Cn].id){bn.splice(n,1);break}}}},computed:{displayedColor:function(){return(this.value||this.showPanelColor)&&this.color.rgba?on(this.color.rgba):"transparent"},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},colorSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size}},watch:{value:function(t){t?t&&t!==this.color&&(this.color=nn(t)):this.showPanelColor=!1},color:function(t){this.showPanelColor=!0,t&&t.rgba&&(this.$emit("input",on(t.rgba)),this.$emit("change",on(t.rgba)))}},methods:{handleTrigger:function(){this.disabled||(this.showPicker=!this.showPicker)},hide:function(){this.showPicker=!1,this.resetColor()},resetColor:function(){var t=this;this.$nextTick(function(e){t.value?t.color=nn(t.value):t.showPanelColor=!1})}},mounted:function(){var t=this.value;t&&(this.color=nn(t))},data:function(){return{color:{},showPicker:!1,showPanelColor:!1}},components:{sfColorPickerDropdown:wn}},Mn={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:t.hide,expression:"hide"}],class:["sf-color-picker",t.disabled?"is-disabled":"",t.colorSize?"sf-color-picker--"+t.colorSize:""]},[n("div",{staticClass:"sf-color-picker__trigger",on:{click:t.handleTrigger}},[n("span",{staticClass:"sf-color-picker__color",class:{"is-alpha":t.showAlpha}},[n("span",{staticClass:"sf-color-picker__color-inner",style:{backgroundColor:t.displayedColor}}),t._v(" "),t.value||t.showPanelColor?t._e():n("span",{staticClass:"sf-color-picker__empty el-icon-close"})]),t._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:t.value||t.showPanelColor,expression:"value || showPanelColor"}],staticClass:"sf-color-picker__icon el-icon-caret-bottom"})]),t._v(" "),n("sf-color-picker-dropdown",{ref:"dropdown",class:["sf-color-picker__panel",t.popperClass||""],attrs:{color:t.color},on:{"update:color":function(e){t.color=e}},model:{value:t.showPicker,callback:function(e){t.showPicker=e},expression:"showPicker"}})],1)},staticRenderFns:[]};var Tn=n("VU/8")(_n,Mn,!1,function(t){n("/tl0")},null,null).exports,En={name:"ol-plot-vue",props:{plots:{type:Array,default:function(){return[]}},map:Object},data:function(){return{inPlotPanel:!1,tools:[],selected:"",title:"应急标绘",height:40,loading:!1,backgroundColor:"#20a0ff",borderColor:"#20a0ff",borderWidth:1,opacity:1,plot:null,schemeTitle:"",textAreaBackgroundColor:"rgb(255, 255, 255)",textAreaBorderColor:"rgb(238, 238, 238)",textAreaColor:"rgb(1, 5, 0)",textAreaFontSize:12,textAreaBorderWidth:1,currentTextArea:null}},watch:{borderWidth:function(t){this.plot.plotUtils.setBorderWidth(this.plot.plotEdit.activePlot,t)},opacity:function(t){this.plot.plotUtils.setOpacity(this.plot.plotEdit.activePlot,t)},backgroundColor:function(t){this.plot.plotUtils.setBackgroundColor(this.plot.plotEdit.activePlot,t)},borderColor:function(t){this.plot.plotUtils.setBorderColor(this.plot.plotEdit.activePlot,t)},textAreaBackgroundColor:function(t){console.log(t),t&&this.currentTextArea&&this.currentTextArea.setStyle({background:t})},textAreaBorderColor:function(t){console.log(t),t&&this.currentTextArea&&this.currentTextArea.setStyle({border:this.textAreaBorderWidth+"px solid "+t})},textAreaColor:function(t){console.log(t),t&&this.currentTextArea&&this.currentTextArea.setStyle({color:t})},textAreaFontSize:function(t){console.log(t),t&&this.currentTextArea&&this.currentTextArea.setStyle({fontSize:t+"px"})},textAreaBorderWidth:function(t){console.log(t),t&&this.currentTextArea&&this.currentTextArea.setStyle({border:t+"px solid "+this.textAreaBorderColor})},map:function(t){t&&this.initPlot()}},mounted:function(){this.map&&this.initPlot()},methods:{closeFunc:function(){this.$emit("close")},minFunc:function(){this.$emit("showMin")},initPlot:function(){this.plot||(this.plot=new Ke(this.map,{zIndex:999,zoomToExtent:!0}),this.plot.plotDraw.drawLayer.setStyle(new Xe({fill:{fillColor:"#8BA2E4"},stroke:{strokeColor:"#1B9DE8",strokeWidth:2.5},image:{type:"icon",image:{imageAnchor:[.5,.5],imageAnchorXUnits:"fraction",imageAnchorYUnits:"fraction",imageOpacity:.75,imageSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpmODA3ZDlmZS1mOTRhLTRmZDktOWYwYS05ZTk3NjdkYTUxMjUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MDM3RkNGQUJDOEUyMTFFNkIwMDFGOUI0RDhFQUI4NEYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDM3RkNGQUFDOEUyMTFFNkIwMDFGOUI0RDhFQUI4NEYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6ZDc5MmU0ODgtMzAxNC1kNDRiLWI4OWEtYmIxMzNhYWIyYjI1IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU1YWEwNTQ3LTlmMGQtNDllYS1hOGI4LTRkZWRhMmU1OGRiMSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PoW3u00AAAMESURBVHja7FdLaFNBFJ2Z1/eapCnUam0V6cYWEdd+FkUK4kIRF4pLxeJOV4IbpaDQgoiCK9d+loIIKi4V3CmuRJCCImpRW2ur5NP83oznJE1IXmZqEsVuvBA67717z5k5987cqTTGiLUwJdbI1oy4q/7h4INFp+PmHm/7csmczIVmbyE0I6ERG/jek2Ih8OTbmCefxbvkrc+Z8I0L4/Hhfjuxg3BrqqgvA/CoTSFOABPib89SXpzrDeS9Xl+dh/+7jqUeiKvjX7Lhq1TBHGsxLYq+iHmN2NMdEa+PqYvflvVtFH2i3fwhJobYG/0xNdUWMWf7PacvYSj/pIAWc3oSWGdaIh5KqNGFnL72t6oXWFeJuWpV09JFcx1SxW0gXH7SlyKBn68qYhS1EdmiYZwwdtnjKWBieMi54i1JbxsADthIsW3EYEKJvm4lApDKlYlwzHf85jkSkwEmsZ3E2ZI5YZNfVvJeW6XN+I0+Dg+1gm2XGntx3BaVrJOWhr0qxjYFkFmI53MFgS1UI6cvpG3CiGI3ECNfIzZi5rR+EpM7k2V5afuHAzH1Il3OcdXXRhzFbpA11GKdjTioW+2uQb9GSuOY7+olt1kUO5pPa480v3HopLE2EHtK/LQ5cctU7eVcUeBwqT1zzHc23wj2D2eOIdNMSZuBaBD3adBdkZD5m0ZOdw/5bBBlUlRs/dZxVf2Mkxit7Qmqb8xyqKBoTC3XJHo6W2gCL2C1LmJiO6VGP70DaG3L4cKyLgO7jN/oY+wnXkhsJzF7aI8vH1qrEojzWS2W8lrk8cDZ8ccx3/Fb6JgXMB9F+3PTWY3tcTZbCvdhAUnbytMr53LL1StFmpjpYrh6d5pNh+83xtUpm+TtGjGIRcyW+vHXrL6LJn6hwy1aE4gYxGrrBoL9eQWH/gSkyrR9OCCGscTo6M7Fqw+k2oGmcJ+V2YK0IX0Zw9iWr7cO2T/gzxHcIobRjSZwvR3H9XYUFdwHopIn5bzviU+83vpK3IT/x2q3WnWS//+F+Vf2S4ABAMe7cI4Rhe5DAAAAAElFTkSuQmCC"}}})),this.plot.plotDraw.on("drawEnd",this.onDrawEnd_,this),this.map.on("activeTextArea",this.activeTextArea_,this),this.map.on("disActiveTextArea",this.activeTextArea_,this),this.map.un("click",this.handleClick_,this),this.map.on("click",this.handleClick_,this))},clearActiveTool:function(){this.plot.plotDraw.disActive()},onDrawEnd_:function(t){var e=t.feature;e&&(this.plot.plotEdit.activate(e),this.activeToolPanel(e))},activeTextArea_:function(t){console.log(t),"activeTextArea"===t.type?(this.currentTextArea=t.target.get("activeTextArea"),this.reFresheTextArea(this.currentTextArea)):console.log(t.type)},changeSelectedItem:function(t){this.selected=t.alias,t.alias?(this.plot.plotEdit.deactivate(),this.plot.plotDraw.active(t.alias)):console.warn("不存在的标绘类型！")},handleClick_:function(t){var e=this.map.forEachFeatureAtPixel(t.pixel,function(t){return t});e&&e.get("isPlot")&&!this.plot.plotDraw.isDrawing()?(this.plot.plotEdit.activate(e),this.activeToolPanel(e)):this.plot.plotEdit.deactivate(),this.currentTextArea=null},mouseOverHandle:function(t){this.$set(t,"mouseover",!0)},mouseOutHandle:function(t){this.$set(t,"mouseover",!1)},activeToolPanel:function(t){if(t&&t.getGeometry()){var e=t.getGeometry().getPlotType();e&&(this.selected=e),this.refreshe(this.plot.plotUtils.getStyleCode(t))}},refreshe:function(t){t&&(t.fill&&(this.opacity=t.fill.opacity||this.opacity,this.backgroundColor=t.fill.fillColor||this.backgroundColor),t.stroke&&(this.borderWidth=t.stroke.strokeWidth||this.borderWidth,this.borderColor=t.stroke.strokeColor||this.borderColor))},reFresheTextArea:function(t){var e=this;if(t){var n=t.getStyle();if(n){if(n.fontSize&&(this.textAreaFontSize=parseInt(n.fontSize)),n.color&&(this.textAreaColor=n.color),n.border)n.border.split(" ").every(function(t){return!t.indexOf("px")||(e.textAreaBorderWidth=parseInt(t),!1)}),this.textAreaBorderColor=n.border.slice(n.border.indexOf("rgb("),n.border.indexOf(")")+1);n.background&&(this.textAreaBackgroundColor=n.background.slice(n.background.indexOf("rgb("),n.background.indexOf(")")+1))}}},save:function(){var t=this.plot.plotUtils.getFeatures();console.log({content:R()(t),title:this.schemeTitle})}},components:{colorPicker:Tn}},Fn={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ol-plot-vue"},[n("header",{staticClass:"panel-header"},[n("span",{attrs:{title:"应急标绘"}},[t._v("应急标绘")]),t._v(" "),n("span",{staticClass:"iconfont icon-zuixiaohua",on:{click:function(e){t.minFunc()}}}),t._v(" "),n("span",{staticClass:"iconfont icon-guanbi",on:{click:function(e){t.closeFunc()}}})]),t._v(" "),n("div",{staticClass:"panel-content"},[n("div",{ref:"workspace",staticClass:"ol-plot-vue-workspace"},[n("div",{staticClass:"ol-plot-vue-workspace-scroll"},[n("div",{staticClass:"ol-plot-vue-workspace-scroll-inner"},[n("div",{staticClass:"plot-list-wrap"},[n("div",{staticClass:"plot-list"},[n("ul",{staticClass:"clearfix"},t._l(t.plots,function(e,i){return n("li",{key:i,staticClass:"ol-plot-vue-header-li",class:t.selected===e.alias?"ol-plot-vue-selected":"",on:{mouseover:function(n){t.mouseOverHandle(e)},mouseout:function(n){t.mouseOutHandle(e)},click:function(n){t.changeSelectedItem(e,i)}}},[n("span",{style:{background:"url(static/images/plot/"+e.src+(e.mouseover||t.selected===e.alias?"-hover":"")+".png) no-repeat"}}),t._v(" "),n("span",[t._v(t._s(e.name))])])}))])]),t._v(" "),"TextArea"!==t.selected&&"Point"!==t.selected&&""!==t.selected?n("div",[n("div",{staticClass:"plot-edit"},[n("div",{staticClass:"plot-edit-color"},[n("span",{staticClass:"stration span-background"},[t._v("背景色")]),t._v(" "),n("color-picker",{model:{value:t.backgroundColor,callback:function(e){t.backgroundColor=e},expression:"backgroundColor"}}),t._v(" "),n("span",{staticClass:"stration span-border"},[t._v("边框色")]),t._v(" "),n("color-picker",{model:{value:t.borderColor,callback:function(e){t.borderColor=e},expression:"borderColor"}})],1),t._v(" "),n("div",{staticClass:"plot-edit-title"},[t._v("边框线宽")]),t._v(" "),n("div",{staticClass:"plot-edit-line"},[n("el-slider",{attrs:{min:0,max:10,step:1},model:{value:t.borderWidth,callback:function(e){t.borderWidth=e},expression:"borderWidth"}})],1),t._v(" "),n("div",{staticClass:"plot-edit-title"},[t._v("透明度")]),t._v(" "),n("div",{staticClass:"plot-edit-line"},[n("el-slider",{attrs:{min:0,max:1,step:.1},model:{value:t.opacity,callback:function(e){t.opacity=e},expression:"opacity"}})],1)])]):"TextArea"===t.selected?n("div",{staticClass:"ol-plot-vue-workspace-text-control"},[n("div",{staticClass:"plot-edit"},[n("div",{staticClass:"plot-edit-color"},[n("span",{staticClass:"stration span-background"},[t._v("背景色")]),t._v(" "),n("color-picker",{attrs:{"color-format":"rgb"},model:{value:t.textAreaBackgroundColor,callback:function(e){t.textAreaBackgroundColor=e},expression:"textAreaBackgroundColor"}}),t._v(" "),n("span",{staticClass:"stration span-border"},[t._v("边框色")]),t._v(" "),n("color-picker",{attrs:{"color-format":"rgb"},model:{value:t.textAreaBorderColor,callback:function(e){t.textAreaBorderColor=e},expression:"textAreaBorderColor"}})],1),t._v(" "),n("div",{staticClass:"plot-edit-text"},[n("span",{staticClass:"font-color span-color"},[t._v("字体颜色")]),t._v(" "),n("color-picker",{attrs:{"color-format":"rgb"},model:{value:t.textAreaColor,callback:function(e){t.textAreaColor=e},expression:"textAreaColor"}}),t._v(" "),n("span",{staticClass:"font-size span-size"},[t._v("字体大小")]),t._v(" "),n("el-input-number",{attrs:{size:"small"},model:{value:t.textAreaFontSize,callback:function(e){t.textAreaFontSize=e},expression:"textAreaFontSize"}})],1),t._v(" "),n("div",{staticClass:"plot-edit-title"},[t._v("边框线宽")]),t._v(" "),n("div",{staticClass:"plot-edit-line"},[n("el-slider",{attrs:{min:0,max:10,step:1},model:{value:t.textAreaBorderWidth,callback:function(e){t.textAreaBorderWidth=e},expression:"textAreaBorderWidth"}})],1)])]):t._e()])])])])])},staticRenderFns:[]};var Sn=[n("VU/8")(En,Fn,!1,function(t){n("bPQ9")},null,null).exports],In=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];Sn.map(function(e){t.component(e.name,e)})};"undefined"!=typeof window&&window.Vue&&In(window.Vue);var On={version:W.a.version,install:In};n("whxO"),n("uMhA");r.a.config.productionTip=!1,r.a.use(On),new r.a({el:"#app",components:{App:N},template:"<App/>"})},bPQ9:function(t,e){},"kM+t":function(t,e){},uMhA:function(t,e){},whxO:function(t,e){}},["SrUm"]);
//# sourceMappingURL=app.efe11ff1abd2687b5fa4.js.map