webpackJsonp([1],{"46FE":function(t,e){},"7YgM":function(t,e){t.exports={name:"ol-plot-vue",version:"0.0.1",description:"a vue project for ol-plot",author:"FDD <smileFDD@gmail.com>",private:!0,scripts:{dev:"webpack-dev-server --inline --progress --config build/webpack.dev.conf.js",start:"npm run dev",lint:"eslint --ext .js,.vue src",build:"node build/build.js",gh:"npm run build && node build/deploy"},dependencies:{autosize:"^4.0.0","gh-pages":"^1.1.0","node-sass":"^4.7.2","normalize.css":"^7.0.0","observable-emit":"^1.1.1",openlayers:"^4.6.4","popper.js":"^1.12.9","sass-loader":"^6.0.6",vue:"^2.5.2","vue-color":"^2.4.3"},devDependencies:{autoprefixer:"^7.1.2","babel-core":"^6.22.1","babel-eslint":"^8.2.1","babel-helper-vue-jsx-merge-props":"^2.0.3","babel-loader":"^7.1.1","babel-plugin-syntax-jsx":"^6.18.0","babel-plugin-transform-runtime":"^6.22.0","babel-plugin-transform-vue-jsx":"^3.5.0","babel-preset-env":"^1.3.2","babel-preset-stage-2":"^6.22.0",chalk:"^2.0.1","copy-webpack-plugin":"^4.0.1","css-loader":"^0.28.0",eslint:"^4.15.0","eslint-config-standard":"^10.2.1","eslint-friendly-formatter":"^3.0.0","eslint-loader":"^1.7.1","eslint-plugin-import":"^2.7.0","eslint-plugin-node":"^5.2.0","eslint-plugin-promise":"^3.4.0","eslint-plugin-standard":"^3.0.1","eslint-plugin-vue":"^4.0.0","extract-text-webpack-plugin":"^3.0.0","file-loader":"^1.1.4","friendly-errors-webpack-plugin":"^1.6.1","html-webpack-plugin":"^2.30.1","node-notifier":"^5.1.2","optimize-css-assets-webpack-plugin":"^3.2.0",ora:"^1.2.0",portfinder:"^1.0.13","postcss-import":"^11.0.0","postcss-loader":"^2.0.8","postcss-url":"^7.2.1",rimraf:"^2.6.0",semver:"^5.3.0",shelljs:"^0.7.6","uglifyjs-webpack-plugin":"^1.1.1","url-loader":"^0.5.8","vue-loader":"^13.3.0","vue-style-loader":"^3.0.1","vue-template-compiler":"^2.5.2",webpack:"^3.6.0","webpack-bundle-analyzer":"^2.9.0","webpack-dev-server":"^2.9.1","webpack-merge":"^4.1.0"},engines:{node:">= 6.0.0",npm:">= 3.0.0"},browserslist:["> 1%","last 2 versions","not ie <= 8"]}},"8JTj":function(t,e){},"9Pv4":function(t,e){t.exports=[{id:"Point",name:"目标",alias:"Point",src:"Point"},{id:"AttackArrow",name:"进攻方向",alias:"AttackArrow",src:"AttackArrow"},{id:"AssaultDirection",name:"直箭头",alias:"AssaultDirection",src:"AssaultDirection"},{id:"FineArrow",name:"斜箭头",alias:"FineArrow",src:"FineArrow"},{id:"DoubleArrow",name:"双箭头",alias:"DoubleArrow",src:"DoubleArrow"},{id:"StraightArrow",name:"细直箭头",alias:"StraightArrow",src:"StraightArrow"},{id:"TailedAttackArrow",name:"燕尾曲箭头",alias:"TailedAttackArrow",src:"TailedAttackArrow"},{id:"SquadCombat",name:"曲箭头",alias:"SquadCombat",src:"SquadCombat"},{id:"RectAngle",name:"矩形",alias:"RectAngle",src:"RectAngle"},{id:"Circle",name:"圆形",alias:"Circle",src:"Circle"},{id:"Ellipse",name:"椭圆形",alias:"Ellipse",src:"Ellipse"},{id:"Polygon",name:"多边形",alias:"Polygon",src:"Polygon"},{id:"GatheringPlace",name:"集结地",alias:"GatheringPlace",src:"GatheringPlace"},{id:"Sector",name:"扇形",alias:"Sector",src:"Sector"},{id:"Arc",name:"弓形",alias:"Arc",src:"Arc"},{id:"FreePolygon",name:"自由面",alias:"FreePolygon",src:"FreePolygon"},{id:"FreeHandLine",name:"自由线",alias:"FreeHandLine",src:"FreeHandLine"},{id:"Polyline",name:"线",alias:"Polyline",src:"Polyline"},{id:"Curve",name:"曲线",alias:"Curve",src:"Curve"},{id:"RectFlag",name:"矩形标志旗",alias:"RectFlag",src:"RectFlag"},{id:"TriangleFlag",name:"三角标志旗",alias:"TriangleFlag",src:"TriangleFlag"},{id:"CurveFlag",name:"曲线标志旗",alias:"CurveFlag",src:"CurveFlag"},{id:"TextArea",name:"气泡",alias:"TextArea",src:"TextArea"}]},A4pt:function(t,e){},Fy3E:function(t,e){},SrUm:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={};i.d(n,"TEXTAREA",function(){return $t}),i.d(n,"ARC",function(){return Gt}),i.d(n,"CURVE",function(){return Ut}),i.d(n,"GATHERING_PLACE",function(){return jt}),i.d(n,"POLYLINE",function(){return Yt}),i.d(n,"FREEHANDLINE",function(){return Zt}),i.d(n,"POINT",function(){return qt}),i.d(n,"PENNANT",function(){return Jt}),i.d(n,"RECTANGLE",function(){return Xt}),i.d(n,"CIRCLE",function(){return Qt}),i.d(n,"ELLIPSE",function(){return Kt}),i.d(n,"LUNE",function(){return te}),i.d(n,"SECTOR",function(){return ee}),i.d(n,"CLOSED_CURVE",function(){return ie}),i.d(n,"POLYGON",function(){return ne}),i.d(n,"FREE_POLYGON",function(){return oe}),i.d(n,"ATTACK_ARROW",function(){return re}),i.d(n,"DOUBLE_ARROW",function(){return se}),i.d(n,"STRAIGHT_ARROW",function(){return ae}),i.d(n,"FINE_ARROW",function(){return le}),i.d(n,"ASSAULT_DIRECTION",function(){return ue}),i.d(n,"TAILED_SQUAD_COMBAT",function(){return pe}),i.d(n,"TAILED_ATTACK_ARROW",function(){return ce}),i.d(n,"SQUAD_COMBAT",function(){return he}),i.d(n,"RECTFLAG",function(){return fe}),i.d(n,"TRIANGLEFLAG",function(){return de}),i.d(n,"CURVEFLAG",function(){return ge});var o={};i.d(o,"Point",function(){return me}),i.d(o,"Pennant",function(){return ve}),i.d(o,"Polyline",function(){return ye}),i.d(o,"Arc",function(){return ke}),i.d(o,"Circle",function(){return Pe}),i.d(o,"Curve",function(){return we}),i.d(o,"FreeHandLine",function(){return be}),i.d(o,"RectAngle",function(){return xe}),i.d(o,"Ellipse",function(){return Ce}),i.d(o,"Lune",function(){return _e}),i.d(o,"Sector",function(){return Ae}),i.d(o,"ClosedCurve",function(){return Me}),i.d(o,"Polygon",function(){return Se}),i.d(o,"FreePolygon",function(){return Ee}),i.d(o,"AttackArrow",function(){return Te}),i.d(o,"DoubleArrow",function(){return Fe}),i.d(o,"StraightArrow",function(){return Ie}),i.d(o,"FineArrow",function(){return De}),i.d(o,"AssaultDirection",function(){return Oe}),i.d(o,"TailedAttackArrow",function(){return Le}),i.d(o,"SquadCombat",function(){return Ne}),i.d(o,"TailedSquadCombat",function(){return Ve}),i.d(o,"GatheringPlace",function(){return Be}),i.d(o,"RectFlag",function(){return ze}),i.d(o,"TriangleFlag",function(){return Re}),i.d(o,"CurveFlag",function(){return He}),i.d(o,"PlotTextBox",function(){return Wt});var r=i("7+uW"),s=i("GRLA"),a=i.n(s),l=i("Zx67"),u=i.n(l),c=i("Zrlr"),h=i.n(c),p=i("zwoO"),f=i.n(p),d=i("Pf15"),g=i.n(d),m=a.a.source.XYZ,v=a.a.Attribution,y=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h()(this,e);var i="";i=void 0!==t.attributions?t.attributions:[e.ATTRIBUTION];var n=void 0!==t.crossOrigin?t.crossOrigin:"anonymous",o=void 0!==t.url?t.url:"http://www.google.cn/maps/vt?lyrs=m@189&gl=cn&x={x}&y={y}&z={z}";return f()(this,(e.__proto__||u()(e)).call(this,{attributions:i,cacheSize:t.cacheSize,crossOrigin:n,opaque:void 0===t.opaque||t.opaque,maxZoom:void 0!==t.maxZoom?t.maxZoom:19,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,url:o,wrapX:t.wrapX}))}return g()(e,t),e}(m);y.ATTRIBUTION=new v({html:'&copy; <a href="http://www.google.cn/maps">谷歌地图</a> contributors.'});var k=y,P=i("wxAW"),w=i.n(P),b=a.a.Attribution,x=a.a.source.TileImage,C=a.a.tilegrid.TileGrid,_=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h()(this,e);var i="";i=void 0!==t.attributions?t.attributions:[e.ATTRIBUTION],t.projection=t.projection?t.projection:"EPSG:3857";var n=void 0!==t.crossOrigin?t.crossOrigin:"anonymous",o=void 0!==t.url?t.url:"http://online{0-3}.map.bdimg.com/onlinelabel/?qt=tile&x={x}&y={y}&z={z}&styles=pl&udt=20170607&scaler=1&p=1",r=t.tileUrlFunction?t.tileUrlFunction:void 0;r||(r=function(t){var i=t[0],n=t[1],r=t[2];return n<0&&(n="M"+-n),r<0&&(r="M"+-r),o.replace("{0-3}",e.getRandom(0,3)).replace("{x}",n.toString()).replace("{y}",r.toString()).replace("{z}",i.toString())});for(var s=t.levels?t.levels:19,a=[],l=0;l<s;l++)a[l]=Math.pow(2,s-1-l);var c=new C({tileSize:t.tileSize?t.tileSize:256,origin:t.origin?t.origin:[0,0],extent:t.extent?t.extent:void 0,resolutions:a,minZoom:t.minZoom&&"number"==typeof t.minZoom?t.minZoom:0});return f()(this,(e.__proto__||u()(e)).call(this,{tileGrid:c,attributions:i,cacheSize:t.cacheSize,projection:t.projection,crossOrigin:n,opaque:void 0===t.opaque||t.opaque,maxZoom:void 0!==t.maxZoom?t.maxZoom:19,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileUrlFunction:r,url:o,wrapX:t.wrapX}))}return g()(e,t),w()(e,null,[{key:"getRandom",value:function(t,e){var i=Math.random()*(e-t),n=Math.round(i+t);return n=Math.max(Math.min(n,e),t)}}]),e}(x);_.ATTRIBUTION=new b({html:'&copy; <a href="http://map.baidu.com/">百度地图</a> contributors.'});var A=_,M=a.a.layer.Group,S=(a.a.layer.Vector,a.a.source.Vector,function(t,e,i){try{var n=[];if(t)n=function t(e,i,n){var o=[];return e.length>0&&e.forEach(function(e){if(e instanceof M){var r=e.getLayers().getArray(),s=t(r,i,n);s&&(o=o.concat(s))}else e.get(i)===n&&o.push(e)}),o}(t.getLayers().getArray(),e,i);return n}catch(t){console.log(t)}}),E={data:function(){return{layers:[{layerName:"OSM",name:"OSM",icon:"./static/images/maptype_pano.png"},{layerName:"Google",name:"谷歌",icon:"./static/images/maptype_yunran.png"},{layerName:"Baidu",name:"百度",icon:"./static/images/maptype_vector.png"}],baseLayers:"",selectLayerName:"Baidu",isOver:!1}},computed:{},mounted:function(){var t=this;this.$el.addEventListener("mouseenter",function(e){t.isOver=!0},!1),this.$el.addEventListener("mouseleave",function(e){t.isOver=!1},!1)},methods:{fixStyle:function(t,e){return{background:"url("+t.icon+") 0px 0px no-repeat",zIndex:e+1}},switchLayer:function(t){if(t.layerName){this.selectLayerName=t.layerName;var e=this.getBaseLayers();e&&e.forEach(function(e){e.get("layerName")===t.layerName?e.setVisible(!0):e.setVisible(!1)})}},getBaseLayers:function(){return this.baseLayers||(this.baseLayers=S(this.$Map,"isBaseLayer",!0)),this.baseLayers}}},T={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"layer-switcher"},[i("ul",{staticClass:"layer-switcher-ul"},t._l(t.layers,function(e,n){return i("li",{key:e.layerName,staticClass:"layer-switcher-li",class:t.selectLayerName===e.layerName?"selected-item":"",style:t.fixStyle(e,n),on:{click:function(i){t.switchLayer(e)}}},[i("span",{staticClass:"layer-name"},[t._v(t._s(e.layerName))])])}))])},staticRenderFns:[]};var F=i("VU/8")(E,T,!1,function(t){i("A4pt")},"data-v-22eb29fb",null).exports,I=i("9Pv4"),D=i.n(I),O={data:function(){return{contextMenu:{itemWidth:130,itemHeight:30,items:[{name:"测面",alias:"measureArea",iconType:"iconfont",icon:"icon-cemian",iconColor:"#1AD3EF",showLine:!0},{name:"清空地图",alias:"clearMap",iconType:"iconfont",icon:"icon-shanchu",iconColor:"#F05849"},{name:"搜周边",alias:"circleSearch",iconType:"iconfont",icon:"icon-map",iconColor:"#2994EF"}]},plots:D.a,map:null}},mounted:function(){this.initMap()},methods:{initMap:function(){r.a.prototype.$Map=new a.a.Map({target:"main-map",layers:[new a.a.layer.Tile({isBaseLayer:!0,layerName:"OSM",visible:!1,source:new a.a.source.OSM}),new a.a.layer.Tile({isBaseLayer:!0,layerName:"Google",visible:!1,source:new k}),new a.a.layer.Tile({isBaseLayer:!0,layerName:"Baidu",visible:!0,source:new A({projection:"EPSG:3857",origin:[43.88955327932,12.590178885765],url:"http://online{0-3}.map.bdimg.com/onlinelabel/?qt=tile&x={x}&y={y}&z={z}&styles=pl&udt=20170607&scaler=1&p=1"})})],controls:[],view:new a.a.View({center:a.a.proj.fromLonLat([113.534501,34.441045]),zoom:4})}),r.a.prototype.$View=this.$Map.getView(),this.map=this.$Map,this.addContextMenu()},addContextMenu:function(){}},components:{layerSwitcher:F}},L={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"map-box",attrs:{id:"main-map"}},[i("layer-switcher"),t._v(" "),i("ol-plot-vue",{attrs:{map:t.map,plots:t.plots}})],1)},staticRenderFns:[]};var N=i("VU/8")(O,L,!1,function(t){i("Fy3E")},null,null).exports,V=i("7YgM"),B=i.n(V),z=i("mvHQ"),R=i.n(z),H=(i("kM+t"),i("fZjL")),W=i.n(H),$=i("vO5q"),G=i("pFYg"),U=i.n(G),j=100,Y=Math.PI/2,Z=(Math.PI,"ol-plot-vector-layer"),q="plot-helper-control-point-div",J="plot-helper-hidden-div",X={borderRadius:"2px",fontSize:"12px",outline:0,overflow:"hidden",boxSizing:"border-box",border:"1px solid #eeeeee",fontFamily:"Helvetica Neue,Helvetica,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Noto Sans CJK SC,WenQuanYi Micro Hei,Arial,sans-serif",color:"#010500",fontWeight:400,padding:"3px",fontStretch:"normal",lineHeight:"normal",textAlign:"left",marginLeft:"auto",marginRight:"auto",width:"auto",height:"auto",background:"rgb(255, 255, 255)",fontStyle:"",fontVariant:""},Q=function(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))},K=function(t){var e=0;return t&&Array.isArray(t)&&t.length>0&&t.forEach(function(i,n){n<t.length-1&&(e+=Q(i,t[n+1]))}),e},tt=function(t){return Math.pow(K(t),.99)},et=function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]},it=function(t,e,i){var n=[(t[0]+e[0])/2,(t[1]+e[1])/2],o=[n[0]-t[1]+e[1],n[1]+t[0]-e[0]],r=[(t[0]+i[0])/2,(t[1]+i[1])/2],s=[r[0]-t[1]+i[1],r[1]+t[0]-i[0]];return nt(n,o,r,s)},nt=function(t,e,i,n){if(t[1]===e[1])return[(n[0]-i[0])/(n[1]-i[1])*(t[1]-i[1])+i[0],t[1]];if(i[1]===n[1])return[(e[0]-t[0])/(e[1]-t[1])*(i[1]-t[1])+t[0],i[1]];var o=(e[0]-t[0])/(e[1]-t[1]),r=(n[0]-i[0])/(n[1]-i[1]),s=(o*t[1]-t[0]-r*i[1]+i[0])/(o-r);return[o*s-o*t[1]+t[0],s]},ot=function(t,e){var i=void 0,n=Math.asin(Math.abs(e[1]-t[1])/Q(t,e));return e[1]>=t[1]&&e[0]>=t[0]?i=n+Math.PI:e[1]>=t[1]&&e[0]<t[0]?i=2*Math.PI-n:e[1]<t[1]&&e[0]<t[0]?i=n:e[1]<t[1]&&e[0]>=t[0]&&(i=Math.PI-n),i},rt=function(t,e,i){var n=ot(e,t)-ot(e,i);return n<0?n+2*Math.PI:n},st=function(t,e,i){return(i[1]-t[1])*(e[0]-t[0])>(e[1]-t[1])*(i[0]-t[0])},at=function(t,e,i,n,o){var r=1-(t=Math.max(Math.min(t,1),0)),s=t*t,a=s*t,l=r*r,u=l*r;return[u*e[0]+3*l*t*i[0]+3*r*s*n[0]+a*o[0],u*e[1]+3*l*t*i[1]+3*r*s*n[1]+a*o[1]]},lt=function(t,e,i,n,o){var r=ot(t,e),s=o?r+i:r-i,a=n*Math.cos(s),l=n*Math.sin(s);return[e[0]+a,e[1]+l]},ut=function(t,e,i,n){var o=null,r=null,s=[],a=n-i;a=a<0?a+2*Math.PI:a;for(var l=0;l<=100;l++){var u=i+a*l/100;o=t[0]+e*Math.cos(u),r=t[1]+e*Math.sin(u),s.push([o,r])}return s},ct=function(t,e,i,n){var o=ht(e,i,n),r=null,s=null,a=null,l=Math.sqrt(o[0]*o[0]+o[1]*o[1]),u=o[0]/l,c=o[1]/l,h=Q(e,i),p=Q(i,n);return l>1e-4?st(e,i,n)?(a=t*h,r=[i[0]-a*c,i[1]+a*u],a=t*p,s=[i[0]+a*c,i[1]-a*u]):(a=t*h,r=[i[0]+a*c,i[1]-a*u],a=t*p,s=[i[0]-a*c,i[1]+a*u]):(r=[i[0]+t*(e[0]-i[0]),i[1]+t*(e[1]-i[1])],s=[i[0]+t*(n[0]-i[0]),i[1]+t*(n[1]-i[1])]),[r,s]},ht=function(t,e,i){var n=t[0]-e[0],o=t[1]-e[1],r=Math.sqrt(n*n+o*o);n/=r,o/=r;var s=i[0]-e[0],a=i[1]-e[1],l=Math.sqrt(s*s+a*a);return[n+(s/=l),o+(a/=l)]},pt=function(t,e){for(var i=null,n=null,o=[function(t,e){var i=[t[0],t[1],t[2],null,null],n=i[0],o=i[1],r=i[2],s=i[3],a=i[4],l=ct(0,n,o,r)[0],u=ht(n,o,r);if(Math.sqrt(u[0]*u[0]+u[1]*u[1])>1e-4){var c=et(n,o),h=n[0]-c[0],p=n[1]-c[1],f=2/Q(n,o),d=-f*p,g=f*h,m=d*d-g*g,v=2*d*g,y=g*g-d*d,k=l[0]-c[0],P=l[1]-c[1];s=c[0]+m*k+v*P,a=c[1]+v*k+y*P}else s=n[0]+e*(o[0]-n[0]),a=n[1]+e*(o[1]-n[1]);return[s,a]}(e,t)],r=[],s=0;s<e.length-2;s++){var a=[e[s],e[s+1],e[s+2]],l=ct(t,i=a[0],n=a[1],a[2]);o=o.concat(l)}var u=function(t,e){var i=t.length,n=t[i-3],o=t[i-2],r=t[i-1],s=ct(0,n,o,r)[1],a=ht(n,o,r),l=null,u=null;if(Math.sqrt(a[0]*a[0]+a[1]*a[1])>1e-4){var c=et(o,r),h=r[0]-c[0],p=r[1]-c[1],f=2/Q(o,r),d=-f*p,g=f*h,m=d*d-g*g,v=2*d*g,y=g*g-d*d,k=s[0]-c[0],P=s[1]-c[1];l=c[0]+m*k+v*P,u=c[1]+v*k+y*P}else l=r[0]+e*(o[0]-r[0]),u=r[1]+e*(o[1]-r[1]);return[l,u]}(e,t);u&&o.push(u);for(var c=0;c<e.length-1;c++){i=e[c],n=e[c+1],r.push(i);for(var h=0;h<j;h++){var p=at(h/j,i,o[2*c],o[2*c+1],n);r.push(p)}r.push(n)}return r},ft=function(t){if(t.length<=2)return t;for(var e=[],i=t.length-1,n=0;n<=1;n+=.01){for(var o=0,r=0,s=0;s<=i;s++){var a=gt(i,s),l=Math.pow(n,s),u=Math.pow(1-n,i-s);o+=a*l*u*t[s][0],r+=a*l*u*t[s][1]}e.push([o,r])}return e.push(t[i]),e},dt=function(t){var e=1;switch(t){case t<=1:e=1;break;case 2===t:e=2;break;case 3===t:e=6;break;case 24===t:e=24;break;case 5===t:e=120;break;default:for(var i=1;i<=t;i++)e*=i}return e},gt=function(t,e){return dt(t)/(dt(e)*dt(t-e))},mt=function(t){if(t.length<=2)return t;var e=[],i=t.length-2-1;e.push(t[0]);for(var n=0;n<=i;n++)for(var o=0;o<=1;o+=.05){for(var r=0,s=0,a=0;a<=2;a++){var l=vt(a,o);r+=l*t[n+a][0],s+=l*t[n+a][1]}e.push([r,s])}return e.push(t[t.length-1]),e},vt=function(t,e){var i=0;return 0===t?i=Math.pow(e-1,2)/2:1===t?i=(-2*Math.pow(e,2)+2*e+1)/2:2===t&&(i=Math.pow(e,2)/2),i},yt=function(){for(var t=[],e="0123456789abcdef",i=0;i<36;i++)t[i]=e.substr(Math.floor(16*Math.random()),1);return t[14]="4",t[19]=e.substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-",t.join("")},kt=function(t){var e=void 0===t?"undefined":U()(t);return null!==t&&("object"===e||"function"===e)};var Pt=a.a.layer.Group,wt=a.a.layer.Vector,bt=a.a.source.Vector,xt=a.a.style.Style,Ct=a.a.style.Stroke,_t=a.a.style.Circle,At=a.a.style.Fill,Mt=function(t,e){try{var i=null;if(t){var n=t.getLayers().getArray();i=St(n,"layerName",e)}return i}catch(t){console.log(t)}},St=function t(e,i,n){var o=null;return e.length>0&&e.every(function(e){if(e instanceof Pt){var r=e.getLayers().getArray();return!(o=t(r,i,n))}return e.get(i)!==n||(o=e,!1)}),o},Et=function(t,e,i){try{if(t){var n=Mt(t,e);if(n instanceof wt||(n=null),n||i&&i.create&&(n=new wt({layerName:e,params:i,layerType:"vector",source:new bt({wrapX:!1}),style:new xt({fill:new At({color:"rgba(67, 110, 238, 0.4)"}),stroke:new Ct({color:"#4781d9",width:2}),image:new _t({radius:7,fill:new At({color:"#ffcc33"})})})})),t&&n){i&&i.hasOwnProperty("selectable")&&n.set("selectable",i.selectable);var o=Mt(t,e);o&&o instanceof wt||t.addLayer(n)}return n}}catch(t){console.log(t)}},Tt=i("JnrT"),Ft=i.n(Tt),It=/([\:\-\_]+(.))/g,Dt=/^moz([A-Z])/,Ot=function(t){return"string"==typeof t?document.getElementById(t):t},Lt=function(t){return t.replace(It,function(t,e,i,n){return n?i.toUpperCase():i}).replace(Dt,"Moz$1")},Nt=function(){if(document.addEventListener)return function(t,e,i){t&&e&&i&&t.addEventListener(e,i,!1)}}(),Vt=function(){if(document.removeEventListener)return function(t,e,i){t&&e&&t.removeEventListener(e,i,!1)}}();function Bt(t,e){if(!t||!e)return!1;if(-1!==e.indexOf(" "))throw new Error("className should not contain space.");return t.classList?t.classList.contains(e):(" "+t.className+" ").indexOf(" "+e+" ")>-1}function zt(t,e){if(!t||!e)return null;"float"===(e=Lt(e))&&(e="cssFloat");try{var i=document.defaultView.getComputedStyle(t,"");return t.style[e]||i?i[e]:null}catch(i){return t.style[e]}}function Rt(t,e,i){if(t&&e)if("object"===(void 0===e?"undefined":U()(e)))for(var n in e)e.hasOwnProperty(n)&&Rt(t,n,e[n]);else"opacity"===(e=Lt(e))?t.style.filter=isNaN(i)?"":"alpha(opacity="+100*i+")":t.style[e]=i}var Ht=a.a.interaction.DragPan,Wt=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h()(this,e);var i=[t.id,t.element,t.offset,t.stopEvent,t.positioning,t.insertFirst,t.autoPan,t.autoPanAnimation,t.autoPanMargin,t.className?t.className:"ol-plot-text-editor"],n=i[0],o=i[1],r=i[2],s=i[3],a=i[4],l=i[5],c=i[6],p=i[7],d=i[8],g=i[9],m=f()(this,(e.__proto__||u()(e)).call(this,{id:n,element:o,stopEvent:s,insertFirst:l,autoPan:c,autoPanAnimation:p,autoPanMargin:d,className:g}));return m.setOffset(void 0!==r?r:[0,0]),m.setPositioning(void 0!==a?a:"center-center"),m.mapDragPan=void 0,m.isClick_=!1,m.dragging_=!1,m.isFocus_=!1,m.options_=t,m._position=t.position&&t.position.length>0?t.position:[],m.handleTimer_=null,m.currentPixel_=[],m.createTextContent(t),m}return g()(e,t),w()(e,[{key:"createTextContent",value:function(t){var e=t.className||"ol-plot-text-editor",i=document.createElement("textarea");i.className=e,i.style.width=t.width+"px",i.style.height=t.height+"px",i.style.minHeight=t.minHeight+"px",i.setAttribute("id",t.id),i.setAttribute("autofocus",!0),Ft()(i),Nt(i,"focus",this.handleFocus_.bind(this)),Nt(i,"blur",this.handleBlur_.bind(this)),Nt(i,"click",this.handleClick_.bind(this)),Nt(i,"mousedown",this.handleDragStart_.bind(this)),Nt(window,"mouseup",this.handleDragEnd_.bind(this)),this.set("isPlotText",!0),this.setElement(i),this.createCloseButton(t),this.createResizeButton(t),this.setPosition(this._position),this.dispatchEvent("textBoxDrawEnd",{overlay:this,element:i,uuid:t.id})}},{key:"getTextAreaFromContent_",value:function(){var t="",e=Array.prototype.slice.call(this.element&&this.element.children,0);return e.length>0&&e.every(function(e){return 1!==e.nodeType||"textarea"!==e.nodeName.toLowerCase()||(t=e,!1)}),t}},{key:"createCloseButton",value:function(t){var e=document.createElement("span");e.className="ol-plot-text-editor-close",e.setAttribute("data-id",t.id),Vt(e,"click",this.closeCurrentPlotText.bind(this)),Nt(e,"click",this.closeCurrentPlotText.bind(this)),this.element.appendChild(e)}},{key:"createResizeButton",value:function(t){var e=document.createElement("span");e.className="ol-plot-text-editor-resize",e.setAttribute("data-id",t.id),Vt(e,"mousedown",this.handleResizeMouseDown_.bind(this)),Vt(e,"mousemove",this.handleResizeMouseMove_.bind(this)),Nt(e,"mousedown",this.handleResizeMouseDown_.bind(this)),Nt(e,"mousemove",this.handleResizeMouseMove_.bind(this)),this.element.appendChild(e)}},{key:"resizeButtonMoveHandler_",value:function(t){var e=t.pixel,i=this.getTextAreaFromContent_();if(!(e.length<1||this.currentPixel_.length<1)&&i){var n=[e[0]-this.currentPixel_[0],e[1]-this.currentPixel_[1]],o=[i.offsetWidth,i.offsetHeight],r=o[1]+2*n[1];Rt(i,"width",o[0]+2*n[0]+"px"),Rt(i,"height",r+"px"),this.currentPixel_=e,this.getMap().render()}}},{key:"handleResizeMouseMove_",value:function(t){t.stopImmediatePropagation()}},{key:"handleResizeMouseDown_",value:function(t){this.getMap()&&(this.currentPixel_=[t.x,t.y],this.getMap().on("pointermove",this.resizeButtonMoveHandler_,this),Nt(this.getMap().getViewport(),"mouseup",this.handleResizeMouseUp_.bind(this)))}},{key:"handleResizeMouseUp_",value:function(t){this.getMap()&&(this.getMap().un("pointermove",this.resizeButtonMoveHandler_,this),Vt(this.getMap().getViewport(),"mouseup",this.handleResizeMouseUp_.bind(this)),this.currentPixel_=[])}},{key:"closeCurrentPlotText",value:function(t){if(this.getMap()&&t&&Bt(t.target,"ol-plot-text-editor-close")){var e=t.target.getAttribute("data-id");if(e){var i=this.getMap().getOverlayById(e);i&&this.getMap().removeOverlay(i)}}}},{key:"handleFocus_",value:function(){this.isFocus_=!0,this.getMap()&&(this.getMap().set("activeTextArea",this),this.getMap().dispatchEvent("activeTextArea"))}},{key:"handleBlur_",value:function(){this.isFocus_=!1,this.getMap()&&(this.getMap().set("activeTextArea",null),this.getMap().set("disActiveTextArea",this),this.getMap().dispatchEvent("disActiveTextArea"))}},{key:"handleDragStart_",value:function(t){var e=this;this.getMap()&&!this.dragging_&&this.isMoveModel()&&this.isFocus_&&(this.handleTimer_=window.setTimeout(function(){window.clearTimeout(e.handleTimer_),e.handleTimer_=null,e.isClick_||(e.dragging_=!0,e.disableMapDragPan(),e.preCursor_=e.element.style.cursor,Nt(e.getMap().getViewport(),"mousemove",e.handleDragDrag_.bind(e)),Nt(e.element,"mouseup",e.handleDragEnd_.bind(e)))},300))}},{key:"handleDragDrag_",value:function(t){this.dragging_&&(this.element.style.cursor="move",this._position=this.getMap().getCoordinateFromPixel([t.clientX,t.clientY]),this.setPosition(this._position))}},{key:"handleDragEnd_",value:function(t){this.isClick_=!1,window.clearTimeout(this.handleTimer_),this.handleTimer_=null,this.dragging_&&this.isFocus_&&(this.dragging_=!1,this.enableMapDragPan(),this.element.style.cursor=this.preCursor_,Vt(this.getMap().getViewport(),"mousemove",this.handleDragDrag_.bind(this)),Vt(this.element,"mouseup",this.handleDragEnd_.bind(this)))}},{key:"handleClick_",value:function(t){t.target===this.element?this.isClick_=!0:this.isClick_=!1}},{key:"isMoveModel",value:function(){return window.getSelection().getRangeAt(0).collapsed}},{key:"setStyle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.getTextAreaFromContent_();if(e)for(var i in t)t[i]&&Rt(e,i,t[i])}},{key:"getStyle",value:function(){var t={},e=this.getTextAreaFromContent_();if(e)for(var i in X)t[i]=zt(e,i);return t}},{key:"setValue",value:function(t){var e=this.getTextAreaFromContent_();e&&(e.value=t,t&&Ft.a.update(e),this.getMap().render())}},{key:"getValue",value:function(){var t=this.getTextAreaFromContent_();return t?t.value:""}},{key:"getWidth",value:function(){var t=this.getTextAreaFromContent_();return t&&t.offsetWidth?t.offsetWidth:0}},{key:"getHeight",value:function(){var t=this.getTextAreaFromContent_();return t&&t.offsetHeight?t.offsetHeight:0}},{key:"enableMapDragPan",value:function(){var t=this.getMap();t&&this.mapDragPan&&this.mapDragPan instanceof Ht&&(t.addInteraction(this.mapDragPan),delete this.mapDragPan)}},{key:"disableMapDragPan",value:function(){var t=this,e=this.getMap();e&&e.getInteractions().getArray().every(function(i){return!(i instanceof Ht)||(t.mapDragPan=i,e.removeInteraction(i),!1)})}},{key:"setMap",value:function(t){a.a.Overlay.prototype.setMap.call(this,t),t&&t instanceof a.a.Map&&(this.setStyle(function t(e,i){for(var n in i)kt(i[n])&&kt(e[n])?t(e[n],i[n]):e[n]=i[n];return e}(X,this.options_.style)),this.setValue(this.options_.value))}}]),e}(a.a.Overlay),$t="TextArea",Gt="Arc",Ut="Curve",jt="GatheringPlace",Yt="Polyline",Zt="FreeHandLine",qt="Point",Jt="Pennant",Xt="RectAngle",Qt="Circle",Kt="Ellipse",te="Lune",ee="Sector",ie="ClosedCurve",ne="Polygon",oe="FreePolygon",re="AttackArrow",se="DoubleArrow",ae="StraightArrow",le="FineArrow",ue="AssaultDirection",ce="TailedAttackArrow",he="SquadCombat",pe="TailedSquadCombat",fe="RectFlag",de="TriangleFlag",ge="CurveFlag",me=function(t){function e(t,i,n){h()(this,e);var o=f()(this,(e.__proto__||u()(e)).call(this,[]));return o.type=qt,o.options=n||{},o.set("params",o.options),o.fixPointCount=1,i&&i.length>0?o.setPoints(i):t&&t.length>0&&o.setCoordinates(t),o}return g()(e,t),w()(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){var t=this.points[0];this.setCoordinates(t)}},{key:"setMap",value:function(t){if(!(t&&t instanceof a.a.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(a.a.geom.Point),ve=function(t){function e(t,i,n){h()(this,e);var o=f()(this,(e.__proto__||u()(e)).call(this,[]));return o.type=Jt,o.options=n||{},o.set("params",o.options),i&&i.length>0?o.setPoints(i):t&&t.length>0&&o.setCoordinates(t),o}return g()(e,t),w()(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){this.setCoordinates(this.points)}},{key:"setMap",value:function(t){if(!(t&&t instanceof a.a.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(a.a.geom.Point),ye=function(t){function e(t,i,n){h()(this,e);var o=f()(this,(e.__proto__||u()(e)).call(this,[]));return o.type=Yt,o.freehand=!1,o.set("params",n),i&&i.length>0?o.setPoints(i):t&&t.length>0&&o.setCoordinates(t),o}return g()(e,t),w()(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){this.setCoordinates(this.points)}},{key:"setMap",value:function(t){if(!(t&&t instanceof a.a.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(a.a.geom.LineString),ke=function(t){function e(t,i,n){h()(this,e);var o=f()(this,(e.__proto__||u()(e)).call(this,[]));return o.type=Gt,o.fixPointCount=3,o.set("params",n),i&&i.length>0?o.setPoints(i):t&&t.length>0&&o.setCoordinates(t),o}return g()(e,t),w()(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){var t=this.getPointCount();if(!(t<2))if(2===t)this.setCoordinates(this.points);else{var e=[this.points[0],this.points[1],this.points[2],null,null],i=e[0],n=e[1],o=e[2],r=e[3],s=e[4],a=it(i,n,o),l=Q(i,a),u=ot(i,a),c=ot(n,a);st(i,n,o)?(r=c,s=u):(r=u,s=c),this.setCoordinates(ut(a,l,r,s))}}},{key:"setMap",value:function(t){if(!(t&&t instanceof a.a.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(a.a.geom.LineString),Pe=function(t){function e(t,i,n){h()(this,e);var o=f()(this,(e.__proto__||u()(e)).call(this,[]));return o.type=Qt,o.fixPointCount=2,o.set("params",n),i&&i.length>0?o.setPoints(i):t&&t.length>0&&o.setCoordinates(t),o}return g()(e,t),w()(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){if(this.getPointCount()<2)return!1;var t=this.points[0],e=Q(t,this.points[1]);this.setCoordinates([this.generatePoints(t,e)])}},{key:"generatePoints",value:function(t,e){for(var i=null,n=null,o=null,r=[],s=0;s<=100;s++)o=2*Math.PI*s/100,i=t[0]+e*Math.cos(o),n=t[1]+e*Math.sin(o),r.push([i,n]);return r}},{key:"setMap",value:function(t){if(!(t&&t instanceof a.a.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(a.a.geom.Polygon),we=function(t){function e(t,i,n){h()(this,e);var o=f()(this,(e.__proto__||u()(e)).call(this,[]));return o.type=Ut,o.t=.3,o.set("params",n),i&&i.length>0?o.setPoints(i):t&&t.length>0&&o.setCoordinates(t),o}return g()(e,t),w()(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){var t=this.getPointCount();if(t<2)return!1;if(2===t)this.setCoordinates(this.points);else{var e=pt(this.t,this.points);this.setCoordinates(e)}}},{key:"setMap",value:function(t){if(!(t&&t instanceof a.a.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(a.a.geom.LineString),be=function(t){function e(t,i,n){h()(this,e);var o=f()(this,(e.__proto__||u()(e)).call(this,[]));return o.type=Zt,o.freehand=!0,o.set("params",n),i&&i.length>0?o.setPoints(i):t&&t.length>0&&o.setCoordinates(t),o}return g()(e,t),w()(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){this.setCoordinates(this.points)}},{key:"setMap",value:function(t){if(!(t&&t instanceof a.a.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(a.a.geom.LineString),xe=function(t){function e(t,i,n){h()(this,e);var o=f()(this,(e.__proto__||u()(e)).call(this,[]));return o.type=Xt,o.fixPointCount=2,o.set("params",n),o.isFill=!1!==n.isFill||n.isFill,i&&i.length>0?o.setPoints(i):t&&t.length>0&&o.setCoordinates(t),o}return g()(e,t),w()(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){if(2===this.points.length){var t=[];if(this.isFill){var e=a.a.extent.boundingExtent(this.points);t=a.a.geom.Polygon.fromExtent(e).getCoordinates()}else{var i=this.points[0],n=this.points[1];t=[i,[i[0],n[1]],n,[n[0],i[1]],i]}this.setCoordinates(t)}}},{key:"setMap",value:function(t){if(!(t&&t instanceof a.a.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(a.a.geom.Polygon),Ce=function(t){function e(t,i,n){h()(this,e);var o=f()(this,(e.__proto__||u()(e)).call(this,[]));return o.type=Kt,o.fixPointCount=2,o.set("params",n),i&&i.length>0?o.setPoints(i):t&&t.length>0&&o.setCoordinates(t),o}return g()(e,t),w()(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){if(this.getPointCount()<2)return!1;var t=[this.points[0],this.points[1]],e=t[0],i=t[1],n=et(e,i),o=Math.abs((e[0]-i[0])/2),r=Math.abs((e[1]-i[1])/2),s=this.generatePoints(n,o,r);this.setCoordinates([s])}},{key:"generatePoints",value:function(t,e,i){for(var n=null,o=null,r=null,s=[],a=0;a<=j;a++)r=2*Math.PI*a/j,n=t[0]+e*Math.cos(r),o=t[1]+i*Math.sin(r),s.push([n,o]);return s}},{key:"setMap",value:function(t){if(!(t&&t instanceof a.a.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(a.a.geom.Polygon),_e=function(t){function e(t,i,n){h()(this,e);var o=f()(this,(e.__proto__||u()(e)).call(this,[]));return o.type=te,o.fixPointCount=3,o.set("params",n),i&&i.length>0?o.setPoints(i):t&&t.length>0&&o.setCoordinates(t),o}return g()(e,t),w()(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){if(this.getPointCount()<2)return!1;var t=this.getPoints();if(2===this.getPointCount()){var e=et(t[0],t[1]),i=Q(t[0],e),n=lt(t[0],e,Y,i);t.push(n)}var o=[t[0],t[1],t[2],void 0,void 0],r=o[0],s=o[1],a=o[2],l=o[3],u=o[4],c=it(r,s,a),h=Q(r,c),p=ot(r,c),f=ot(s,c);st(r,s,a)?(l=f,u=p):(l=p,u=f),(t=ut(c,h,l,u)).push(t[0]),this.setCoordinates([t])}},{key:"setMap",value:function(t){if(!(t&&t instanceof a.a.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(a.a.geom.Polygon),Ae=function(t){function e(t,i,n){h()(this,e);var o=f()(this,(e.__proto__||u()(e)).call(this,[]));return o.type=ee,o.fixPointCount=3,o.set("params",n),i&&i.length>0?o.setPoints(i):t&&t.length>0&&o.setCoordinates(t),o}return g()(e,t),w()(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){var t=this.getPointCount();if(t<2)return!1;if(2===t)this.setCoordinates([this.points]);else{var e=this.getPoints(),i=[e[0],e[1],e[2]],n=i[0],o=i[1],r=i[2],s=Q(o,n),a=ot(o,n),l=ot(r,n),u=ut(n,s,a,l);u.push(n,u[0]),this.setCoordinates([u])}}},{key:"setMap",value:function(t){if(!(t&&t instanceof a.a.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(a.a.geom.Polygon),Me=function(t){function e(t,i,n){h()(this,e);var o=f()(this,(e.__proto__||u()(e)).call(this,[]));return o.type=ie,o.t=.3,o.set("params",n),i&&i.length>0?o.setPoints(i):t&&t.length>0&&o.setCoordinates(t),o}return g()(e,t),w()(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){var t=this.getPointCount();if(t<2)return!1;if(2===t)this.setCoordinates([this.points]);else{var e=this.getPoints();e.push(e[0],e[1]);for(var i=[],n=[],o=0;o<e.length-2;o++){var r=ct(this.t,e[o],e[o+1],e[o+2]);i=i.concat(r)}var s=i.length;i=[i[s-1]].concat(i.slice(0,s-1));for(var a=0;a<e.length-2;a++){var l=e[a],u=e[a+1];n.push(l);for(var c=0;c<=j;c++){var h=at(c/j,l,i[2*a],i[2*a+1],u);n.push(h)}n.push(u)}this.setCoordinates([n])}}},{key:"setMap",value:function(t){if(!(t&&t instanceof a.a.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(a.a.geom.Polygon),Se=function(t){function e(t,i,n){h()(this,e);var o=f()(this,(e.__proto__||u()(e)).call(this,[]));return o.type=ne,o.set("params",n),i&&i.length>0?o.setPoints(i):t&&t.length>0&&o.setCoordinates(t),o}return g()(e,t),w()(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){if(this.getPointCount()<2)return!1;this.setCoordinates([this.points])}},{key:"setMap",value:function(t){if(!(t&&t instanceof a.a.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(a.a.geom.Polygon),Ee=function(t){function e(t,i,n){h()(this,e);var o=f()(this,(e.__proto__||u()(e)).call(this,[]));return o.type=oe,o.freehand=!0,o.set("params",n),i&&i.length>0?o.setPoints(i):t&&t.length>0&&o.setCoordinates(t),o}return g()(e,t),w()(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){this.setCoordinates([this.points])}},{key:"setMap",value:function(t){if(!(t&&t instanceof a.a.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(a.a.geom.Polygon),Te=function(t){function e(t,i,n){h()(this,e);var o=f()(this,(e.__proto__||u()(e)).call(this,[]));return o.type=re,o.headHeightFactor=.18,o.headWidthFactor=.3,o.neckHeightFactor=.85,o.neckWidthFactor=.15,o.headTailFactor=.8,o.set("params",n),i&&i.length>0?o.setPoints(i):t&&t.length>0&&o.setCoordinates(t),o}return g()(e,t),w()(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){try{var t=this.getPointCount();if(t<2)return!1;if(2===t)this.setCoordinates([this.points]);else{var e=this.getPoints(),i=[e[0],e[1]],n=i[0],o=i[1];st(e[0],e[1],e[2])&&(n=e[1],o=e[0]);var r=[et(n,o)].concat(e.slice(2)),s=this.getArrowHeadPoints(r,n,o),a=[s[0],s[4]],l=a[0],u=a[1],c=Q(n,o)/tt(r),h=this.getArrowBodyPoints(r,l,u,c),p=h.length,f=[n].concat(h.slice(0,p/2));f.push(l);var d=[o].concat(h.slice(p/2,p));d.push(u),f=mt(f),d=mt(d),this.setCoordinates([f.concat(s,d.reverse())])}}catch(t){console.log(t)}}},{key:"getArrowPoints",value:function(t,e,i,n){var o=et(t,e),r=Q(o,i),s=lt(i,o,0,.3*r,!0),a=lt(i,o,0,.5*r,!0),l=[o,s=lt(o,s,Y,r/5,n),a=lt(o,a,Y,r/4,n),i],u=this.getArrowHeadPoints(l);if(!(u&&Array.isArray(u)&&u.length>0))throw new Error("插值出错");var c=[u[0],u[4]],h=c[0],p=c[1],f=Q(t,e)/tt(l)/2,d=this.getArrowBodyPoints(l,h,p,f);if(d){var g=d.length,m=d.slice(0,g/2),v=d.slice(g/2,g);return m.push(h),v.push(p),(m=m.reverse()).push(e),(v=v.reverse()).push(t),m.reverse().concat(u,v)}}},{key:"getArrowHeadPoints",value:function(t,e,i){try{var n=tt(t),o=n*this.headHeightFactor,r=t[t.length-1];n=Q(r,t[t.length-2]);var s=Q(e,i);o>s*this.headTailFactor&&(o=s*this.headTailFactor);var a=o*this.headWidthFactor,l=o*this.neckWidthFactor,u=(o=o>n?n:o)*this.neckHeightFactor,c=lt(t[t.length-2],r,0,o,!0),h=lt(t[t.length-2],r,0,u,!0),p=lt(r,c,Y,a,!1),f=lt(r,c,Y,a,!0);return[lt(r,h,Y,l,!1),p,r,f,lt(r,h,Y,l,!0)]}catch(t){console.log(t)}}},{key:"getArrowBodyPoints",value:function(t,e,i,n){for(var o=K(t),r=tt(t)*n,s=(r-Q(e,i))/2,a=0,l=[],u=[],c=1;c<t.length-1;c++){var h=rt(t[c-1],t[c],t[c+1])/2,p=(r/2-(a+=Q(t[c-1],t[c]))/o*s)/Math.sin(h),f=lt(t[c-1],t[c],Math.PI-h,p,!0),d=lt(t[c-1],t[c],h,p,!1);l.push(f),u.push(d)}return l.concat(u)}},{key:"getTempPoint4",value:function(t,e,i){try{var n=et(t,e),o=Q(n,i),r=rt(t,n,i),s=void 0,a=void 0,l=void 0,u=void 0;return r<Y?(a=o*Math.sin(r),l=o*Math.cos(r),u=lt(t,n,Y,a,!1),s=lt(n,u,Y,l,!0)):r>=Y&&r<Math.PI?(a=o*Math.sin(Math.PI-r),l=o*Math.cos(Math.PI-r),u=lt(t,n,Y,a,!1),s=lt(n,u,Y,l,!1)):r>=Math.PI&&r<1.5*Math.PI?(a=o*Math.sin(r-Math.PI),l=o*Math.cos(r-Math.PI),u=lt(t,n,Y,a,!0),s=lt(n,u,Y,l,!0)):(a=o*Math.sin(2*Math.PI-r),l=o*Math.cos(2*Math.PI-r),u=lt(t,n,Y,a,!0),s=lt(n,u,Y,l,!1)),s}catch(t){console.log(t)}}},{key:"setMap",value:function(t){if(!(t&&t instanceof a.a.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(a.a.geom.Polygon),Fe=function(t){function e(t,i,n){h()(this,e);var o=f()(this,(e.__proto__||u()(e)).call(this,[]));return o.type=se,o.headHeightFactor=.25,o.headWidthFactor=.3,o.neckHeightFactor=.85,o.neckWidthFactor=.15,o.connPoint=null,o.tempPoint4=null,o.fixPointCount=4,o.set("params",n),i&&i.length>0?o.setPoints(i):t&&t.length>0&&o.setCoordinates(t),o}return g()(e,t),w()(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){try{var t=this.getPointCount();if(t<2)return!1;if(2===t)return this.setCoordinates([this.points]),!1;if(t>2){var e=[this.points[0],this.points[1],this.points[2]],i=e[0],n=e[1],o=e[2];3===t?(this.tempPoint4=this.getTempPoint4(i,n,o),this.connPoint=et(i,n)):4===t?(this.tempPoint4=this.points[3],this.connPoint=et(i,n)):(this.tempPoint4=this.points[3],this.connPoint=this.points[4]);var r=void 0,s=void 0;st(i,n,o)?(r=this.getArrowPoints(i,this.connPoint,this.tempPoint4,!1),s=this.getArrowPoints(this.connPoint,n,o,!0)):(r=this.getArrowPoints(n,this.connPoint,o,!1),s=this.getArrowPoints(this.connPoint,i,this.tempPoint4,!0));var a=r.length,l=(a-5)/2,u=r.slice(0,l),c=r.slice(l,l+5),h=r.slice(l+5,a),p=s.slice(0,l),f=s.slice(l,l+5),d=s.slice(l+5,a);p=ft(p);var g=ft(d.concat(u.slice(1)));h=ft(h);var m=p.concat(f,g,c,h);this.setCoordinates([m])}}catch(t){console.log(t)}}},{key:"getArrowPoints",value:function(t,e,i,n){var o=et(t,e),r=Q(o,i),s=lt(i,o,0,.3*r,!0),a=lt(i,o,0,.5*r,!0),l=[o,s=lt(o,s,Y,r/5,n),a=lt(o,a,Y,r/4,n),i],u=this.getArrowHeadPoints(l);if(!(u&&Array.isArray(u)&&u.length>0))throw new Error("插值出错");var c=[u[0],u[4]],h=c[0],p=c[1],f=Q(t,e)/tt(l)/2,d=this.getArrowBodyPoints(l,h,p,f);if(d){var g=d.length,m=d.slice(0,g/2),v=d.slice(g/2,g);return m.push(h),v.push(p),(m=m.reverse()).push(e),(v=v.reverse()).push(t),m.reverse().concat(u,v)}}},{key:"getArrowHeadPoints",value:function(t){try{var e=tt(t)*this.headHeightFactor,i=t[t.length-1],n=e*this.headWidthFactor,o=e*this.neckWidthFactor,r=e*this.neckHeightFactor,s=lt(t[t.length-2],i,0,e,!0),a=lt(t[t.length-2],i,0,r,!0),l=lt(i,s,Y,n,!1),u=lt(i,s,Y,n,!0);return[lt(i,a,Y,o,!1),l,i,u,lt(i,a,Y,o,!0)]}catch(t){console.log(t)}}},{key:"getArrowBodyPoints",value:function(t,e,i,n){for(var o=K(t),r=tt(t)*n,s=(r-Q(e,i))/2,a=0,l=[],u=[],c=1;c<t.length-1;c++){var h=rt(t[c-1],t[c],t[c+1])/2,p=(r/2-(a+=Q(t[c-1],t[c]))/o*s)/Math.sin(h),f=lt(t[c-1],t[c],Math.PI-h,p,!0),d=lt(t[c-1],t[c],h,p,!1);l.push(f),u.push(d)}return l.concat(u)}},{key:"getTempPoint4",value:function(t,e,i){try{var n=et(t,e),o=Q(n,i),r=rt(t,n,i),s=void 0,a=void 0,l=void 0,u=void 0;return r<Y?(a=o*Math.sin(r),l=o*Math.cos(r),u=lt(t,n,Y,a,!1),s=lt(n,u,Y,l,!0)):r>=Y&&r<Math.PI?(a=o*Math.sin(Math.PI-r),l=o*Math.cos(Math.PI-r),u=lt(t,n,Y,a,!1),s=lt(n,u,Y,l,!1)):r>=Math.PI&&r<1.5*Math.PI?(a=o*Math.sin(r-Math.PI),l=o*Math.cos(r-Math.PI),u=lt(t,n,Y,a,!0),s=lt(n,u,Y,l,!0)):(a=o*Math.sin(2*Math.PI-r),l=o*Math.cos(2*Math.PI-r),u=lt(t,n,Y,a,!0),s=lt(n,u,Y,l,!1)),s}catch(t){console.log(t)}}},{key:"setMap",value:function(t){if(!(t&&t instanceof a.a.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){3===this.getPointCount()&&null!==this.tempPoint4&&this.points.push(this.tempPoint4),null!==this.connPoint&&this.points.push(this.connPoint)}}]),e}(a.a.geom.Polygon),Ie=function(t){function e(t,i,n){h()(this,e);var o=f()(this,(e.__proto__||u()(e)).call(this,[]));return o.type=ae,o.fixPointCount=2,o.maxArrowLength=3e6,o.arrowLengthScale=5,o.set("params",n),i&&i.length>0?o.setPoints(i):t&&t.length>0&&o.setCoordinates(t),o}return g()(e,t),w()(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){try{if(this.getPointCount()<2)return!1;var t=this.getPoints(),e=[t[0],t[1]],i=e[0],n=e[1],o=Q(i,n)/this.arrowLengthScale;o=o>this.maxArrowLength?this.maxArrowLength:o;var r=lt(i,n,Math.PI/6,o,!1),s=lt(i,n,Math.PI/6,o,!0);this.setCoordinates([i,n,r,n,s])}catch(t){console.log(t)}}},{key:"setMap",value:function(t){if(!(t&&t instanceof a.a.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(a.a.geom.LineString),De=function(t){function e(t,i,n){h()(this,e);var o=f()(this,(e.__proto__||u()(e)).call(this,[]));return o.type=le,o.tailWidthFactor=.1,o.neckWidthFactor=.2,o.headWidthFactor=.25,o.headAngle=Math.PI/8.5,o.neckAngle=Math.PI/13,o.fixPointCount=2,o.set("params",n),i&&i.length>0?o.setPoints(i):t&&t.length>0&&o.setCoordinates(t),o}return g()(e,t),w()(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){try{if(this.getPointCount()<2)return!1;var t=this.getPoints(),e=[t[0],t[1]],i=e[0],n=e[1],o=tt(t),r=o*this.tailWidthFactor,s=o*this.neckWidthFactor,a=o*this.headWidthFactor,l=lt(n,i,Y,r,!0),u=lt(n,i,Y,r,!1),c=lt(i,n,this.headAngle,a,!1),h=lt(i,n,this.headAngle,a,!0),p=[l,lt(i,n,this.neckAngle,s,!1),c,n,h,lt(i,n,this.neckAngle,s,!0),u];this.setCoordinates([p])}catch(t){console.log(t)}}},{key:"setMap",value:function(t){if(!(t&&t instanceof a.a.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(a.a.geom.Polygon),Oe=function(t){function e(t,i,n){h()(this,e);var o=f()(this,(e.__proto__||u()(e)).call(this,t,i,n));return o.tailWidthFactor=.05,o.neckWidthFactor=.1,o.headWidthFactor=.15,o.type=ue,o.headAngle=Math.PI/4,o.neckAngle=.17741*Math.PI,i&&i.length>0?o.setPoints(i):t&&t.length>0&&o.setCoordinates(t),o.set("params",n),o}return g()(e,t),e}(De),Le=function(t){function e(t,i,n){h()(this,e);var o=f()(this,(e.__proto__||u()(e)).call(this,t,i,n));return o.type=ce,o.headHeightFactor=.18,o.headWidthFactor=.3,o.neckHeightFactor=.85,o.neckWidthFactor=.15,o.tailWidthFactor=.1,o.headTailFactor=.8,o.swallowTailFactor=1,o.swallowTailPnt=null,o.set("params",n),i&&i.length>0?o.setPoints(i):t&&t.length>0&&o.setCoordinates(t),o}return g()(e,t),w()(e,[{key:"generate",value:function(){try{var t=this.getPointCount();if(t<2)return!1;if(2===t)return this.setCoordinates([this.points]),!1;var e=this.getPoints(),i=[e[0],e[1]],n=i[0],o=i[1];st(e[0],e[1],e[2])&&(n=e[1],o=e[0]);var r=[et(n,o)].concat(e.slice(2)),s=this.getArrowHeadPoints(r,n,o),a=[s[0],s[4]],l=a[0],u=a[1],c=Q(n,o),h=tt(r),p=h*this.tailWidthFactor*this.swallowTailFactor;this.swallowTailPnt=lt(r[1],r[0],0,p,!0);var f=c/h,d=this.getArrowBodyPoints(r,l,u,f),g=d.length,m=[n].concat(d.slice(0,g/2));m.push(l);var v=[o].concat(d.slice(g/2,g));v.push(u),m=mt(m),v=mt(v),this.setCoordinates([m.concat(s,v.reverse(),[this.swallowTailPnt,m[0]])])}catch(t){console.log(t)}}}]),e}(Te),Ne=function(t){function e(t,i,n){h()(this,e);var o=f()(this,(e.__proto__||u()(e)).call(this,t,i,n));return o.type=he,o.headHeightFactor=.18,o.headWidthFactor=.3,o.neckHeightFactor=.85,o.neckWidthFactor=.15,o.tailWidthFactor=.1,o.set("params",n),i&&i.length>0?o.setPoints(i):t&&t.length>0&&o.setCoordinates(t),o}return g()(e,t),w()(e,[{key:"generate",value:function(){try{if(this.getPointCount()<2)return!1;var t=this.getPoints(),e=this.getTailPoints(t),i=this.getArrowHeadPoints(t,e[0],e[1]),n=i[0],o=i[4],r=this.getArrowBodyPoints(t,n,o,this.tailWidthFactor),s=r.length,a=[e[0]].concat(r.slice(0,s/2));a.push(n);var l=[e[1]].concat(r.slice(s/2,s));l.push(o),a=mt(a),l=mt(l),this.setCoordinates([a.concat(i,l.reverse())])}catch(t){console.log(t)}}},{key:"getTailPoints",value:function(t){var e=tt(t)*this.tailWidthFactor;return[lt(t[1],t[0],Y,e,!1),lt(t[1],t[0],Y,e,!0)]}}]),e}(Te),Ve=function(t){function e(t,i,n){h()(this,e);var o=f()(this,(e.__proto__||u()(e)).call(this,t,i,n));return o.type=pe,o.headHeightFactor=.18,o.headWidthFactor=.3,o.neckHeightFactor=.85,o.neckWidthFactor=.15,o.tailWidthFactor=.1,o.swallowTailFactor=1,o.swallowTailPnt=null,o.fixPointCount=2,o.set("params",n),i&&i.length>0?o.setPoints(i):t&&t.length>0&&o.setCoordinates(t),o}return g()(e,t),w()(e,[{key:"generate",value:function(){try{if(this.getPointCount()<2)return!1;var t=this.getPoints(),e=this.getTailPoints(t),i=this.getArrowHeadPoints(t,e[0],e[2]),n=i[0],o=i[4],r=this.getArrowBodyPoints(t,n,o,this.tailWidthFactor),s=r.length,a=[e[0]].concat(r.slice(0,s/2));a.push(n);var l=[e[2]].concat(r.slice(s/2,s));l.push(o),a=mt(a),l=mt(l),this.setCoordinates([a.concat(i,l.reverse(),[e[1],a[0]])])}catch(t){console.log(t)}}},{key:"getTailPoints",value:function(t){var e=tt(t)*this.tailWidthFactor,i=lt(t[1],t[0],Y,e,!1),n=lt(t[1],t[0],Y,e,!0),o=e*this.swallowTailFactor;return[i,lt(t[1],t[0],0,o,!0),n]}}]),e}(Te),Be=function(t){function e(t,i,n){h()(this,e);var o=f()(this,(e.__proto__||u()(e)).call(this,[]));return o.type=jt,o.t=.4,o.fixPointCount=3,o.set("params",n),i&&i.length>0?o.setPoints(i):t&&t.length>0&&o.setCoordinates(t),o}return g()(e,t),w()(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){var t=this.getPoints(),e=this.getPointCount();if(t.length<2)return!1;if(2===e){var i=et(t[0],t[1]),n=Q(t[0],i)/.9,o=lt(t[0],i,Y,n,!0);t=[t[0],o,t[1]]}var r=et(t[0],t[2]);t.push(r,t[0],t[1]);for(var s=[],a=void 0,l=void 0,u=void 0,c=[],h=0;h<t.length-2;h++){a=t[h],l=t[h+1],u=t[h+2];var p=ct(this.t,a,l,u);s=s.concat(p)}var f=s.length;s=[s[f-1]].concat(s.slice(0,f-1));for(var d=0;d<t.length-2;d++){a=t[d],l=t[d+1],c.push(a);for(var g=0;g<=j;g++){var m=at(g/j,a,s[2*d],s[2*d+1],l);c.push(m)}c.push(l)}this.setCoordinates([c])}},{key:"setMap",value:function(t){if(!(t&&t instanceof a.a.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(a.a.geom.Polygon),ze=function(t){function e(t,i,n){h()(this,e);var o=f()(this,(e.__proto__||u()(e)).call(this,[]));return o.type=fe,o.fixPointCount=2,o.set("params",n),i&&i.length>0?o.setPoints(i):t&&t.length>0&&o.setCoordinates(t),o}return g()(e,t),w()(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){if(this.getPointCount()<2)return!1;this.setCoordinates([this.calculatePonits(this.points)])}},{key:"calculatePonits",value:function(t){var e=[];if(t.length>1){var i=t[0],n=t[t.length-1];e=[i,[n[0],i[1]],[n[0],(i[1]+n[1])/2],[i[0],(i[1]+n[1])/2],[i[0],n[1]]]}return e}},{key:"setMap",value:function(t){if(!(t&&t instanceof a.a.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(a.a.geom.Polygon),Re=function(t){function e(t,i,n){h()(this,e);var o=f()(this,(e.__proto__||u()(e)).call(this,[]));return o.type=de,o.fixPointCount=2,o.set("params",n),i&&i.length>0?o.setPoints(i):t&&t.length>0&&o.setCoordinates(t),o}return g()(e,t),w()(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){if(this.getPointCount()<2)return!1;this.setCoordinates([this.calculatePonits(this.points)])}},{key:"calculatePonits",value:function(t){var e=[];if(t.length>1){var i=t[0],n=t[t.length-1];e=[i,[n[0],(i[1]+n[1])/2],[i[0],(i[1]+n[1])/2],[i[0],n[1]]]}return e}},{key:"setMap",value:function(t){if(!(t&&t instanceof a.a.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(a.a.geom.Polygon),He=function(t){function e(t,i,n){h()(this,e);var o=f()(this,(e.__proto__||u()(e)).call(this,[]));return o.type=ge,o.fixPointCount=2,o.set("params",n),i&&i.length>0?o.setPoints(i):t&&t.length>0&&o.setCoordinates(t),o}return g()(e,t),w()(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){if(this.getPointCount()<2)return!1;this.setCoordinates([this.calculatePonits(this.points)])}},{key:"calculatePonits",value:function(t){var e=[];if(t.length>1){var i=t[0],n=t[t.length-1],o=i,r=[(n[0]-i[0])/4+i[0],(n[1]-i[1])/8+i[1]],s=[(i[0]+n[0])/2,i[1]],a=[3*(n[0]-i[0])/4+i[0],-(n[1]-i[1])/8+i[1]],l=[n[0],i[1]],u=[n[0],(i[1]+n[1])/2],c=[3*(n[0]-i[0])/4+i[0],3*(n[1]-i[1])/8+i[1]],h=[(i[0]+n[0])/2,(i[1]+n[1])/2],p=[(n[0]-i[0])/4+i[0],5*(n[1]-i[1])/8+i[1]],f=[i[0],(i[1]+n[1])/2],d=[i[0],n[1]],g=ft([o,r,s,a,l]),m=ft([u,c,h,p,f]);(e=g.concat(m)).push(d)}return e}},{key:"setMap",value:function(t){if(!(t&&t instanceof a.a.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(a.a.geom.Polygon),We=a.a.interaction.Draw,$e=a.a.style.Style,Ge=a.a.style.Icon,Ue=a.a.style.Stroke,je=a.a.style.Fill,Ye=function(t){function e(t,i){h()(this,e);var n=f()(this,(e.__proto__||u()(e)).call(this));if(!(t&&t instanceof a.a.Map))throw new Error("传入的不是地图对象！");return n.map=t,n.options=i||{},n.points=null,n.plot=null,n.feature=null,n.plotType=null,n.plotParams=null,n.mapViewport=n.map.getViewport(),n.dblClickZoomInteraction=null,n.drawInteraction_=null,n.layerName=n.options&&n.options.layerName?n.options.layerName:Z,n.drawLayer=Et(n.map,n.layerName,{create:!0}),n.drawLayer.setZIndex(n.options.zIndex||99),n}return g()(e,t),w()(e,[{key:"createPlot",value:function(t,e,i){var n=i||{};switch(t){case $t:return"TextArea";case qt:return new me([],e,n);case Jt:return new ve([],e,n);case Yt:return new ye([],e,n);case Gt:return new ke([],e,n);case Qt:return new Pe([],e,n);case Ut:return new we([],e,n);case Zt:return new be([],e,n);case Xt:return new xe([],e,n);case Kt:return new Ce([],e,n);case te:return new _e([],e,n);case ee:return new Ae([],e,n);case ie:return new Me([],e,n);case ne:return new Se([],e,n);case re:return new Te([],e,n);case oe:return new Ee([],e,n);case se:return new Fe([],e,n);case ae:return new Ie([],e,n);case le:return new De([],e,n);case ue:return new Oe([],e,n);case ce:return new Le([],e,n);case he:return new Ne([],e,n);case pe:return new Ve([],e,n);case jt:return new Be([],e,n);case fe:return new ze([],e,n);case de:return new Re([],e,n);case ge:return new He([],e,n)}return null}},{key:"active",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.disActive(),this.deactiveMapTools(),this.plotType=t,this.plotParams=e,t===$t?this.activeInteraction():W()(n).some(function(e){return n[e]===t})?this.map.on("click",this.mapFirstClickHandler,this):console.warn("不存在的标绘类型！")}},{key:"activeInteraction",value:function(){this.drawInteraction_=new We({style:new $e({fill:new je({color:"rgba(255, 255, 255, 0.7)"}),stroke:new Ue({color:"rgba(0, 0, 0, 0.15)",width:2}),image:new Ge({anchor:[1,1],anchorXUnits:"fraction",anchorYUnits:"fraction",opacity:.75,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABgklEQVQ4T41T0W3CQAy1lfwRqR0h/CE5UhkBJmiZADpB0wlKJwA2aDegE5QR+Igl/noj9OPuLydXPuXQEYUKS5FyPvvd87ONRDRFxEdr7c4Y8ws3WFmW90VRvIjIF1ZVtQaANxH59N6v8zwvRaQEgCMATDu88I+Ipm1bk2XZHhEfAOAdFW00Gh2YOQafOeidHoaYEdGHc65GDZhMJuXpdDJ99hqkPmZe9e9iTgCoqmrWNM0hDerq/FGftXbcZxFzAgARrZg5vBaNiGpE3OhZRF6Zedu7DzkRYMrMKlQKYBBRQVVgw8zj3n3IGWSg9ESkds6tiqJQbe4AYJ6WGVkPAqh4+romdP9LbXMqZh/gXIKqm+d5EK9vbduOY7d0AAdL6AYLmqbRAQtGRMc4ONF/wSC2RF/PsuwbABapqLEjKqb3fq4sLtoYh6Lbiydr7TbtuwYDgH5qB9XmPEjdKG+Y+Xmo7ms+Lcs5N0uX6ei9X9y4TGtEXIZlukb7PzbdmNcisv8DtQILak2vZsYAAAAASUVORK5CYII="})}),type:"Circle",geometryFunction:We.createBox()}),this.map.addInteraction(this.drawInteraction_),this.drawInteraction_.on("drawend",this.textAreaDrawEnd,this)}},{key:"textAreaDrawEnd",value:function(t){if(t&&t.feature){this.map.removeInteraction(this.drawInteraction_);var e=t.feature.getGeometry().getExtent(),i=[(e[0]+e[2])/2,(e[1]+e[3])/2],n=this.map.getPixelFromCoordinate([e[0],e[1]]),o=this.map.getPixelFromCoordinate([e[2],e[3]]),r=[Math.abs(n[0]-o[0]),Math.abs(n[1]-o[1])],s=r[0],l=r[1],u=new Wt({id:yt(),position:i,value:"",width:s,height:l,style:{width:s+"px",height:l+"px"}});this.map&&this.map instanceof a.a.Map&&u?this.map.addOverlay(u):console.warn("未传入地图对象或者plotText创建失败！")}else console.info("未获取到要素！")}},{key:"disActive",value:function(){this.removeEventHandlers(),this.drawInteraction_&&(this.map.removeInteraction(this.drawInteraction_),this.drawInteraction_=null),this.points=[],this.plot=null,this.feature=null,this.plotType=null,this.plotParams=null,this.activateMapTools()}},{key:"isDrawing",value:function(){return!!this.plotType}},{key:"mapFirstClickHandler",value:function(t){this.map.un("click",this.mapFirstClickHandler,this),this.points.push(t.coordinate),this.plot=this.createPlot(this.plotType,this.points,this.plotParams),this.feature=new a.a.Feature(this.plot),this.feature.set("isPlot",!0),this.drawLayer.getSource().addFeature(this.feature),this.plotType===qt||this.plotType===Jt?(this.plot.finishDrawing(),this.drawEnd(t)):(this.map.on("click",this.mapNextClickHandler,this),this.plot.freehand||this.map.on("dblclick",this.mapDoubleClickHandler,this),this.map.un("pointermove",this.mapMouseMoveHandler,this),this.map.on("pointermove",this.mapMouseMoveHandler,this)),this.plotType&&this.feature&&(this.plotParams.plotType=this.plotType,this.feature.setProperties(this.plotParams))}},{key:"mapNextClickHandler",value:function(t){if(!this.plot.freehand&&Q(t.coordinate,this.points[this.points.length-1])<1e-4)return!1;this.points.push(t.coordinate),this.plot.setPoints(this.points),this.plot.fixPointCount===this.plot.getPointCount()&&this.mapDoubleClickHandler(t),this.plot&&this.plot.freehand&&this.mapDoubleClickHandler(t)}},{key:"mapDoubleClickHandler",value:function(t){t.preventDefault(),this.plot.finishDrawing(),this.drawEnd(t)}},{key:"mapMouseMoveHandler",value:function(t){var e=t.coordinate;if(Q(e,this.points[this.points.length-1])<1e-4)return!1;if(this.plot.freehand)this.points.push(e),this.plot.setPoints(this.points);else{var i=this.points.concat([e]);this.plot.setPoints(i)}}},{key:"removeEventHandlers",value:function(){this.map.un("click",this.mapFirstClickHandler,this),this.map.un("click",this.mapNextClickHandler,this),this.map.un("pointermove",this.mapMouseMoveHandler,this),this.map.un("dblclick",this.mapDoubleClickHandler,this)}},{key:"drawEnd",value:function(t){this.dispatchSync("drawEnd",{type:"drawEnd",originalEvent:t,feature:this.feature}),this.feature&&this.options.isClear&&this.drawLayer.getSource().removeFeature(this.feature),this.disActive()}},{key:"addFeature",value:function(){this.feature=new a.a.Feature(this.plot),this.feature&&this.drawLayer&&this.drawLayer.getSource().addFeature(this.feature)}},{key:"deactiveMapTools",value:function(){var t=this;this.map.getInteractions().getArray().every(function(e){return!(e instanceof a.a.interaction.DoubleClickZoom)||(t.dblClickZoomInteraction=e,t.map.removeInteraction(e),!1)})}},{key:"activateMapTools",value:function(){this.dblClickZoomInteraction&&this.dblClickZoomInteraction instanceof a.a.interaction.DoubleClickZoom&&(this.map.addInteraction(this.dblClickZoomInteraction),this.dblClickZoomInteraction=null)}}]),e}($.a),Ze=function(t){function e(t){h()(this,e);var i=f()(this,(e.__proto__||u()(e)).call(this));if(!(t&&t instanceof a.a.Map))throw new Error("传入的不是地图对象！");return i.map=t,i.mapViewport=i.map.getViewport(),i.activePlot=null,i.startPoint=null,i.ghostControlPoints=null,i.controlPoints=null,i.mouseOver=!1,i.elementTable={},i.activeControlPointId=null,i.mapDragPan=null,i.previousCursor_=null,i}return g()(e,t),w()(e,[{key:"initHelperDom",value:function(){var t=this;if(!this.map||!this.activePlot)return!1;var e=this.getMapParentElement();if(!e)return!1;var i,n,o,r,s=(i="div",n=e,o=J,(r=document.createElement(i)).style.display="none",o&&(r.id=o),n&&n.appendChild(r),r),a=this.getControlPoints();a&&Array.isArray(a)&&a.length>0&&a.forEach(function(e,i){var n,o,r,a,l,u=q+"-"+i;n="div",o=q,r=s,a=u,(l=document.createElement(n)).className=o||"",a&&(l.id=a),r&&r.appendChild(l),t.elementTable[u]=i})}},{key:"getMapParentElement",value:function(){var t=this.map.getTargetElement();return!!t&&t.parentNode}},{key:"destroyHelperDom",value:function(){var t=this;this.controlPoints&&Array.isArray(this.controlPoints)&&this.controlPoints.length>0&&(this.controlPoints.forEach(function(e,i){e&&e instanceof a.a.Overlay&&t.map.removeOverlay(e);var n=Ot(q+"-"+i);n&&(Vt(n,"mousedown",t.controlPointMouseDownHandler.bind(t)),Vt(n,"mousemove",t.controlPointMouseMoveHandler2.bind(t)))}),this.controlPoints=[]);var e,i,n=this.getMapParentElement(),o=Ot(J);o&&n&&(i=(e=o).parentNode)&&i.removeChild(e)}},{key:"initControlPoints",value:function(){var t=this;this.controlPoints=[];var e=this.getControlPoints();e&&Array.isArray(e)&&e.length>0&&e.forEach(function(i,n){var o=q+"-"+n;t.elementTable[o]=n;var r=Ot(o),s=new a.a.Overlay({id:o,position:e[n],positioning:"center-center",element:r});t.controlPoints.push(s),t.map.addOverlay(s),t.map.render(),Nt(r,"mousedown",t.controlPointMouseDownHandler.bind(t)),Nt(r,"mousemove",t.controlPointMouseMoveHandler2.bind(t))})}},{key:"controlPointMouseMoveHandler2",value:function(t){t.stopImmediatePropagation()}},{key:"controlPointMouseDownHandler",value:function(t){this.activeControlPointId=t.target.id,this.map.on("pointermove",this.controlPointMouseMoveHandler,this),Nt(this.mapViewport,"mouseup",this.controlPointMouseUpHandler.bind(this))}},{key:"controlPointMouseMoveHandler",value:function(t){var e=t.coordinate;if(this.activeControlPointId){var i=this.activePlot.getGeometry(),n=this.elementTable[this.activeControlPointId];i.updatePoint(e,n);var o=this.map.getOverlayById(this.activeControlPointId);o&&o.setPosition(e)}}},{key:"controlPointMouseUpHandler",value:function(t){this.map.un("pointermove",this.controlPointMouseMoveHandler,this),Vt(this.mapViewport,"mouseup",this.controlPointMouseUpHandler.bind(this))}},{key:"activate",value:function(t){var e=this;t&&t instanceof a.a.Feature&&t.get("isPlot")&&t.getGeometry().isPlot&&t!==this.activePlot&&(this.deactivate(),this.activePlot=t,this.previousCursor_=this.map.getTargetElement().style.cursor,window.setTimeout(function(){e.dispatch("active_plot_change",e.activePlot)},500),this.map.on("pointermove",this.plotMouseOverOutHandler,this),this.initHelperDom(),this.initControlPoints())}},{key:"getControlPoints",value:function(){var t=[];if(this.activePlot){var e=this.activePlot.getGeometry();e&&(t=e.getPoints())}return t}},{key:"plotMouseOverOutHandler",value:function(t){var e=this.map.forEachFeatureAtPixel(t.pixel,function(t){return t});return e&&e===this.activePlot?this.mouseOver||(this.mouseOver=!0,this.map.getTargetElement().style.cursor="move",this.map.on("pointerdown",this.plotMouseDownHandler,this)):this.mouseOver&&(this.mouseOver=!1,this.map.getTargetElement().style.cursor="default",this.map.un("pointerdown",this.plotMouseDownHandler,this)),e}},{key:"plotMouseDownHandler",value:function(t){this.ghostControlPoints=this.getControlPoints(),this.startPoint=t.coordinate,this.disableMapDragPan(),this.map.on("pointerup",this.plotMouseUpHandler,this),this.map.on("pointerdrag",this.plotMouseMoveHandler,this)}},{key:"plotMouseMoveHandler",value:function(t){var e=t.coordinate[0]-this.startPoint[0],i=t.coordinate[1]-this.startPoint[1],n=[];if(this.ghostControlPoints&&Array.isArray(this.ghostControlPoints)&&this.ghostControlPoints.length>0)for(var o=0;o<this.ghostControlPoints.length;o++){var r=[this.ghostControlPoints[o][0]+e,this.ghostControlPoints[o][1]+i];n.push(r);var s=q+"-"+o,a=this.map.getOverlayById(s);a&&(a.setPosition(r),a.setPositioning("center-center"))}this.activePlot.getGeometry().setPoints(n)}},{key:"plotMouseUpHandler",value:function(t){this.enableMapDragPan(),this.map.un("pointerup",this.plotMouseUpHandler,this),this.map.un("pointerdrag",this.plotMouseMoveHandler,this)}},{key:"disconnectEventHandlers",value:function(){this.map.un("pointermove",this.plotMouseOverOutHandler,this),this.map.un("pointermove",this.controlPointMouseMoveHandler,this),Vt(this.mapViewport,"mouseup",this.controlPointMouseUpHandler.bind(this)),this.map.un("pointerdown",this.plotMouseDownHandler,this),this.map.un("pointerup",this.plotMouseUpHandler,this),this.map.un("pointerdrag",this.plotMouseMoveHandler,this)}},{key:"deactivate",value:function(){this.activePlot=null,this.mouseOver=!1,this.map.getTargetElement().style.cursor=this.previousCursor_,this.previousCursor_=null,this.destroyHelperDom(),this.disconnectEventHandlers(),this.enableMapDragPan(),this.elementTable={},this.activeControlPointId=null,this.startPoint=null}},{key:"disableMapDragPan",value:function(){var t=this;this.map.getInteractions().getArray().every(function(e){return!(e instanceof a.a.interaction.DragPan)||(t.mapDragPan=e,t.map.removeInteraction(e),!1)})}},{key:"enableMapDragPan",value:function(){this.mapDragPan&&this.mapDragPan instanceof a.a.interaction.DragPan&&(this.map.addInteraction(this.mapDragPan),this.mapDragPan=null)}}]),e}($.a),qe=function(t){var e=t&&"object"===(void 0===t?"undefined":U()(t))?t:{},i=new a.a.style.Style({});return e.geometry&&e.geometry instanceof a.a.geom.Geometry&&i.setGeometry(e.geometry),e.zIndex&&"number"==typeof e.zIndex&&i.setZIndex(e.zIndex),e.fill&&"object"===U()(e.fill)&&i.setFill(this._getFill(e.fill)),e.image&&"object"===U()(e.image)&&i.setImage(this._getImage(e.image)),e.stroke&&"object"===U()(e.stroke)&&i.setStroke(this._getStroke(e.stroke)),e.text&&"object"===U()(e.text)&&i.setText(this._getText(e.text)),i};qe.prototype._getRegularShape=function(t){try{return new a.a.style.RegularShape({fill:this._getFill(t.fill)||void 0,points:"number"==typeof t.points?t.points:1,radius:"number"==typeof t.radius?t.radius:void 0,radius1:"number"==typeof t.radius1?t.radius1:void 0,radius2:"number"==typeof t.radius2?t.radius2:void 0,angle:"number"==typeof t.angle?t.angle:0,snapToPixel:"boolean"!=typeof t.snapToPixel||t.snapToPixel,stroke:this._getStroke(t.stroke)||void 0,rotation:"number"==typeof t.rotation?t.rotation:0,rotateWithView:"boolean"==typeof t.rotateWithView&&t.rotateWithView,atlasManager:t.atlasManager?t.atlasManager:void 0})}catch(t){console.log(t)}},qe.prototype._getImage=function(t){try{return"icon"===(t=t||{}).type?this._getIcon(t.image):this._getRegularShape(t.image)}catch(t){console.log(t)}},qe.prototype._getIcon=function(t){try{return t=t||{},new a.a.style.Icon({anchor:t.imageAnchor?t.imageAnchor:[.5,.5],anchorXUnits:t.imageAnchorXUnits?t.imageAnchorXUnits:"fraction",anchorYUnits:t.imageAnchorYUnits?t.imageAnchorYUnits:"fraction",anchorOrigin:t.imageAnchorOrigin?t.imageAnchorYUnits:"top-left",color:t.imageColor?t.imageColor:void 0,crossOrigin:t.crossOrigin?t.crossOrigin:void 0,img:t.img?t.img:void 0,offset:t.offset&&Array.isArray(t.offset)&&2===t.offset.length?t.offset:[0,0],offsetOrigin:t.offsetOrigin?t.offsetOrigin:"top-left",scale:"number"==typeof t.scale?t.scale:1,snapToPixel:"boolean"!=typeof t.snapToPixel||t.snapToPixel,rotateWithView:"boolean"==typeof t.rotateWithView&&t.rotateWithView,opacity:"number"==typeof t.imageOpacity?t.imageOpacity:1,rotation:"number"==typeof t.imageRotation?t.imageRotation:0,size:t.size&&Array.isArray(t.size)&&2===t.size.length?t.size:void 0,imgSize:t.imgSize&&Array.isArray(t.imgSize)&&2===t.imgSize.length?t.imgSize:void 0,src:t.imageSrc?t.imageSrc:void 0})}catch(t){console.log(t)}},qe.prototype._getStroke=function(t){try{return t=t||{},new a.a.style.Stroke({color:t.strokeColor?t.strokeColor:void 0,lineCap:t.strokeLineCap&&"string"==typeof t.strokeLineCap?t.strokeLineCap:"round",lineJoin:t.strokeLineJoin&&"string"==typeof t.strokeLineJoin?t.strokeLineJoin:"round",lineDash:t.strokeLineDash?t.strokeLineDash:void 0,lineDashOffset:"number"==typeof t.strokeLineDashOffset?t.strokeLineDashOffset:"0",miterLimit:"number"==typeof t.strokeMiterLimit?t.strokeMiterLimit:10,width:"number"==typeof t.strokeWidth?t.strokeWidth:void 0})}catch(t){console.log(t)}},qe.prototype._getText=function(t){try{return new a.a.style.Text({font:t.textFont&&"string"==typeof t.textFont?t.textFont:"10px sans-serif",offsetX:"number"==typeof t.textOffsetX?t.textOffsetX:0,offsetY:"number"==typeof t.textOffsetY?t.textOffsetY:0,scale:"number"==typeof t.textScale?t.textScale:void 0,rotation:"number"==typeof t.textRotation?t.textRotation:0,text:t.text&&"string"==typeof t.text?t.text:void 0,textAlign:t.textAlign&&"string"==typeof t.textAlign?t.textAlign:"start",textBaseline:t.textBaseline&&"string"==typeof t.textBaseline?t.textBaseline:"alphabetic",rotateWithView:"boolean"==typeof t.rotateWithView&&t.rotateWithView,fill:this._getFill(t.textFill),stroke:this._getStroke(t.textStroke)})}catch(t){console.log(t)}},qe.prototype._getFill=function(t){try{return t=t||{},new a.a.style.Fill({color:t.fillColor?t.fillColor:void 0})}catch(t){console.log(t)}};var Je=qe,Xe=function(){function t(e,i){if(h()(this,t),!(e&&e instanceof a.a.Map))throw new Error("传入的不是地图对象！");this.map=e,this.options=i,this.layerName=this.options&&this.options.layerName?this.options.layerName:Z}return w()(t,[{key:"getBaseStyle",value:function(t){var e=t.getStyle();if(!e){var i=Mt(this.map,this.layerName);if(!(i&&i instanceof a.a.layer.Vector))return!1;e=i.getStyle()}return e}},{key:"setIcon",value:function(t,e){try{if(t&&t instanceof a.a.Feature){var i=this.getBaseStyle(t).clone(),n=this._getImage(e);n&&(i.setImage(n),t.setStyle(i))}}catch(t){console.warn(t)}}},{key:"setBackgroundColor",value:function(t,e){try{if(t&&t instanceof a.a.Feature){var i=this.getBaseStyle(t).clone(),n=i.getFill(),o=n.getColor();if(o){var r=a.a.color.asArray(o),s=a.a.color.asArray(e),l=this.handleBackgroundColor(s,r[3]);n.setColor(l),t.setStyle(i)}}}catch(t){console.warn(t)}}},{key:"setOpacity",value:function(t,e){try{if(t&&t instanceof a.a.Feature){var i=this.getBaseStyle(t);if(i){var n=i.clone(),o=n.getFill(),r=o.getColor();if(r){var s=a.a.color.asArray(r);s[3]=e;var l="rgba("+s.join(",")+")";o.setColor(l),t.setStyle(n)}}}}catch(t){console.warn(t)}}},{key:"setBorderColor",value:function(t,e){try{if(t&&t instanceof a.a.Feature){var i=this.getBaseStyle(t).clone();i.getStroke().setColor(e),t.setStyle(i)}}catch(t){console.warn(t)}}},{key:"setBorderWidth",value:function(t,e){try{if(t&&t instanceof a.a.Feature){var i=this.getBaseStyle(t).clone();i.getStroke().setWidth(e),t.setStyle(i)}}catch(t){console.warn(t)}}},{key:"handleBackgroundColor",value:function(t,e){try{e||(e=1);var i=a.a.color.asArray(t);return i[3]=e,"rgba("+i.join(",")+")"}catch(t){console.warn(t)}}},{key:"getColor",value:function(t){try{var e=a.a.color.asArray(t);return a.a.color.asString(e)}catch(t){console.warn(t)}}},{key:"fixObject",value:function(t){if(t&&"object"===(void 0===t?"undefined":U()(t)))for(var e in t)e&&void 0===t[e]&&delete t[e];return t}},{key:"getStroke_",value:function(t){var e=null;if(t){var i=t.getStroke();i&&((e={}).strokeColor=this.getColor(i.getColor()),e.strokeWidth=i.getWidth(),e.strokeLineDash=i.getLineDash(),e.lineDashOffset=i.getLineDashOffset(),e.strokeLineCap=i.getLineCap(),e.strokeLineJoin=i.getLineJoin(),e.strokeMiterLimit=i.getMiterLimit())}return this.fixObject(e)}},{key:"getFill_",value:function(t){var e=null;if(t){var i=t.getFill();if(i){e={};var n=i.getColor();e.fillColor=this.getColor(n)}}return this.fixObject(e)}},{key:"getText_",value:function(t){var e=null;if(t){var i=t.getText();i&&((e={}).textFont=i.getFont(),e.textOffsetX=i.getOffsetX(),e.textOffsetY=i.getOffsetY(),e.textScale=i.getScale(),e.textRotation=i.getRotation(),e.text=i.getText(),e.textAlign=i.getTextAlign(),e.textBaseline=i.getTextBaseline(),e.rotateWithView=i.getRotateWithView(),e.textFill=this.getFill_(i),e.textStroke=this.getStroke_(i))}return this.fixObject(e)}},{key:"getImage_",value:function(t){var e=null;if(t){var i=t.getImage();i&&(e={},i instanceof a.a.style.Icon?(e.type="icon",e.image={},e.image.imageAnchor=i.getAnchor(),e.image.imageColor=i.getColor(),e.image.imageSrc=i.getSrc(),e.image.imgSize=i.getSize(),e.image.scale=i.getScale(),e.image.imageRotation=i.getRotation(),e.image.rotateWithView=i.getRotateWithView(),e.image.imageOpacity=i.getOpacity(),e.image.snapToPixel=i.getSnapToPixel(),e.image.offset=i.getOrigin()):i instanceof a.a.style.RegularShape&&(e.type="",e.image={},e.image.fill=this.getFill_(i),e.image.points=i.getPoints(),e.image.radius=i.getRadius(),e.image.radius2=i.getRadius2(),e.image.angle=i.getAngle(),e.image.stroke=this.getStroke_(i),e.image.rotateWithView=i.getRotateWithView(),e.image.snapToPixel=i.getSnapToPixel()))}return this.fixObject(e)}},{key:"getStyleCode",value:function(t){try{if(t&&t instanceof a.a.Feature){var e=this.getBaseStyle(t);if(e&&e instanceof a.a.style.Style){var i=this.getFill_(e),n=[1,null],o=n[0],r=n[1],s=n[2];i&&i.fillColor&&(r=a.a.color.asArray(i.fillColor),o=parseFloat(r[3]),r&&"number"==typeof o&&(s=this.handleBackgroundColor(a.a.color.asString(r),o)));var l=this.getStroke_(e),u=this.getText_(e);return{fill:{fillColor:s,opacity:o},stroke:l,image:this.getImage_(e),text:u}}}}catch(t){console.warn(t)}}},{key:"removeAllFeatures",value:function(){var t=Mt(this.map,this.layerName),e=this.map.getOverlays().getArray();t&&t.getSource().clear();if(e&&e.length>0)for(var i=e.length,n=0;n<i;n++)e[n]&&e[n].get("isPlotText")&&(this.map.removeOverlay(e[n]),n--)}},{key:"getFeatures",value:function(){var t=this,e=[],i=Mt(this.map,this.layerName);if(i){var n=i.getSource();if(n&&n instanceof a.a.source.Vector){var o=n.getFeatures();o&&o.length>0&&o.forEach(function(i,n){if(i&&i.getGeometry){var o=i.getGeometry();if(o&&o.getCoordinates){var r=o.getType(),s=o.getCoordinates();e.push({type:"Feature",geometry:{type:r,coordinates:s},properties:{type:i.getGeometry().getPlotType(),style:t.getStyleCode(i),points:i.getGeometry().getPoints()}})}}})}}return this.map.getOverlays().getArray().forEach(function(t){if(t.get("isPlotText")){var i=t.getStyle();i.width=t.getWidth()+"px",i.height=t.getHeight()+"px",e.push({type:"Feature",geometry:{type:"PlotText",coordinates:t.getPosition()},properties:{id:t.getId(),width:t.getWidth(),height:t.getHeight(),style:i,value:t.getValue()}})}}),e}},{key:"addFeatures",value:function(t){var e=this;if(t&&Array.isArray(t)&&t.length>0){var i=Mt(this.map,this.layerName);if(i||(i=Et(this.map,this.layerName,{create:!0})).setZIndex(this.options.zIndex||99),i){var n=i.getSource();if(n&&n instanceof a.a.source.Vector){var r=[];if(t.forEach(function(t){if(t&&t.geometry&&"PlotText"!==t.geometry.type)if(t.properties.type&&o[t.properties.type]){var i=new a.a.Feature({geometry:new o[t.properties.type]([],t.properties.points,t.properties)});if(i.set("isPlot",!0),r.push(i.getGeometry().getExtent()),t.properties.style){var s=new Je(t.properties.style);s&&i.setStyle(s)}n.addFeature(i)}else console.warn("不存在的标绘类型！");else if(t&&t.geometry&&"PlotText"===t.geometry.type){r.push(new a.a.geom.Point(t.geometry.coordinates).getExtent());var l=new Wt({id:t.properties.id,position:t.geometry.coordinates,width:t.properties.width,height:t.properties.height,value:t.properties.value,style:t.properties.style});e.map&&e.map instanceof a.a.Map&&l?e.map.addOverlay(l):console.warn("未传入地图对象或者plotText创建失败！")}}),this.options.zoomToExtent&&r&&r.length>0){var s=this._getExtent(r),l=this.map.getSize(),u=this.map.getView();u.fit(s,{size:l,duration:800,maxZoom:u.getMaxZoom()||void 0})}}}}}},{key:"_getExtent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],n=t.reduce(function(t,e){return[Math.min(e[0],t[0]),Math.min(e[1],t[1]),Math.max(e[2],t[2]),Math.max(e[3],t[3])]},i),o=a.a.extent.getSize(n),r="number"==typeof e.adjust?e.adjust:.2,s="number"==typeof e.minWidth?e.minWidth:.05,l="number"==typeof e.minHeight?e.minHeight:.05;if(o[0]<=s||o[1]<=l){var u=a.a.extent.getBottomLeft(n),c=a.a.extent.getTopRight(n),h=u[0]-r,p=u[1]-r,f=c[0]+r,d=c[1]+r;n=a.a.extent.buffer([h,p,f,d],r)}return n}}]),t}(),Qe=function t(e,i){h()(this,t),this.plotDraw=new Ye(e,i),this.plotEdit=new Ze(e,i),this.plotUtils=new Xe(e,i)};Qe.PlotTypes=n,Qe.Geometry=o;var Ke=Qe,ti={A:10,B:11,C:12,D:13,E:14,F:15},ei=function(t){return 2===t.length?16*(ti[t[0].toUpperCase()]||+t[0])+(ti[t[1].toUpperCase()]||+t[1]):ti[t[1].toUpperCase()]||+t[1]},ii=function(t){var e="";if(t&&"object"===(void 0===t?"undefined":U()(t)))e="rgb("+t.r+", "+t.g+", "+t.b+")";else if(-1!==t.indexOf("rgb")){var i=t.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter(function(t){return""!==t}).map(function(t,e){return e>2?parseFloat(t):parseInt(t,10)});4===i.length?e=Math.floor(100*parseFloat(i[3])):i.push(1),e={r:i[0],g:i[1],b:i[2],a:i[3]}}else if(-1!==t.indexOf("#")){var n=t.replace("#","").trim(),o=void 0,r=void 0,s=void 0;3===n.length?(o=ei(n[0]+n[0]),r=ei(n[1]+n[1]),s=ei(n[2]+n[2])):6===n.length&&(o=ei(n.substring(0,2)),r=ei(n.substring(2,4)),s=ei(n.substring(4))),e={r:o,g:r,b:s,a:1}}return{rgba:e}},ni=function(t){var e="";if(t&&"object"===(void 0===t?"undefined":U()(t)))e="rgb("+t.r+", "+t.g+", "+t.b+")";else if(-1!==t.indexOf("rgb")){var i=t.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter(function(t){return""!==t}).map(function(t,e){return e>2?parseFloat(t):parseInt(t,10)});e=4===i.length?Math.floor(100*parseFloat(i[3])):"rgb("+i.join(",")+")"}return e},oi=function(t){return(t||"").replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,"")},ri=function(){if(document.addEventListener)return function(t,e,i){t&&e&&i&&t.addEventListener(e,i,!1)}}(),si=function(){if(document.removeEventListener)return function(t,e,i){t&&e&&t.removeEventListener(e,i,!1)}}();function ai(t,e){if(!t||!e)return!1;if(-1!==e.indexOf(" "))throw new Error("className should not contain space.");return t.classList?t.classList.contains(e):(" "+t.className+" ").indexOf(" "+e+" ")>-1}function li(t,e){if(t){for(var i=t.className,n=(e||"").split(" "),o=0,r=n.length;o<r;o++){var s=n[o];s&&(t.classList?t.classList.add(s):ai(t,s)||(i+=" "+s))}t.classList||(t.className=i)}}function ui(t,e){if(t&&e){for(var i=e.split(" "),n=" "+t.className+" ",o=0,r=i.length;o<r;o++){var s=i[o];s&&(t.classList?t.classList.remove(s):ai(t,s)&&(n=n.replace(" "+s+" "," ")))}t.classList||(t.className=oi(n))}}var ci=!1,hi=function(){if(!r.a.prototype.$isServer){var t=fi.modalDom;return t?ci=!0:(ci=!1,t=document.createElement("div"),fi.modalDom=t,t.addEventListener("touchmove",function(t){t.preventDefault(),t.stopPropagation()}),t.addEventListener("click",function(){fi.doOnModalClick&&fi.doOnModalClick()})),t}},pi={},fi={zIndex:2e3,modalFade:!0,getInstance:function(t){return pi[t]},register:function(t,e){t&&e&&(pi[t]=e)},deregister:function(t){t&&(pi[t]=null,delete pi[t])},nextZIndex:function(){return fi.zIndex++},modalStack:[],doOnModalClick:function(){var t=fi.modalStack[fi.modalStack.length-1];if(t){var e=fi.getInstance(t.id);e&&e.closeOnClickModal&&e.close()}},openModal:function(t,e,i,n,o){if(!r.a.prototype.$isServer&&t&&void 0!==e){this.modalFade=o;for(var s=this.modalStack,a=0,l=s.length;a<l;a++){if(s[a].id===t)return}var u=hi();if(li(u,"v-modal"),this.modalFade&&!ci&&li(u,"v-modal-enter"),n)n.trim().split(/\s+/).forEach(function(t){return li(u,t)});setTimeout(function(){ui(u,"v-modal-enter")},200),i&&i.parentNode&&11!==i.parentNode.nodeType?i.parentNode.appendChild(u):document.body.appendChild(u),e&&(u.style.zIndex=e),u.style.display="",this.modalStack.push({id:t,zIndex:e,modalClass:n})}},closeModal:function(t){var e=this.modalStack,i=hi();if(e.length>0){var n=e[e.length-1];if(n.id===t){if(n.modalClass)n.modalClass.trim().split(/\s+/).forEach(function(t){return ui(i,t)});e.pop(),e.length>0&&(i.style.zIndex=e[e.length-1].zIndex)}else for(var o=e.length-1;o>=0;o--)if(e[o].id===t){e.splice(o,1);break}}0===e.length&&(this.modalFade&&li(i,"v-modal-leave"),setTimeout(function(){0===e.length&&(i.parentNode&&i.parentNode.removeChild(i),i.style.display="none",fi.modalDom=void 0),ui(i,"v-modal-leave")},200))}};r.a.prototype.$isServer||window.addEventListener("keydown",function(t){if(27===t.keyCode){var e=function(){if(!r.a.prototype.$isServer&&fi.modalStack.length>0){var t=fi.modalStack[fi.modalStack.length-1];if(!t)return;return fi.getInstance(t.id)}}();e&&e.closeOnPressEscape&&(e.handleClose?e.handleClose():e.handleAction?e.handleAction("cancel"):e.close())}});var di=fi,gi=(Boolean,String,Boolean,Boolean,Boolean,Boolean,Boolean,Boolean,i("ateH").Popper),mi=function(t){return t.stopPropagation()},vi={props:{placement:{type:String,default:"bottom"},boundariesPadding:{type:Number,default:5},reference:{},popper:{},offset:{default:0},value:Boolean,visibleArrow:Boolean,transition:String,appendToBody:{type:Boolean,default:!0},popperOptions:{type:Object,default:function(){return{gpuAcceleration:!1}}}},data:function(){return{showPopper:!1,currentPlacement:""}},watch:{value:{immediate:!0,handler:function(t){this.showPopper=t,this.$emit("input",t)}},showPopper:function(t){t?this.updatePopper():this.destroyPopper(),this.$emit("input",t)}},methods:{createPopper:function(){var t=this;if(!this.$isServer&&(this.currentPlacement=this.currentPlacement||this.placement,/^(top|bottom|left|right)(-start|-end)?$/g.test(this.currentPlacement))){var e=this.popperOptions,i=this.popperElm=this.popperElm||this.popper||this.$refs.popper,n=this.referenceElm=this.referenceElm||this.reference||this.$refs.reference;!n&&this.$slots.reference&&this.$slots.reference[0]&&(n=this.referenceElm=this.$slots.reference[0].elm),i&&n&&(this.visibleArrow&&this.appendArrow(i),this.appendToBody&&document.body.appendChild(this.popperElm),this.popperJS&&this.popperJS.destroy&&this.popperJS.destroy(),e.placement=this.currentPlacement,e.offset=this.offset,this.popperJS=new gi(n,i,e),this.popperJS.onCreate(function(e){t.$emit("created",t),t.resetTransformOrigin(),t.$nextTick(t.updatePopper)}),"function"==typeof e.onUpdate&&this.popperJS.onUpdate(e.onUpdate),this.popperJS._popper.style.zIndex=di.nextZIndex(),this.popperElm.addEventListener("click",mi))}},updatePopper:function(){this.popperJS?this.popperJS.update():this.createPopper()},doDestroy:function(){!this.showPopper&&this.popperJS&&(this.popperJS.destroy(),this.popperJS=null)},destroyPopper:function(){this.popperJS&&this.resetTransformOrigin()},resetTransformOrigin:function(){var t=this.popperJS._popper.getAttribute("x-placement").split("-")[0],e={top:"bottom",bottom:"top",left:"right",right:"left"}[t];this.popperJS._popper.style.transformOrigin=["top","bottom"].indexOf(t)>-1?"center "+e:e+" center"},appendArrow:function(t){var e=void 0;if(!this.appended){this.appended=!0;for(var i in t.attributes)if(/^_v-/.test(t.attributes[i].name)){e=t.attributes[i].name;break}var n=document.createElement("div");e&&n.setAttribute(e,""),n.setAttribute("x-arrow",""),n.className="popper__arrow",t.appendChild(n)}}},beforeDestroy:function(){this.doDestroy(),this.popperElm&&this.popperElm.parentNode===document.body&&(this.popperElm.removeEventListener("click",mi),document.body.removeChild(this.popperElm))},deactivated:function(){this.$options.beforeDestroy[0].call(this)}},yi=i("Zzkc"),ki={name:"sf-color-picker-dropdown",mixins:[vi],props:{color:{required:!0}},data:function(){return{colorInner:""}},mounted:function(){this.$parent.popperElm=this.popperElm=this.$el,this.referenceElm=this.$parent.$el,this.colorInner=this.color},watch:{showPopper:function(t){!0===t&&this.$nextTick(function(){console.log(t)})},colorInner:function(t){this.$emit("update:color",t)}},components:{Sketch:yi.Sketch}},Pi={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":t.doDestroy}},[i("sketch",{directives:[{name:"show",rawName:"v-show",value:t.showPopper,expression:"showPopper"}],model:{value:t.colorInner,callback:function(e){t.colorInner=e},expression:"colorInner"}})],1)},staticRenderFns:[]},wi=i("VU/8")(ki,Pi,!1,null,null,null).exports,bi=[],xi="@@clickoutsideContext",Ci=void 0,_i=0;!r.a.prototype.$isServer&&ri(document,"mousedown",function(t){return Ci=t}),!r.a.prototype.$isServer&&ri(document,"mouseup",function(t){bi.forEach(function(e){return e[xi].documentHandler(t,Ci)})});var Ai={name:"SfColorPicker",props:{value:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:String,popperClass:String},inject:{elFormItem:{default:""}},directives:{Clickoutside:{bind:function(t,e,i){bi.push(t);var n=_i++;t[xi]={id:n,documentHandler:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!(i.context&&n.target&&o.target)||t.contains(n.target)||t.contains(o.target)||t===n.target||i.context.popperElm&&(i.context.popperElm.contains(n.target)||i.context.popperElm.contains(o.target))||(e.expression&&t[xi].methodName&&i.context[t[xi].methodName]?i.context[t[xi].methodName]():t[xi].bindingFn&&t[xi].bindingFn())},methodName:e.expression,bindingFn:e.value}},update:function(t,e){t[xi].methodName=e.expression,t[xi].bindingFn=e.value},unbind:function(t){for(var e=bi.length,i=0;i<e;i++)if(bi[i][xi].id===t[xi].id){bi.splice(i,1);break}}}},computed:{displayedColor:function(){return(this.value||this.showPanelColor)&&this.color.rgba?ni(this.color.rgba):"transparent"},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},colorSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size}},watch:{value:function(t){t?t&&t!==this.color&&(this.color=ii(t)):this.showPanelColor=!1},color:function(t){this.showPanelColor=!0,t&&t.rgba&&(this.$emit("input",ni(t.rgba)),this.$emit("change",ni(t.rgba)))}},methods:{handleTrigger:function(){this.disabled||(this.showPicker=!this.showPicker)},hide:function(){this.showPicker=!1,this.resetColor()},resetColor:function(){var t=this;this.$nextTick(function(e){t.value?t.color=ii(t.value):t.showPanelColor=!1})}},mounted:function(){var t=this.value;t&&(this.color=ii(t))},data:function(){return{color:{},showPicker:!1,showPanelColor:!1}},components:{sfColorPickerDropdown:wi}},Mi={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:t.hide,expression:"hide"}],class:["sf-color-picker",t.disabled?"is-disabled":"",t.colorSize?"sf-color-picker--"+t.colorSize:""]},[i("div",{staticClass:"sf-color-picker__trigger",on:{click:t.handleTrigger}},[i("span",{staticClass:"sf-color-picker__color",class:{"is-alpha":t.showAlpha}},[i("span",{staticClass:"sf-color-picker__color-inner",style:{backgroundColor:t.displayedColor}}),t._v(" "),t.value||t.showPanelColor?t._e():i("span",{staticClass:"sf-color-picker__empty el-icon-close"})]),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:t.value||t.showPanelColor,expression:"value || showPanelColor"}],staticClass:"sf-color-picker__icon el-icon-caret-bottom"})]),t._v(" "),i("sf-color-picker-dropdown",{ref:"dropdown",class:["sf-color-picker__panel",t.popperClass||""],attrs:{color:t.color},on:{"update:color":function(e){t.color=e}},model:{value:t.showPicker,callback:function(e){t.showPicker=e},expression:"showPicker"}})],1)},staticRenderFns:[]};var Si=i("VU/8")(Ai,Mi,!1,function(t){i("8JTj")},null,null).exports;var Ei={methods:{dispatch:function(t,e,i){for(var n=this.$parent||this.$root,o=n.$options.componentName;n&&(!o||o!==t);)(n=n.$parent)&&(o=n.$options.componentName);n&&n.$emit.apply(n,[e].concat(i))},broadcast:function(t,e,i){(function t(e,i,n){this.$children.forEach(function(o){o.$options.componentName===e?o.$emit.apply(o,[i].concat(n)):t.apply(o,[e,i].concat([n]))})}).call(this,t,e,i)}}},Ti={name:"sf-input",componentName:"sf-input",mixins:[Ei,{mounted:function(){},methods:{getMigratingConfig:function(){return{props:{},events:{}}}}}],data:function(){return{currentValue:this.value,prefixOffset:null,suffixOffset:null,hovering:!1,focused:!1}},props:{value:[String,Number],placeholder:String,size:String,resize:String,name:String,form:String,id:String,maxlength:Number,minlength:Number,readonly:Boolean,autofocus:Boolean,disabled:Boolean,type:{type:String,default:"text"},rows:{type:Number,default:2},autoComplete:{type:String,default:"off"},max:{},min:{},step:{},validateEvent:{type:Boolean,default:!0},suffixIcon:String,prefixIcon:String,label:String,clearable:{type:Boolean,default:!1},tabindex:String},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},validateState:function(){return this.elFormItem?this.elFormItem.validateState:""},needStatusIcon:function(){return!!this.elForm&&this.elForm.statusIcon},validateIcon:function(){return{validating:"el-icon-loading",success:"el-icon-circle-check",error:"el-icon-circle-close"}[this.validateState]},inputSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},inputDisabled:function(){return this.disabled||(this.elForm||{}).disabled},isGroup:function(){return this.$slots.prepend||this.$slots.append},showClear:function(){return this.clearable&&""!==this.currentValue&&(this.focused||this.hovering)}},watch:{value:function(t,e){this.setCurrentValue(t)}},methods:{focus:function(){this.$refs.input.focus()},getMigratingConfig:function(){return{props:{icon:"icon is removed, use suffix-icon / prefix-icon instead.","on-icon-click":"on-icon-click is removed."},events:{click:"click is removed."}}},handleBlur:function(t){this.focused=!1,this.$emit("blur",t)},inputSelect:function(){this.$refs.input.select()},handleFocus:function(t){this.focused=!0,this.$emit("focus",t)},handleInput:function(t){var e=t.target.value;this.$emit("input",e),this.setCurrentValue(e)},handleChange:function(t){this.$emit("change",t.target.value)},setCurrentValue:function(t){t!==this.currentValue&&(this.currentValue=t)},calcIconOffset:function(t){var e={suf:"append",pre:"prepend"}[t];if(this.$slots[e])return{transform:"translateX("+("suf"===t?"-":"")+this.$el.querySelector(".sf-input-group__"+e).offsetWidth+"px)"}},clear:function(){this.$emit("input",""),this.$emit("change",""),this.setCurrentValue(""),this.focus()}},created:function(){this.$on("inputSelect",this.inputSelect)},mounted:function(){this.isGroup&&(this.prefixOffset=this.calcIconOffset("pre"),this.suffixOffset=this.calcIconOffset("suf"))}},Fi={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:["sf-input",t.inputSize?"sf-input--"+t.inputSize:"",{"is-disabled":t.inputDisabled,"sf-input-group":t.$slots.prepend||t.$slots.append,"sf-input-group--append":t.$slots.append,"sf-input-group--prepend":t.$slots.prepend,"sf-input--prefix":t.$slots.prefix||t.prefixIcon,"sf-input--suffix":t.$slots.suffix||t.suffixIcon}],on:{mouseenter:function(e){t.hovering=!0},mouseleave:function(e){t.hovering=!1}}},["textarea"!==t.type?[t.$slots.prepend?i("div",{staticClass:"sf-input-group__prepend"},[t._t("prepend")],2):t._e(),t._v(" "),"textarea"!==t.type?i("input",t._b({ref:"input",staticClass:"sf-input__inner",attrs:{tabindex:t.tabindex,disabled:t.inputDisabled,autocomplete:t.autoComplete,"aria-label":t.label},domProps:{value:t.currentValue},on:{input:t.handleInput,focus:t.handleFocus,blur:t.handleBlur,change:t.handleChange}},"input",t.$props,!1)):t._e(),t._v(" "),t.$slots.prefix||t.prefixIcon?i("span",{staticClass:"sf-input__prefix",style:t.prefixOffset},[t._t("prefix"),t._v(" "),t.prefixIcon?i("i",{staticClass:"sf-input__icon",class:t.prefixIcon}):t._e()],2):t._e(),t._v(" "),t.$slots.suffix||t.suffixIcon||t.showClear||t.validateState&&t.needStatusIcon?i("span",{staticClass:"sf-input__suffix",style:t.suffixOffset},[i("span",{staticClass:"sf-input__suffix-inner"},[t.showClear?i("i",{staticClass:"sf-input__icon el-icon-circle-close sf-input__clear",on:{click:t.clear}}):[t._t("suffix"),t._v(" "),t.suffixIcon?i("i",{staticClass:"sf-input__icon",class:t.suffixIcon}):t._e()]],2),t._v(" "),t.validateState?i("i",{staticClass:"sf-input__icon",class:["sf-input__validateIcon",t.validateIcon]}):t._e()]):t._e(),t._v(" "),t.$slots.append?i("div",{staticClass:"sf-input-group__append"},[t._t("append")],2):t._e()]:t._e()],2)},staticRenderFns:[]},Ii={name:"sf-input-number",directives:{repeatClick:{bind:function(t,e,i){var n=null,o=void 0,r=function(){return i.context[e.expression].apply()},s=function(){new Date-o<100&&r(),clearInterval(n),n=null};ri(t,"mousedown",function(t){var e,i,a;0===t.button&&(o=new Date,e=document,a=s,ri(e,i="mouseup",function t(){a&&a.apply(this,arguments),si(e,i,t)}),clearInterval(n),n=setInterval(r,100))})}}},components:{sfInput:i("VU/8")(Ti,Fi,!1,null,null,null).exports},props:{step:{type:Number,default:1},max:{type:Number,default:1/0},min:{type:Number,default:-1/0},value:{default:0},disabled:Boolean,size:String,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:""},name:String,label:String},data:function(){return{currentValue:0}},watch:{value:{immediate:!0,handler:function(t){var e=Number(t);isNaN(e)||(e>=this.max&&(e=this.max),e<=this.min&&(e=this.min),this.currentValue=e,this.$emit("input",e))}}},computed:{minDisabled:function(){return this._decrease(this.value,this.step)<this.min},maxDisabled:function(){return this._increase(this.value,this.step)>this.max},precision:function(){var t=this.value,e=this.step,i=this.getPrecision;return Math.max(i(t),i(e))},controlsAtRight:function(){return"right"===this.controlsPosition},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},inputNumberSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size}},methods:{focus:function(){this.$refs.input.focus()},toPrecision:function(t,e){return void 0===e&&(e=this.precision),parseFloat(parseFloat(Number(t).toFixed(e)))},getPrecision:function(t){var e=t.toString(),i=e.indexOf("."),n=0;return-1!==i&&(n=e.length-i-1),n},_increase:function(t,e){if("number"!=typeof t)return this.currentValue;var i=Math.pow(10,this.precision);return this.toPrecision((i*t+i*e)/i)},_decrease:function(t,e){if("number"!=typeof t)return this.currentValue;var i=Math.pow(10,this.precision);return this.toPrecision((i*t-i*e)/i)},increase:function(){if(!this.disabled&&!this.maxDisabled){var t=this.value||0,e=this._increase(t,this.step);e>this.max||this.setCurrentValue(e)}},decrease:function(){if(!this.disabled&&!this.minDisabled){var t=this.value||0,e=this._decrease(t,this.step);e<this.min||this.setCurrentValue(e)}},handleBlur:function(t){this.$emit("blur",t),this.$refs.input.setCurrentValue(this.currentValue)},handleFocus:function(t){this.$emit("focus",t)},setCurrentValue:function(t){var e=this.currentValue;t>=this.max&&(t=this.max),t<=this.min&&(t=this.min),e!==t?(this.$emit("change",t,e),this.$emit("input",t),this.currentValue=t):this.$refs.input.setCurrentValue(this.currentValue)},handleInputChange:function(t){var e=Number(t);isNaN(e)||this.setCurrentValue(e)}},mounted:function(){var t=this.$refs.input.$refs.input;t.setAttribute("role","spinbutton"),t.setAttribute("aria-valuemax",this.max),t.setAttribute("aria-valuemin",this.min),t.setAttribute("aria-valuenow",this.currentValue),t.setAttribute("aria-disabled",this.disabled)},updated:function(){this.$refs.input.$refs.input.setAttribute("aria-valuenow",this.currentValue)}},Di={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"sf-input-number",class:[t.inputNumberSize?"sf-input-number--"+t.inputNumberSize:"",{"is-disabled":t.disabled},{"is-without-controls":!t.controls},{"is-controls-right":t.controlsAtRight}]},[t.controls?i("span",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:t.decrease,expression:"decrease"}],staticClass:"sf-input-number__decrease",class:{"is-disabled":t.minDisabled},attrs:{role:"button"},on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.decrease(e)}}},[i("i",{class:"el-icon-"+(t.controlsAtRight?"arrow-down":"minus")})]):t._e(),t._v(" "),t.controls?i("span",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:t.increase,expression:"increase"}],staticClass:"sf-input-number__increase",class:{"is-disabled":t.maxDisabled},attrs:{role:"button"},on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.increase(e)}}},[i("i",{class:"el-icon-"+(t.controlsAtRight?"arrow-up":"plus")})]):t._e(),t._v(" "),i("sf-input",{ref:"input",attrs:{value:t.currentValue,disabled:t.disabled,size:t.inputNumberSize,max:t.max,min:t.min,name:t.name,label:t.label},on:{blur:t.handleBlur,focus:t.handleFocus,change:t.handleInputChange},nativeOn:{keydown:[function(e){if(!("button"in e)&&t._k(e.keyCode,"up",38,e.key))return null;e.preventDefault(),t.increase(e)},function(e){if(!("button"in e)&&t._k(e.keyCode,"down",40,e.key))return null;e.preventDefault(),t.decrease(e)}]}},[t.$slots.prepend?i("template",{slot:"prepend"},[t._t("prepend")],2):t._e(),t._v(" "),t.$slots.append?i("template",{slot:"append"},[t._t("append")],2):t._e()],2)],1)},staticRenderFns:[]},Oi=i("VU/8")(Ii,Di,!1,null,null,null).exports,Li={name:"sf-slider-button",props:{value:{type:Number,default:0},vertical:{type:Boolean,default:!1}},data:function(){return{hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:null,oldValue:this.value}},computed:{disabled:function(){return this.$parent.disabled},max:function(){return this.$parent.max},min:function(){return this.$parent.min},step:function(){return this.$parent.step},precision:function(){return this.$parent.precision},currentPosition:function(){return(this.value-this.min)/(this.max-this.min)*100+"%"},wrapperStyle:function(){return this.vertical?{bottom:this.currentPosition}:{left:this.currentPosition}}},watch:{dragging:function(t){this.$parent.dragging=t}},methods:{displayTooltip:function(){this.$refs.tooltip&&(this.$refs.tooltip.showPopper=!0)},hideTooltip:function(){this.$refs.tooltip&&(this.$refs.tooltip.showPopper=!1)},handleMouseEnter:function(){this.hovering=!0,this.displayTooltip()},handleMouseLeave:function(){this.hovering=!1,this.hideTooltip()},onButtonDown:function(t){this.disabled||(t.preventDefault(),this.onDragStart(t),window.addEventListener("mousemove",this.onDragging),window.addEventListener("mouseup",this.onDragEnd),window.addEventListener("contextmenu",this.onDragEnd))},onLeftKeyDown:function(){this.disabled||(this.newPosition=parseFloat(this.currentPosition)-this.step/(this.max-this.min)*100,this.setPosition(this.newPosition))},onRightKeyDown:function(){this.disabled||(this.newPosition=parseFloat(this.currentPosition)+this.step/(this.max-this.min)*100,this.setPosition(this.newPosition))},onDragStart:function(t){this.dragging=!0,this.isClick=!0,this.vertical?this.startY=t.clientY:this.startX=t.clientX,this.startPosition=parseFloat(this.currentPosition),this.newPosition=this.startPosition},onDragging:function(t){if(this.dragging){this.isClick=!1,this.displayTooltip(),this.$parent.resetSize();var e=0;this.vertical?(this.currentY=t.clientY,e=(this.startY-this.currentY)/this.$parent.sliderSize*100):(this.currentX=t.clientX,e=(this.currentX-this.startX)/this.$parent.sliderSize*100),this.newPosition=this.startPosition+e,this.setPosition(this.newPosition)}},onDragEnd:function(){var t=this;this.dragging&&(setTimeout(function(){t.dragging=!1,t.hideTooltip(),t.isClick||(t.setPosition(t.newPosition),t.$parent.emitChange())},0),window.removeEventListener("mousemove",this.onDragging),window.removeEventListener("mouseup",this.onDragEnd),window.removeEventListener("contextmenu",this.onDragEnd))},setPosition:function(t){var e=this;if(null!==t){t<0?t=0:t>100&&(t=100);var i=100/((this.max-this.min)/this.step),n=Math.round(t/i)*i*(this.max-this.min)*.01+this.min;n=parseFloat(n.toFixed(this.precision)),this.$emit("input",n),this.$nextTick(function(){e.$refs.tooltip&&e.$refs.tooltip.updatePopper()}),this.dragging||this.value===this.oldValue||(this.oldValue=this.value)}}}},Ni={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{ref:"button",staticClass:"sf-slider__button-wrapper",class:{hover:t.hovering,dragging:t.dragging},style:t.wrapperStyle,attrs:{tabindex:"0"},on:{mouseenter:t.handleMouseEnter,mouseleave:t.handleMouseLeave,mousedown:t.onButtonDown,focus:t.handleMouseEnter,blur:t.handleMouseLeave,keydown:[function(e){return"button"in e||!t._k(e.keyCode,"left",37,e.key)?"button"in e&&0!==e.button?null:void t.onLeftKeyDown(e):null},function(e){return"button"in e||!t._k(e.keyCode,"right",39,e.key)?"button"in e&&2!==e.button?null:void t.onRightKeyDown(e):null},function(e){if(!("button"in e)&&t._k(e.keyCode,"down",40,e.key))return null;e.preventDefault(),t.onLeftKeyDown(e)},function(e){if(!("button"in e)&&t._k(e.keyCode,"up",38,e.key))return null;e.preventDefault(),t.onRightKeyDown(e)}]}})},staticRenderFns:[]},Vi=i("VU/8")(Li,Ni,!1,null,null,null).exports,Bi={name:"sf-slider",mixins:[Ei],props:{min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},value:{type:[Number,Array],default:0},showInput:{type:Boolean,default:!1},showInputControls:{type:Boolean,default:!0},showStops:{type:Boolean,default:!1},showTooltip:{type:Boolean,default:!0},formatTooltip:Function,disabled:{type:Boolean,default:!1},range:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1},height:{type:String},debounce:{type:Number,default:300},label:{type:String}},data:function(){return{firstValue:null,secondValue:null,oldValue:null,dragging:!1,sliderSize:1}},watch:{value:function(t,e){this.dragging||Array.isArray(t)&&Array.isArray(e)&&t.every(function(t,i){return t===e[i]})||this.setValues()},dragging:function(t){t||this.setValues()},firstValue:function(t){this.range?this.$emit("input",[this.minValue,this.maxValue]):this.$emit("input",t)},secondValue:function(){this.range&&this.$emit("input",[this.minValue,this.maxValue])},min:function(){this.setValues()},max:function(){this.setValues()}},methods:{valueChanged:function(){var t=this;return this.range?![this.minValue,this.maxValue].every(function(e,i){return e===t.oldValue[i]}):this.value!==this.oldValue},setValues:function(){var t=this.value;this.range&&Array.isArray(t)?t[1]<this.min?this.$emit("input",[this.min,this.min]):t[0]>this.max?this.$emit("input",[this.max,this.max]):t[0]<this.min?this.$emit("input",[this.min,t[1]]):t[1]>this.max?this.$emit("input",[t[0],this.max]):(this.firstValue=t[0],this.secondValue=t[1],this.valueChanged()&&(this.dispatch("ElFormItem","el.form.change",[this.minValue,this.maxValue]),this.oldValue=t.slice())):this.range||"number"!=typeof t||isNaN(t)||(t<this.min?this.$emit("input",this.min):t>this.max?this.$emit("input",this.max):(this.firstValue=t,this.valueChanged()&&(this.dispatch("ElFormItem","el.form.change",t),this.oldValue=t)))},setPosition:function(t){var e=this.min+t*(this.max-this.min)/100;if(this.range){var i=void 0;i=Math.abs(this.minValue-e)<Math.abs(this.maxValue-e)?this.firstValue<this.secondValue?"button1":"button2":this.firstValue>this.secondValue?"button1":"button2",this.$refs[i].setPosition(t)}else this.$refs.button1.setPosition(t)},onSliderClick:function(t){if(!this.disabled&&!this.dragging){if(this.resetSize(),this.vertical){var e=this.$refs.slider.getBoundingClientRect().bottom;this.setPosition((e-t.clientY)/this.sliderSize*100)}else{var i=this.$refs.slider.getBoundingClientRect().left;this.setPosition((t.clientX-i)/this.sliderSize*100)}this.emitChange()}},resetSize:function(){this.$refs.slider&&(this.sliderSize=this.$refs.slider["client"+(this.vertical?"Height":"Width")])},emitChange:function(){var t=this;this.$nextTick(function(){t.$emit("change",t.range?[t.minValue,t.maxValue]:t.value)})}},computed:{stops:function(){var t=this;if(!this.showStops)return[];if(0===this.step)return[];for(var e=(this.max-this.min)/this.step,i=100*this.step/(this.max-this.min),n=[],o=1;o<e;o++)n.push(o*i);return this.range?n.filter(function(e){return e<100*(t.minValue-t.min)/(t.max-t.min)||e>100*(t.maxValue-t.min)/(t.max-t.min)}):n.filter(function(e){return e>100*(t.firstValue-t.min)/(t.max-t.min)})},minValue:function(){return Math.min(this.firstValue,this.secondValue)},maxValue:function(){return Math.max(this.firstValue,this.secondValue)},barSize:function(){return this.range?100*(this.maxValue-this.minValue)/(this.max-this.min)+"%":100*(this.firstValue-this.min)/(this.max-this.min)+"%"},barStart:function(){return this.range?100*(this.minValue-this.min)/(this.max-this.min)+"%":"0%"},precision:function(){var t=[this.min,this.max,this.step].map(function(t){var e=(""+t).split(".")[1];return e?e.length:0});return Math.max.apply(null,t)},runwayStyle:function(){return this.vertical?{height:this.height}:{}},barStyle:function(){return this.vertical?{height:this.barSize,bottom:this.barStart}:{width:this.barSize,left:this.barStart}}},mounted:function(){var t=void 0;this.range?(Array.isArray(this.value)?(this.firstValue=Math.max(this.min,this.value[0]),this.secondValue=Math.min(this.max,this.value[1])):(this.firstValue=this.min,this.secondValue=this.max),this.oldValue=[this.firstValue,this.secondValue],t=this.firstValue+"-"+this.secondValue):("number"!=typeof this.value||isNaN(this.value)?this.firstValue=this.min:this.firstValue=Math.min(this.max,Math.max(this.min,this.value)),this.oldValue=this.firstValue,t=this.firstValue),this.$el.setAttribute("aria-valuetext",t),this.$el.setAttribute("aria-label",this.label?this.label:"slider between "+this.min+" and "+this.max),this.resetSize(),window.addEventListener("resize",this.resetSize)},beforeDestroy:function(){window.removeEventListener("resize",this.resetSize)},components:{sfInputNumber:Oi,SliderButton:Vi}},zi={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"sf-slider",class:{"is-vertical":t.vertical,"sf-slider--with-input":t.showInput},attrs:{role:"slider","aria-valuemin":t.min,"aria-valuemax":t.max,"aria-orientation":t.vertical?"vertical":"horizontal","aria-disabled":t.disabled}},[t.showInput&&!t.range?i("sf-input-number",{ref:"input",staticClass:"sf-slider__input",attrs:{step:t.step,disabled:t.disabled,controls:t.showInputControls,min:t.min,max:t.max,debounce:t.debounce,size:"small"},on:{change:function(e){t.$nextTick(t.emitChange)}},model:{value:t.firstValue,callback:function(e){t.firstValue=e},expression:"firstValue"}}):t._e(),t._v(" "),i("div",{ref:"slider",staticClass:"sf-slider__runway",class:{"show-input":t.showInput,disabled:t.disabled},style:t.runwayStyle,on:{click:t.onSliderClick}},[i("div",{staticClass:"sf-slider__bar",style:t.barStyle}),t._v(" "),i("slider-button",{ref:"button1",attrs:{vertical:t.vertical},model:{value:t.firstValue,callback:function(e){t.firstValue=e},expression:"firstValue"}}),t._v(" "),t.range?i("slider-button",{ref:"button2",attrs:{vertical:t.vertical},model:{value:t.secondValue,callback:function(e){t.secondValue=e},expression:"secondValue"}}):t._e(),t._v(" "),t._l(t.stops,function(e,n){return t.showStops?i("div",{key:n,staticClass:"sf-slider__stop",style:t.vertical?{bottom:e+"%"}:{left:e+"%"}}):t._e()})],2)],1)},staticRenderFns:[]},Ri=i("VU/8")(Bi,zi,!1,null,null,null).exports,Hi={name:"ol-plot-vue",props:{plots:{type:Array,default:function(){return[]}},map:Object},data:function(){return{inPlotPanel:!1,tools:[],selected:"",title:"应急标绘",height:40,loading:!1,backgroundColor:"#20a0ff",borderColor:"#20a0ff",borderWidth:1,opacity:1,plot:null,schemeTitle:"",textAreaBackgroundColor:"rgb(255, 255, 255)",textAreaBorderColor:"rgb(238, 238, 238)",textAreaColor:"rgb(1, 5, 0)",textAreaFontSize:12,textAreaBorderWidth:1,currentTextArea:null}},watch:{borderWidth:function(t){this.plot.plotUtils.setBorderWidth(this.plot.plotEdit.activePlot,t)},opacity:function(t){this.plot.plotUtils.setOpacity(this.plot.plotEdit.activePlot,t)},backgroundColor:function(t){this.plot.plotUtils.setBackgroundColor(this.plot.plotEdit.activePlot,t)},borderColor:function(t){this.plot.plotUtils.setBorderColor(this.plot.plotEdit.activePlot,t)},textAreaBackgroundColor:function(t){console.log(t),t&&this.currentTextArea&&this.currentTextArea.setStyle({background:t})},textAreaBorderColor:function(t){console.log(t),t&&this.currentTextArea&&this.currentTextArea.setStyle({border:this.textAreaBorderWidth+"px solid "+t})},textAreaColor:function(t){console.log(t),t&&this.currentTextArea&&this.currentTextArea.setStyle({color:t})},textAreaFontSize:function(t){console.log(t),t&&this.currentTextArea&&this.currentTextArea.setStyle({fontSize:t+"px"})},textAreaBorderWidth:function(t){console.log(t),t&&this.currentTextArea&&this.currentTextArea.setStyle({border:t+"px solid "+this.textAreaBorderColor})},map:function(t){t&&this.initPlot()}},mounted:function(){this.map&&this.initPlot()},methods:{closeFunc:function(){this.$emit("close")},minFunc:function(){this.$emit("showMin")},initPlot:function(){this.plot||(this.plot=new Ke(this.map,{zIndex:999,zoomToExtent:!0}),this.plot.plotDraw.drawLayer.setStyle(new Je({fill:{fillColor:"#8BA2E4"},stroke:{strokeColor:"#1B9DE8",strokeWidth:2.5},image:{type:"icon",image:{imageAnchor:[.5,.5],imageAnchorXUnits:"fraction",imageAnchorYUnits:"fraction",imageOpacity:.75,imageSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpmODA3ZDlmZS1mOTRhLTRmZDktOWYwYS05ZTk3NjdkYTUxMjUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MDM3RkNGQUJDOEUyMTFFNkIwMDFGOUI0RDhFQUI4NEYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDM3RkNGQUFDOEUyMTFFNkIwMDFGOUI0RDhFQUI4NEYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6ZDc5MmU0ODgtMzAxNC1kNDRiLWI4OWEtYmIxMzNhYWIyYjI1IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU1YWEwNTQ3LTlmMGQtNDllYS1hOGI4LTRkZWRhMmU1OGRiMSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PoW3u00AAAMESURBVHja7FdLaFNBFJ2Z1/eapCnUam0V6cYWEdd+FkUK4kIRF4pLxeJOV4IbpaDQgoiCK9d+loIIKi4V3CmuRJCCImpRW2ur5NP83oznJE1IXmZqEsVuvBA67717z5k5987cqTTGiLUwJdbI1oy4q/7h4INFp+PmHm/7csmczIVmbyE0I6ERG/jek2Ih8OTbmCefxbvkrc+Z8I0L4/Hhfjuxg3BrqqgvA/CoTSFOABPib89SXpzrDeS9Xl+dh/+7jqUeiKvjX7Lhq1TBHGsxLYq+iHmN2NMdEa+PqYvflvVtFH2i3fwhJobYG/0xNdUWMWf7PacvYSj/pIAWc3oSWGdaIh5KqNGFnL72t6oXWFeJuWpV09JFcx1SxW0gXH7SlyKBn68qYhS1EdmiYZwwdtnjKWBieMi54i1JbxsADthIsW3EYEKJvm4lApDKlYlwzHf85jkSkwEmsZ3E2ZI5YZNfVvJeW6XN+I0+Dg+1gm2XGntx3BaVrJOWhr0qxjYFkFmI53MFgS1UI6cvpG3CiGI3ECNfIzZi5rR+EpM7k2V5afuHAzH1Il3OcdXXRhzFbpA11GKdjTioW+2uQb9GSuOY7+olt1kUO5pPa480v3HopLE2EHtK/LQ5cctU7eVcUeBwqT1zzHc23wj2D2eOIdNMSZuBaBD3adBdkZD5m0ZOdw/5bBBlUlRs/dZxVf2Mkxit7Qmqb8xyqKBoTC3XJHo6W2gCL2C1LmJiO6VGP70DaG3L4cKyLgO7jN/oY+wnXkhsJzF7aI8vH1qrEojzWS2W8lrk8cDZ8ccx3/Fb6JgXMB9F+3PTWY3tcTZbCvdhAUnbytMr53LL1StFmpjpYrh6d5pNh+83xtUpm+TtGjGIRcyW+vHXrL6LJn6hwy1aE4gYxGrrBoL9eQWH/gSkyrR9OCCGscTo6M7Fqw+k2oGmcJ+V2YK0IX0Zw9iWr7cO2T/gzxHcIobRjSZwvR3H9XYUFdwHopIn5bzviU+83vpK3IT/x2q3WnWS//+F+Vf2S4ABAMe7cI4Rhe5DAAAAAElFTkSuQmCC"}}})),this.plot.plotDraw.on("drawEnd",this.onDrawEnd_,this),this.map.on("activeTextArea",this.activeTextArea_,this),this.map.on("disActiveTextArea",this.activeTextArea_,this),this.map.un("click",this.handleClick_,this),this.map.on("click",this.handleClick_,this))},clearActiveTool:function(){this.plot.plotDraw.disActive()},onDrawEnd_:function(t){var e=t.feature;e&&(this.plot.plotEdit.activate(e),this.activeToolPanel(e))},activeTextArea_:function(t){console.log(t),"activeTextArea"===t.type?(this.currentTextArea=t.target.get("activeTextArea"),this.reFresheTextArea(this.currentTextArea)):console.log(t.type)},changeSelectedItem:function(t){this.selected=t.alias,t.alias?(this.plot.plotEdit.deactivate(),this.plot.plotDraw.active(t.alias)):console.warn("不存在的标绘类型！")},handleClick_:function(t){var e=this.map.forEachFeatureAtPixel(t.pixel,function(t){return t});e&&e.get("isPlot")&&!this.plot.plotDraw.isDrawing()?(this.plot.plotEdit.activate(e),this.activeToolPanel(e)):this.plot.plotEdit.deactivate(),this.currentTextArea=null},mouseOverHandle:function(t){this.$set(t,"mouseover",!0)},mouseOutHandle:function(t){this.$set(t,"mouseover",!1)},activeToolPanel:function(t){if(t&&t.getGeometry()){var e=t.getGeometry().getPlotType();e&&(this.selected=e),this.refreshe(this.plot.plotUtils.getStyleCode(t))}},refreshe:function(t){t&&(t.fill&&(this.opacity=t.fill.opacity||this.opacity,this.backgroundColor=t.fill.fillColor||this.backgroundColor),t.stroke&&(this.borderWidth=t.stroke.strokeWidth||this.borderWidth,this.borderColor=t.stroke.strokeColor||this.borderColor))},reFresheTextArea:function(t){var e=this;if(t){var i=t.getStyle();if(i){if(i.fontSize&&(this.textAreaFontSize=parseInt(i.fontSize)),i.color&&(this.textAreaColor=i.color),i.border)i.border.split(" ").every(function(t){return!t.indexOf("px")||(e.textAreaBorderWidth=parseInt(t),!1)}),this.textAreaBorderColor=i.border.slice(i.border.indexOf("rgb("),i.border.indexOf(")")+1);i.background&&(this.textAreaBackgroundColor=i.background.slice(i.background.indexOf("rgb("),i.background.indexOf(")")+1))}}},save:function(){var t=this.plot.plotUtils.getFeatures();console.log({content:R()(t),title:this.schemeTitle})}},components:{sfSlider:Ri,colorPicker:Si,sfInputNumber:Oi}},Wi={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ol-plot-vue"},[i("header",{staticClass:"panel-header"},[i("span",{attrs:{title:"应急标绘"}},[t._v("应急标绘")]),t._v(" "),i("span",{staticClass:"iconfont icon-zuixiaohua",on:{click:function(e){t.minFunc()}}}),t._v(" "),i("span",{staticClass:"iconfont icon-guanbi",on:{click:function(e){t.closeFunc()}}})]),t._v(" "),i("div",{staticClass:"panel-content"},[i("div",{ref:"workspace",staticClass:"ol-plot-vue-workspace"},[i("div",{staticClass:"ol-plot-vue-workspace-scroll"},[i("div",{staticClass:"ol-plot-vue-workspace-scroll-inner"},[i("div",{staticClass:"plot-list-wrap"},[i("div",{staticClass:"plot-list"},[i("ul",{staticClass:"clearfix"},t._l(t.plots,function(e,n){return i("li",{key:n,staticClass:"ol-plot-vue-header-li",class:t.selected===e.alias?"ol-plot-vue-selected":"",on:{mouseover:function(i){t.mouseOverHandle(e)},mouseout:function(i){t.mouseOutHandle(e)},click:function(i){t.changeSelectedItem(e,n)}}},[i("span",{style:{background:"url(static/images/plot/"+e.src+(e.mouseover||t.selected===e.alias?"-hover":"")+".png) no-repeat"}}),t._v(" "),i("span",[t._v(t._s(e.name))])])}))])]),t._v(" "),"TextArea"!==t.selected&&"Point"!==t.selected&&""!==t.selected?i("div",[i("div",{staticClass:"plot-edit"},[i("div",{staticClass:"plot-edit-color"},[i("span",{staticClass:"stration span-background"},[t._v("背景色")]),t._v(" "),i("color-picker",{model:{value:t.backgroundColor,callback:function(e){t.backgroundColor=e},expression:"backgroundColor"}}),t._v(" "),i("span",{staticClass:"stration span-border"},[t._v("边框色")]),t._v(" "),i("color-picker",{model:{value:t.borderColor,callback:function(e){t.borderColor=e},expression:"borderColor"}})],1),t._v(" "),i("div",{staticClass:"plot-edit-title"},[t._v("边框线宽")]),t._v(" "),i("div",{staticClass:"plot-edit-line"},[i("sf-slider",{attrs:{min:0,max:10,step:1},model:{value:t.borderWidth,callback:function(e){t.borderWidth=e},expression:"borderWidth"}})],1),t._v(" "),i("div",{staticClass:"plot-edit-title"},[t._v("透明度")]),t._v(" "),i("div",{staticClass:"plot-edit-line"},[i("sf-slider",{attrs:{min:0,max:1,step:.1},model:{value:t.opacity,callback:function(e){t.opacity=e},expression:"opacity"}})],1)])]):"TextArea"===t.selected?i("div",{staticClass:"ol-plot-vue-workspace-text-control"},[i("div",{staticClass:"plot-edit"},[i("div",{staticClass:"plot-edit-color"},[i("span",{staticClass:"stration span-background"},[t._v("背景色")]),t._v(" "),i("color-picker",{attrs:{"color-format":"rgb"},model:{value:t.textAreaBackgroundColor,callback:function(e){t.textAreaBackgroundColor=e},expression:"textAreaBackgroundColor"}}),t._v(" "),i("span",{staticClass:"stration span-border"},[t._v("边框色")]),t._v(" "),i("color-picker",{attrs:{"color-format":"rgb"},model:{value:t.textAreaBorderColor,callback:function(e){t.textAreaBorderColor=e},expression:"textAreaBorderColor"}})],1),t._v(" "),i("div",{staticClass:"plot-edit-text"},[i("span",{staticClass:"font-color span-color"},[t._v("字体颜色")]),t._v(" "),i("color-picker",{attrs:{"color-format":"rgb"},model:{value:t.textAreaColor,callback:function(e){t.textAreaColor=e},expression:"textAreaColor"}}),t._v(" "),i("span",{staticClass:"font-size span-size"},[t._v("字体大小")]),t._v(" "),i("sf-input-number",{attrs:{size:"small"},model:{value:t.textAreaFontSize,callback:function(e){t.textAreaFontSize=e},expression:"textAreaFontSize"}})],1),t._v(" "),i("div",{staticClass:"plot-edit-title"},[t._v("边框线宽")]),t._v(" "),i("div",{staticClass:"plot-edit-line"},[i("sf-slider",{attrs:{min:0,max:10,step:1},model:{value:t.textAreaBorderWidth,callback:function(e){t.textAreaBorderWidth=e},expression:"textAreaBorderWidth"}})],1)])]):t._e()])])])])])},staticRenderFns:[]};var $i=i("VU/8")(Hi,Wi,!1,function(t){i("46FE")},null,null).exports,Gi=(i("lsjP"),[$i]),Ui=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];Gi.map(function(e){t.component(e.name,e)})};"undefined"!=typeof window&&window.Vue&&Ui(window.Vue);var ji={version:B.a.version,install:Ui};i("whxO"),i("uMhA");r.a.config.productionTip=!1,r.a.use(ji),new r.a({el:"#app",components:{App:N},template:"<App/>"})},ateH:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){var e,n,o=i("K6ED"),r=i.n(o),s=i("fZjL"),a=i.n(s),l=i("woOf"),u=i.n(l),c=i("pFYg"),h=i.n(c);e=this,n=function(){var t=window,e={placement:"bottom",gpuAcceleration:!0,offset:0,boundariesElement:"viewport",boundariesPadding:5,preventOverflowOrder:["left","right","top","bottom"],flipBehavior:"flip",arrowElement:"[x-arrow]",modifiers:["shift","offset","preventOverflow","keepTogether","arrow","flip","applyStyle"],modifiersIgnored:[],forceAbsolute:!1};function i(t,i,n){this._reference=t.jquery?t[0]:t,this.state={};var o=void 0===i||null===i,r=i&&"[object Object]"===Object.prototype.toString.call(i);return this._popper=o||r?this.parse(r?i:{}):i.jquery?i[0]:i,this._options=u()({},e,n),this._options.modifiers=this._options.modifiers.map(function(t){if(-1===this._options.modifiersIgnored.indexOf(t))return"applyStyle"===t&&this._popper.setAttribute("x-placement",this._options.placement),this.modifiers[t]||t}.bind(this)),this.state.position=this._getPosition(this._popper,this._reference),f(this._popper,{position:this.state.position,top:0}),this.update(),this._setupEventListeners(),this}function n(e){var i=e.style.display,n=e.style.visibility;e.style.display="block",e.style.visibility="hidden";e.offsetWidth;var o=t.getComputedStyle(e),r=parseFloat(o.marginTop)+parseFloat(o.marginBottom),s=parseFloat(o.marginLeft)+parseFloat(o.marginRight),a={width:e.offsetWidth+s,height:e.offsetHeight+r};return e.style.display=i,e.style.visibility=n,a}function o(t){var e={left:"right",right:"left",bottom:"top",top:"bottom"};return t.replace(/left|right|bottom|top/g,function(t){return e[t]})}function s(t){var e=u()({},t);return e.right=e.left+e.width,e.bottom=e.top+e.height,e}function l(t,e){var i,n=0;for(i in t){if(t[i]===e)return n;n++}return null}function c(e,i){return t.getComputedStyle(e,null)[i]}function h(e){var i=e.offsetParent;return i!==t.document.body&&i?i:t.document.documentElement}function p(e){var i=e.parentNode;return i?i===t.document?t.document.body.scrollTop?t.document.body:t.document.documentElement:-1!==["scroll","auto"].indexOf(c(i,"overflow"))||-1!==["scroll","auto"].indexOf(c(i,"overflow-x"))||-1!==["scroll","auto"].indexOf(c(i,"overflow-y"))?i:p(e.parentNode):e}function f(t,e){a()(e).forEach(function(i){var n,o="";-1!==["width","height","top","right","bottom","left"].indexOf(i)&&(""!==(n=e[i])&&!isNaN(parseFloat(n))&&isFinite(n))&&(o="px"),t.style[i]=e[i]+o})}function d(t){var e={width:t.offsetWidth,height:t.offsetHeight,left:t.offsetLeft,top:t.offsetTop};return e.right=e.left+e.width,e.bottom=e.top+e.height,e}function g(t){var e=t.getBoundingClientRect(),i=-1!=navigator.userAgent.indexOf("MSIE")&&"HTML"===t.tagName?-t.scrollTop:e.top;return{left:e.left,top:i,right:e.right,bottom:e.bottom,width:e.right-e.left,height:e.bottom-i}}function m(e){for(var i=["","ms","webkit","moz","o"],n=0;n<i.length;n++){var o=i[n]?i[n]+e.charAt(0).toUpperCase()+e.slice(1):e;if(void 0!==t.document.body.style[o])return o}return null}return i.prototype.destroy=function(){return this._popper.removeAttribute("x-placement"),this._popper.style.left="",this._popper.style.position="",this._popper.style.top="",this._popper.style[m("transform")]="",this._removeEventListeners(),this._options.removeOnDestroy&&this._popper.remove(),this},i.prototype.update=function(){var t={instance:this,styles:{}};t.placement=this._options.placement,t._originalPlacement=this._options.placement,t.offsets=this._getOffsets(this._popper,this._reference,t.placement),t.boundaries=this._getBoundaries(t,this._options.boundariesPadding,this._options.boundariesElement),t=this.runModifiers(t,this._options.modifiers),"function"==typeof this.state.updateCallback&&this.state.updateCallback(t)},i.prototype.onCreate=function(t){return t(this),this},i.prototype.onUpdate=function(t){return this.state.updateCallback=t,this},i.prototype.parse=function(e){var i={tagName:"div",classNames:["popper"],attributes:[],parent:t.document.body,content:"",contentType:"text",arrowTagName:"div",arrowClassNames:["popper__arrow"],arrowAttributes:["x-arrow"]};e=u()({},i,e);var n=t.document,o=n.createElement(e.tagName);if(a(o,e.classNames),l(o,e.attributes),"node"===e.contentType?o.appendChild(e.content.jquery?e.content[0]:e.content):"html"===e.contentType?o.innerHTML=e.content:o.textContent=e.content,e.arrowTagName){var r=n.createElement(e.arrowTagName);a(r,e.arrowClassNames),l(r,e.arrowAttributes),o.appendChild(r)}var s=e.parent.jquery?e.parent[0]:e.parent;if("string"==typeof s){if((s=n.querySelectorAll(e.parent)).length>1&&console.warn("WARNING: the given `parent` query("+e.parent+") matched more than one element, the first one will be used"),0===s.length)throw"ERROR: the given `parent` doesn't exists!";s=s[0]}return s.length>1&&s instanceof Element==!1&&(console.warn("WARNING: you have passed as parent a list of elements, the first one will be used"),s=s[0]),s.appendChild(o),o;function a(t,e){e.forEach(function(e){t.classList.add(e)})}function l(t,e){e.forEach(function(e){t.setAttribute(e.split(":")[0],e.split(":")[1]||"")})}},i.prototype._getPosition=function(e,i){h(i);return this._options.forceAbsolute?"absolute":function e(i){if(i===t.document.body)return!1;if("fixed"===c(i,"position"))return!0;return i.parentNode?e(i.parentNode):i}(i)?"fixed":"absolute"},i.prototype._getOffsets=function(t,e,i){i=i.split("-")[0];var o={};o.position=this.state.position;var r="fixed"===o.position,s=function(t,e,i){var n=g(t),o=g(e);if(i){var r=p(e);o.top+=r.scrollTop,o.bottom+=r.scrollTop,o.left+=r.scrollLeft,o.right+=r.scrollLeft}return{top:n.top-o.top,left:n.left-o.left,bottom:n.top-o.top+n.height,right:n.left-o.left+n.width,width:n.width,height:n.height}}(e,h(t),r),a=n(t);return-1!==["right","left"].indexOf(i)?(o.top=s.top+s.height/2-a.height/2,o.left="left"===i?s.left-a.width:s.right):(o.left=s.left+s.width/2-a.width/2,o.top="top"===i?s.top-a.height:s.bottom),o.width=a.width,o.height=a.height,{popper:o,reference:s}},i.prototype._setupEventListeners=function(){if(this.state.updateBound=this.update.bind(this),t.addEventListener("resize",this.state.updateBound),"window"!==this._options.boundariesElement){var e=p(this._reference);e!==t.document.body&&e!==t.document.documentElement||(e=t),e.addEventListener("scroll",this.state.updateBound)}},i.prototype._removeEventListeners=function(){if(t.removeEventListener("resize",this.state.updateBound),"window"!==this._options.boundariesElement){var e=p(this._reference);e!==t.document.body&&e!==t.document.documentElement||(e=t),e.removeEventListener("scroll",this.state.updateBound)}this.state.updateBound=null},i.prototype._getBoundaries=function(e,i,n){var o,r,s,a={};if("window"===n){var l=t.document.body,u=t.document.documentElement;o=Math.max(l.scrollHeight,l.offsetHeight,u.clientHeight,u.scrollHeight,u.offsetHeight),a={top:0,right:Math.max(l.scrollWidth,l.offsetWidth,u.clientWidth,u.scrollWidth,u.offsetWidth),bottom:o,left:0}}else if("viewport"===n){var c=h(this._popper),f=p(this._popper),g=d(c),m="fixed"===e.offsets.popper.position?0:(s=f)==document.body?Math.max(document.documentElement.scrollTop,document.body.scrollTop):s.scrollTop,v="fixed"===e.offsets.popper.position?0:(r=f)==document.body?Math.max(document.documentElement.scrollLeft,document.body.scrollLeft):r.scrollLeft;a={top:0-(g.top-m),right:t.document.documentElement.clientWidth-(g.left-v),bottom:t.document.documentElement.clientHeight-(g.top-m),left:0-(g.left-v)}}else a=h(this._popper)===n?{top:0,left:0,right:n.clientWidth,bottom:n.clientHeight}:d(n);return a.left+=i,a.right-=i,a.top=a.top+i,a.bottom=a.bottom-i,a},i.prototype.runModifiers=function(t,e,i){var n=e.slice();return void 0!==i&&(n=this._options.modifiers.slice(0,l(this._options.modifiers,i))),n.forEach(function(e){var i;(i=e)&&"[object Function]"==={}.toString.call(i)&&(t=e.call(this,t))}.bind(this)),t},i.prototype.isModifierRequired=function(t,e){var i=l(this._options.modifiers,t);return!!this._options.modifiers.slice(0,i).filter(function(t){return t===e}).length},i.prototype.modifiers={},i.prototype.modifiers.applyStyle=function(t){var e,i={position:t.offsets.popper.position},n=Math.round(t.offsets.popper.left),o=Math.round(t.offsets.popper.top);return this._options.gpuAcceleration&&(e=m("transform"))?(i[e]="translate3d("+n+"px, "+o+"px, 0)",i.top=0,i.left=0):(i.left=n,i.top=o),u()(i,t.styles),f(this._popper,i),this._popper.setAttribute("x-placement",t.placement),this.isModifierRequired(this.modifiers.applyStyle,this.modifiers.arrow)&&t.offsets.arrow&&f(t.arrowElement,t.offsets.arrow),t},i.prototype.modifiers.shift=function(t){var e=t.placement,i=e.split("-")[0],n=e.split("-")[1];if(n){var o=t.offsets.reference,r=s(t.offsets.popper),a={y:{start:{top:o.top},end:{top:o.top+o.height-r.height}},x:{start:{left:o.left},end:{left:o.left+o.width-r.width}}},l=-1!==["bottom","top"].indexOf(i)?"x":"y";t.offsets.popper=u()(r,a[l][n])}return t},i.prototype.modifiers.preventOverflow=function(t){var e=this._options.preventOverflowOrder,i=s(t.offsets.popper),n={left:function(){var e=i.left;return i.left<t.boundaries.left&&(e=Math.max(i.left,t.boundaries.left)),{left:e}},right:function(){var e=i.left;return i.right>t.boundaries.right&&(e=Math.min(i.left,t.boundaries.right-i.width)),{left:e}},top:function(){var e=i.top;return i.top<t.boundaries.top&&(e=Math.max(i.top,t.boundaries.top)),{top:e}},bottom:function(){var e=i.top;return i.bottom>t.boundaries.bottom&&(e=Math.min(i.top,t.boundaries.bottom-i.height)),{top:e}}};return e.forEach(function(e){t.offsets.popper=u()(i,n[e]())}),t},i.prototype.modifiers.keepTogether=function(t){var e=s(t.offsets.popper),i=t.offsets.reference,n=Math.floor;return e.right<n(i.left)&&(t.offsets.popper.left=n(i.left)-e.width),e.left>n(i.right)&&(t.offsets.popper.left=n(i.right)),e.bottom<n(i.top)&&(t.offsets.popper.top=n(i.top)-e.height),e.top>n(i.bottom)&&(t.offsets.popper.top=n(i.bottom)),t},i.prototype.modifiers.flip=function(t){if(!this.isModifierRequired(this.modifiers.flip,this.modifiers.preventOverflow))return console.warn("WARNING: preventOverflow modifier is required by flip modifier in order to work, be sure to include it before flip!"),t;if(t.flipped&&t.placement===t._originalPlacement)return t;var e=t.placement.split("-")[0],i=o(e),n=t.placement.split("-")[1]||"",r=[];return(r="flip"===this._options.flipBehavior?[e,i]:this._options.flipBehavior).forEach(function(a,l){if(e===a&&r.length!==l+1){e=t.placement.split("-")[0],i=o(e);var u=s(t.offsets.popper),c=-1!==["right","bottom"].indexOf(e);(c&&Math.floor(t.offsets.reference[e])>Math.floor(u[i])||!c&&Math.floor(t.offsets.reference[e])<Math.floor(u[i]))&&(t.flipped=!0,t.placement=r[l+1],n&&(t.placement+="-"+n),t.offsets.popper=this._getOffsets(this._popper,this._reference,t.placement).popper,t=this.runModifiers(t,this._options.modifiers,this._flip))}}.bind(this)),t},i.prototype.modifiers.offset=function(t){var e=this._options.offset,i=t.offsets.popper;return-1!==t.placement.indexOf("left")?i.top-=e:-1!==t.placement.indexOf("right")?i.top+=e:-1!==t.placement.indexOf("top")?i.left-=e:-1!==t.placement.indexOf("bottom")&&(i.left+=e),t},i.prototype.modifiers.arrow=function(t){var e=this._options.arrowElement;if("string"==typeof e&&(e=this._popper.querySelector(e)),!e)return t;if(!this._popper.contains(e))return console.warn("WARNING: `arrowElement` must be child of its popper element!"),t;if(!this.isModifierRequired(this.modifiers.arrow,this.modifiers.keepTogether))return console.warn("WARNING: keepTogether modifier is required by arrow modifier in order to work, be sure to include it before arrow!"),t;var i={},o=t.placement.split("-")[0],r=s(t.offsets.popper),a=t.offsets.reference,l=-1!==["left","right"].indexOf(o),u=l?"height":"width",c=l?"top":"left",h=l?"left":"top",p=l?"bottom":"right",f=n(e)[u];a[p]-f<r[c]&&(t.offsets.popper[c]-=r[c]-(a[p]-f)),a[c]+f>r[p]&&(t.offsets.popper[c]+=a[c]+f-r[p]);var d=a[c]+a[u]/2-f/2-r[c];return d=Math.max(Math.min(r[u]-f-3,d),3),i[c]=d,i[h]="",t.offsets.arrow=i,t.arrowElement=e,t},u.a||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert first argument to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(void 0!==n&&null!==n){n=Object(n);for(var o=a()(n),s=0,l=o.length;s<l;s++){var u=o[s],c=r()(n,u);void 0!==c&&c.enumerable&&(e[u]=n[u])}}}return e}}),i},"function"==typeof define&&i("nErl")?define(n):"object"===h()(t)&&t.exports?t.exports=n():e.Popper=n()}.call(e,i("f1Eh")(t))},"kM+t":function(t,e){},lsjP:function(t,e){},uMhA:function(t,e){},whxO:function(t,e){}},["SrUm"]);
//# sourceMappingURL=app.cf9a3a4e70d4b1ad5913.js.map